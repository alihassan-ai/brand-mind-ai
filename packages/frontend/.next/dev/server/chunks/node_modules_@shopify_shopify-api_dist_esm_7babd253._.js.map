{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/types.ts"],"sourcesContent":["export enum LogSeverity {\n  Error,\n  Warning,\n  Info,\n  Debug,\n}\n\nexport enum ApiVersion {\n  October22 = '2022-10',\n  January23 = '2023-01',\n  April23 = '2023-04',\n  July23 = '2023-07',\n  October23 = '2023-10',\n  January24 = '2024-01',\n  April24 = '2024-04',\n  July24 = '2024-07',\n  October24 = '2024-10',\n  January25 = '2025-01',\n  April25 = '2025-04',\n  July25 = '2025-07',\n  October25 = '2025-10',\n  January26 = '2026-01',\n  April26 = '2026-04',\n  Unstable = 'unstable',\n}\n\nexport const LIBRARY_NAME = 'Shopify API Library';\n\n/* eslint-disable @shopify/typescript/prefer-pascal-case-enums */\nexport enum ShopifyHeader {\n  AccessToken = 'X-Shopify-Access-Token',\n  ApiVersion = 'X-Shopify-API-Version',\n  Domain = 'X-Shopify-Shop-Domain',\n  Hmac = 'X-Shopify-Hmac-Sha256',\n  Topic = 'X-Shopify-Topic',\n  SubTopic = 'X-Shopify-Sub-Topic',\n  WebhookId = 'X-Shopify-Webhook-Id',\n  StorefrontPrivateToken = 'Shopify-Storefront-Private-Token',\n  StorefrontSDKVariant = 'X-SDK-Variant',\n  StorefrontSDKVersion = 'X-SDK-Version',\n}\n/* eslint-enable @shopify/typescript/prefer-pascal-case-enums */\n\nexport enum ClientType {\n  Rest = 'rest',\n  Graphql = 'graphql',\n}\n\nexport const privacyTopics: string[] = [\n  'CUSTOMERS_DATA_REQUEST',\n  'CUSTOMERS_REDACT',\n  'SHOP_REDACT',\n];\n\nexport enum BillingInterval {\n  OneTime = 'ONE_TIME',\n  Every30Days = 'EVERY_30_DAYS',\n  Annual = 'ANNUAL',\n  Usage = 'USAGE',\n}\n\nexport type RecurringBillingIntervals = Exclude<\n  BillingInterval,\n  BillingInterval.OneTime\n>;\n\nexport enum BillingReplacementBehavior {\n  ApplyImmediately = 'APPLY_IMMEDIATELY',\n  ApplyOnNextBillingCycle = 'APPLY_ON_NEXT_BILLING_CYCLE',\n  Standard = 'STANDARD',\n}\n\nexport enum StatusCode {\n  Continue = 100,\n  SwitchingProtocols = 101,\n  Ok = 200,\n  Created = 201,\n  Accepted = 202,\n  NonAuthoritativeInformation = 203,\n  NoContent = 204,\n  ResetContent = 205,\n  PartialContent = 206,\n  MultipleChoices = 300,\n  MovedPermanently = 301,\n  Found = 302,\n  SeeOther = 303,\n  NotModified = 304,\n  UseProxy = 305,\n  TemporaryRedirect = 307,\n  BadRequest = 400,\n  Unauthorized = 401,\n  PaymentRequired = 402,\n  Forbidden = 403,\n  NotFound = 404,\n  MethodNotAllowed = 405,\n  NotAcceptable = 406,\n  ProxyAuthenticationRequired = 407,\n  RequestTimeout = 408,\n  Conflict = 409,\n  Gone = 410,\n  LengthRequired = 411,\n  PreconditionFailed = 412,\n  RequestEntityTooLarge = 413,\n  RequestUriTooLong = 414,\n  UnsupportedMediaType = 415,\n  RequestedRangeNotSatisfiable = 416,\n  ExpectationFailed = 417,\n  ImATeapot = 418,\n  UnprocessableEntity = 422,\n  TooManyRequests = 429,\n  InternalServerError = 500,\n  NotImplemented = 501,\n  BadGateway = 502,\n  ServiceUnavailable = 503,\n  GatewayTimeout = 504,\n  HttpVersionNotSupported = 505,\n}\n\nexport enum Method {\n  Get = 'GET',\n  Post = 'POST',\n  Put = 'PUT',\n  Patch = 'PATCH',\n  Delete = 'DELETE',\n  Head = 'HEAD',\n  Options = 'OPTIONS',\n  Connect = 'CONNECT',\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;IAAY;AAAZ,CAAA,SAAY,WAAW,EAAA;IACrB,WAAA,CAAA,WAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA,GAAA,OAAK;IACL,WAAA,CAAA,WAAA,CAAA,SAAA,CAAA,GAAA,CAAA,CAAA,GAAA,SAAO;IACP,WAAA,CAAA,WAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,GAAA,MAAI;IACJ,WAAA,CAAA,WAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA,GAAA,OAAK;AACP,CAAC,EALW,WAAW,IAAA,CAAX,WAAW,GAAA,CAAA,CAAA,CAAA,CAAA;IAOX;AAAZ,CAAA,SAAY,UAAU,EAAA;IACpB,UAAA,CAAA,WAAA,CAAA,GAAA,SAAqB;IACrB,UAAA,CAAA,WAAA,CAAA,GAAA,SAAqB;IACrB,UAAA,CAAA,SAAA,CAAA,GAAA,SAAmB;IACnB,UAAA,CAAA,QAAA,CAAA,GAAA,SAAkB;IAClB,UAAA,CAAA,WAAA,CAAA,GAAA,SAAqB;IACrB,UAAA,CAAA,WAAA,CAAA,GAAA,SAAqB;IACrB,UAAA,CAAA,SAAA,CAAA,GAAA,SAAmB;IACnB,UAAA,CAAA,QAAA,CAAA,GAAA,SAAkB;IAClB,UAAA,CAAA,WAAA,CAAA,GAAA,SAAqB;IACrB,UAAA,CAAA,WAAA,CAAA,GAAA,SAAqB;IACrB,UAAA,CAAA,SAAA,CAAA,GAAA,SAAmB;IACnB,UAAA,CAAA,QAAA,CAAA,GAAA,SAAkB;IAClB,UAAA,CAAA,WAAA,CAAA,GAAA,SAAqB;IACrB,UAAA,CAAA,WAAA,CAAA,GAAA,SAAqB;IACrB,UAAA,CAAA,SAAA,CAAA,GAAA,SAAmB;IACnB,UAAA,CAAA,UAAA,CAAA,GAAA,UAAqB;AACvB,CAAC,EAjBW,UAAU,IAAA,CAAV,UAAU,GAAA,CAAA,CAAA,CAAA,CAAA;AAmBf,MAAM,YAAY,GAAG;AAE5B,+DAAA,OACY;AAAZ,CAAA,SAAY,aAAa,EAAA;IACvB,aAAA,CAAA,aAAA,CAAA,GAAA,wBAAsC;IACtC,aAAA,CAAA,YAAA,CAAA,GAAA,uBAAoC;IACpC,aAAA,CAAA,QAAA,CAAA,GAAA,uBAAgC;IAChC,aAAA,CAAA,MAAA,CAAA,GAAA,uBAA8B;IAC9B,aAAA,CAAA,OAAA,CAAA,GAAA,iBAAyB;IACzB,aAAA,CAAA,UAAA,CAAA,GAAA,qBAAgC;IAChC,aAAA,CAAA,WAAA,CAAA,GAAA,sBAAkC;IAClC,aAAA,CAAA,wBAAA,CAAA,GAAA,kCAA2D;IAC3D,aAAA,CAAA,sBAAA,CAAA,GAAA,eAAsC;IACtC,aAAA,CAAA,sBAAA,CAAA,GAAA,eAAsC;AACxC,CAAC,EAXW,aAAa,IAAA,CAAb,aAAa,GAAA,CAAA,CAAA,CAAA,CAAA;AAYzB,8DAAA,OAEY;AAAZ,CAAA,SAAY,UAAU,EAAA;IACpB,UAAA,CAAA,MAAA,CAAA,GAAA,MAAa;IACb,UAAA,CAAA,SAAA,CAAA,GAAA,SAAmB;AACrB,CAAC,EAHW,UAAU,IAAA,CAAV,UAAU,GAAA,CAAA,CAAA,CAAA,CAAA;AAKf,MAAM,aAAa,GAAa;IACrC,wBAAwB;IACxB,kBAAkB;IAClB,aAAa;;IAGH;AAAZ,CAAA,SAAY,eAAe,EAAA;IACzB,eAAA,CAAA,SAAA,CAAA,GAAA,UAAoB;IACpB,eAAA,CAAA,aAAA,CAAA,GAAA,eAA6B;IAC7B,eAAA,CAAA,QAAA,CAAA,GAAA,QAAiB;IACjB,eAAA,CAAA,OAAA,CAAA,GAAA,OAAe;AACjB,CAAC,EALW,eAAe,IAAA,CAAf,eAAe,GAAA,CAAA,CAAA,CAAA,CAAA;IAYf;AAAZ,CAAA,SAAY,0BAA0B,EAAA;IACpC,0BAAA,CAAA,kBAAA,CAAA,GAAA,mBAAsC;IACtC,0BAAA,CAAA,yBAAA,CAAA,GAAA,6BAAuD;IACvD,0BAAA,CAAA,UAAA,CAAA,GAAA,UAAqB;AACvB,CAAC,EAJW,0BAA0B,IAAA,CAA1B,0BAA0B,GAAA,CAAA,CAAA,CAAA,CAAA;IAM1B;AAAZ,CAAA,SAAY,UAAU,EAAA;IACpB,UAAA,CAAA,UAAA,CAAA,UAAA,CAAA,GAAA,GAAA,CAAA,GAAA,UAAc;IACd,UAAA,CAAA,UAAA,CAAA,oBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,oBAAwB;IACxB,UAAA,CAAA,UAAA,CAAA,IAAA,CAAA,GAAA,GAAA,CAAA,GAAA,IAAQ;IACR,UAAA,CAAA,UAAA,CAAA,SAAA,CAAA,GAAA,GAAA,CAAA,GAAA,SAAa;IACb,UAAA,CAAA,UAAA,CAAA,UAAA,CAAA,GAAA,GAAA,CAAA,GAAA,UAAc;IACd,UAAA,CAAA,UAAA,CAAA,6BAAA,CAAA,GAAA,GAAA,CAAA,GAAA,6BAAiC;IACjC,UAAA,CAAA,UAAA,CAAA,WAAA,CAAA,GAAA,GAAA,CAAA,GAAA,WAAe;IACf,UAAA,CAAA,UAAA,CAAA,cAAA,CAAA,GAAA,GAAA,CAAA,GAAA,cAAkB;IAClB,UAAA,CAAA,UAAA,CAAA,gBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,gBAAoB;IACpB,UAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,iBAAqB;IACrB,UAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,kBAAsB;IACtB,UAAA,CAAA,UAAA,CAAA,OAAA,CAAA,GAAA,GAAA,CAAA,GAAA,OAAW;IACX,UAAA,CAAA,UAAA,CAAA,UAAA,CAAA,GAAA,GAAA,CAAA,GAAA,UAAc;IACd,UAAA,CAAA,UAAA,CAAA,aAAA,CAAA,GAAA,GAAA,CAAA,GAAA,aAAiB;IACjB,UAAA,CAAA,UAAA,CAAA,UAAA,CAAA,GAAA,GAAA,CAAA,GAAA,UAAc;IACd,UAAA,CAAA,UAAA,CAAA,mBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,mBAAuB;IACvB,UAAA,CAAA,UAAA,CAAA,YAAA,CAAA,GAAA,GAAA,CAAA,GAAA,YAAgB;IAChB,UAAA,CAAA,UAAA,CAAA,cAAA,CAAA,GAAA,GAAA,CAAA,GAAA,cAAkB;IAClB,UAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,iBAAqB;IACrB,UAAA,CAAA,UAAA,CAAA,WAAA,CAAA,GAAA,GAAA,CAAA,GAAA,WAAe;IACf,UAAA,CAAA,UAAA,CAAA,UAAA,CAAA,GAAA,GAAA,CAAA,GAAA,UAAc;IACd,UAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,kBAAsB;IACtB,UAAA,CAAA,UAAA,CAAA,eAAA,CAAA,GAAA,GAAA,CAAA,GAAA,eAAmB;IACnB,UAAA,CAAA,UAAA,CAAA,6BAAA,CAAA,GAAA,GAAA,CAAA,GAAA,6BAAiC;IACjC,UAAA,CAAA,UAAA,CAAA,gBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,gBAAoB;IACpB,UAAA,CAAA,UAAA,CAAA,UAAA,CAAA,GAAA,GAAA,CAAA,GAAA,UAAc;IACd,UAAA,CAAA,UAAA,CAAA,MAAA,CAAA,GAAA,GAAA,CAAA,GAAA,MAAU;IACV,UAAA,CAAA,UAAA,CAAA,gBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,gBAAoB;IACpB,UAAA,CAAA,UAAA,CAAA,oBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,oBAAwB;IACxB,UAAA,CAAA,UAAA,CAAA,uBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,uBAA2B;IAC3B,UAAA,CAAA,UAAA,CAAA,mBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,mBAAuB;IACvB,UAAA,CAAA,UAAA,CAAA,sBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,sBAA0B;IAC1B,UAAA,CAAA,UAAA,CAAA,8BAAA,CAAA,GAAA,GAAA,CAAA,GAAA,8BAAkC;IAClC,UAAA,CAAA,UAAA,CAAA,mBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,mBAAuB;IACvB,UAAA,CAAA,UAAA,CAAA,WAAA,CAAA,GAAA,GAAA,CAAA,GAAA,WAAe;IACf,UAAA,CAAA,UAAA,CAAA,qBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,qBAAyB;IACzB,UAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,iBAAqB;IACrB,UAAA,CAAA,UAAA,CAAA,qBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,qBAAyB;IACzB,UAAA,CAAA,UAAA,CAAA,gBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,gBAAoB;IACpB,UAAA,CAAA,UAAA,CAAA,YAAA,CAAA,GAAA,GAAA,CAAA,GAAA,YAAgB;IAChB,UAAA,CAAA,UAAA,CAAA,oBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,oBAAwB;IACxB,UAAA,CAAA,UAAA,CAAA,gBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,gBAAoB;IACpB,UAAA,CAAA,UAAA,CAAA,yBAAA,CAAA,GAAA,GAAA,CAAA,GAAA,yBAA6B;AAC/B,CAAC,EA5CW,UAAU,IAAA,CAAV,UAAU,GAAA,CAAA,CAAA,CAAA,CAAA;IA8CV;AAAZ,CAAA,SAAY,MAAM,EAAA;IAChB,MAAA,CAAA,KAAA,CAAA,GAAA,KAAW;IACX,MAAA,CAAA,MAAA,CAAA,GAAA,MAAa;IACb,MAAA,CAAA,KAAA,CAAA,GAAA,KAAW;IACX,MAAA,CAAA,OAAA,CAAA,GAAA,OAAe;IACf,MAAA,CAAA,QAAA,CAAA,GAAA,QAAiB;IACjB,MAAA,CAAA,MAAA,CAAA,GAAA,MAAa;IACb,MAAA,CAAA,SAAA,CAAA,GAAA,SAAmB;IACnB,MAAA,CAAA,SAAA,CAAA,GAAA,SAAmB;AACrB,CAAC,EATW,MAAM,IAAA,CAAN,MAAM,GAAA,CAAA,CAAA,CAAA,CAAA"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/error.ts"],"sourcesContent":["import {AdapterResponse} from '../runtime/http/types';\n\nexport class ShopifyError extends Error {\n  constructor(message?: string) {\n    super(message);\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\n\nexport class InvalidHmacError extends ShopifyError {}\nexport class InvalidShopError extends ShopifyError {}\nexport class InvalidHostError extends ShopifyError {}\nexport class InvalidJwtError extends ShopifyError {}\nexport class MissingJwtTokenError extends ShopifyError {}\nexport class InvalidDeliveryMethodError extends ShopifyError {}\n\nexport class SafeCompareError extends ShopifyError {}\nexport class PrivateAppError extends ShopifyError {}\n\nexport class HttpRequestError extends ShopifyError {}\nexport class HttpMaxRetriesError extends ShopifyError {}\n\ninterface HttpResponseData {\n  code: number;\n  statusText: string;\n  body?: Record<string, unknown>;\n  headers?: Record<string, unknown>;\n}\n\ninterface HttpResponseErrorParams extends HttpResponseData {\n  message: string;\n}\nexport class HttpResponseError<\n  ResponseType extends HttpResponseData = HttpResponseData,\n> extends ShopifyError {\n  readonly response: ResponseType;\n\n  constructor({\n    message,\n    code,\n    statusText,\n    body,\n    headers,\n  }: HttpResponseErrorParams) {\n    super(message);\n    this.response = {\n      code,\n      statusText,\n      body,\n      headers,\n    } as ResponseType;\n  }\n}\nexport class HttpRetriableError<\n  ResponseType extends HttpResponseData = HttpResponseData,\n> extends HttpResponseError<ResponseType> {}\nexport class HttpInternalError extends HttpRetriableError {}\n\ninterface HttpThrottlingErrorData extends HttpResponseData {\n  retryAfter?: number;\n}\ninterface HttpThrottlingErrorParams extends HttpThrottlingErrorData {\n  message: string;\n}\nexport class HttpThrottlingError extends HttpRetriableError<HttpThrottlingErrorData> {\n  constructor({retryAfter, ...params}: HttpThrottlingErrorParams) {\n    super(params);\n    this.response.retryAfter = retryAfter;\n  }\n}\n\nexport class RestResourceError extends ShopifyError {}\n\ninterface GraphqlQueryErrorParams {\n  message: string;\n  response: Record<string, unknown>;\n  headers?: Record<string, unknown>;\n  body?: Record<string, any>;\n}\n\nexport class GraphqlQueryError extends ShopifyError {\n  readonly response: Record<string, unknown>;\n  readonly headers?: Record<string, unknown>;\n  readonly body?: Record<string, any>;\n\n  constructor({message, response, headers, body}: GraphqlQueryErrorParams) {\n    super(message);\n    this.response = response;\n    this.headers = headers;\n    this.body = body;\n  }\n}\n\nexport class InvalidOAuthError extends ShopifyError {}\nexport class BotActivityDetected extends ShopifyError {}\nexport class CookieNotFound extends ShopifyError {}\nexport class InvalidSession extends ShopifyError {}\n\ninterface InvalidWebhookParams {\n  message: string;\n  response: AdapterResponse;\n}\nexport class InvalidWebhookError extends ShopifyError {\n  readonly response: AdapterResponse;\n\n  constructor({message, response}: InvalidWebhookParams) {\n    super(message);\n    this.response = response;\n  }\n}\nexport class MissingWebhookCallbackError extends InvalidWebhookError {}\nexport class SessionStorageError extends ShopifyError {}\nexport class MissingRequiredArgument extends ShopifyError {}\nexport class UnsupportedClientType extends ShopifyError {}\nexport class InvalidRequestError extends ShopifyError {}\ninterface BillingErrorParams {\n  message: string;\n  errorData: any;\n}\nexport class BillingError extends ShopifyError {\n  readonly errorData: any;\n\n  constructor({message, errorData}: BillingErrorParams) {\n    super(message);\n    this.errorData = errorData;\n  }\n}\nexport class FeatureDeprecatedError extends ShopifyError {}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/version.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/version.ts"],"sourcesContent":["export const SHOPIFY_API_LIBRARY_VERSION = '12.3.0';\n"],"names":[],"mappings":";;;;AAAO,MAAM,2BAA2B,GAAG"}},
    {"offset": {"line": 324, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/log.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/logger/log.ts"],"sourcesContent":["import {LogSeverity} from '../types';\nimport {ConfigInterface} from '../base-types';\n\nimport {LogContext} from './types';\n\nexport type LoggerFunction = (\n  severity: LogSeverity,\n  message: string,\n  context?: Record<string, any>,\n) => void;\n\nexport function log(config: ConfigInterface): LoggerFunction {\n  return function (\n    severity: LogSeverity,\n    message: string,\n    context: LogContext = {},\n  ): void {\n    if (severity > config.logger.level) {\n      return;\n    }\n\n    const prefix: string[] = [];\n\n    if (config.logger.timestamps) {\n      prefix.push(`${new Date().toISOString().slice(0, -5)}Z`);\n    }\n\n    let packageString = context.package || 'shopify-api';\n    delete context.package;\n\n    switch (severity) {\n      case LogSeverity.Debug:\n        packageString = `${packageString}/DEBUG`;\n        break;\n      case LogSeverity.Info:\n        packageString = `${packageString}/INFO`;\n        break;\n      case LogSeverity.Warning:\n        packageString = `${packageString}/WARNING`;\n        break;\n      case LogSeverity.Error:\n        packageString = `${packageString}/ERROR`;\n        break;\n    }\n\n    prefix.push(packageString);\n\n    const contextParts: string[] = [];\n    Object.entries(context).forEach(([key, value]) => {\n      contextParts.push(`${key}: ${value}`);\n    });\n\n    let suffix = '';\n    if (contextParts.length > 0) {\n      suffix = ` | {${contextParts.join(', ')}}`;\n    }\n\n    config.logger.log(severity, `[${prefix.join('] [')}] ${message}${suffix}`);\n  };\n}\n"],"names":[],"mappings":";;;;;;AAWM,SAAU,GAAG,CAAC,MAAuB,EAAA;IACzC,OAAO,SACL,QAAqB,EACrB,OAAe,EACf,UAAsB,CAAA,CAAE,EAAA;QAExB,IAAI,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE;YAClC;QACF;QAEA,MAAM,MAAM,GAAa,EAAE;QAE3B,IAAI,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE;YAC5B,MAAM,CAAC,IAAI,CAAC,CAAA,EAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAA,CAAE,CAAC,CAAA,CAAA,CAAG,CAAC;QAC1D;QAEA,IAAI,aAAa,GAAG,OAAO,CAAC,OAAO,IAAI,aAAa;QACpD,OAAO,OAAO,CAAC,OAAO;QAEtB,OAAQ,QAAQ;YACd,KAAK,4LAAW,CAAC,KAAK;gBACpB,aAAa,GAAG,CAAA,EAAG,aAAa,CAAA,MAAA,CAAQ;gBACxC;YACF,KAAK,4LAAW,CAAC,IAAI;gBACnB,aAAa,GAAG,CAAA,EAAG,aAAa,CAAA,KAAA,CAAO;gBACvC;YACF,KAAK,4LAAW,CAAC,OAAO;gBACtB,aAAa,GAAG,CAAA,EAAG,aAAa,CAAA,QAAA,CAAU;gBAC1C;YACF,KAAK,4LAAW,CAAC,KAAK;gBACpB,aAAa,GAAG,CAAA,EAAG,aAAa,CAAA,MAAA,CAAQ;gBACxC;;QAGJ,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;QAE1B,MAAM,YAAY,GAAa,EAAE;QACjC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,KAAI;YAC/C,YAAY,CAAC,IAAI,CAAC,CAAA,EAAG,GAAG,CAAA,EAAA,EAAK,KAAK,CAAA,CAAE,CAAC;QACvC,CAAC,CAAC;QAEF,IAAI,MAAM,GAAG,EAAE;QACf,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;YAC3B,MAAM,GAAG,CAAA,IAAA,EAAO,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA,CAAA,CAAG;QAC5C;QAEA,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAA,CAAA,EAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA,EAAA,EAAK,OAAO,GAAG,MAAM,CAAA,CAAE,CAAC;IAC5E,CAAC;AACH"}},
    {"offset": {"line": 373, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/logger/index.ts"],"sourcesContent":["import {compare} from 'compare-versions';\n\nimport {LogSeverity} from '../types';\nimport {ConfigInterface} from '../base-types';\nimport {FeatureDeprecatedError} from '../error';\nimport {SHOPIFY_API_LIBRARY_VERSION} from '../version';\n\nimport {log, LoggerFunction} from './log';\nimport {LogContext} from './types';\n\nexport function logger(config: ConfigInterface) {\n  const logFunction = log(config);\n\n  return {\n    log: logFunction,\n    debug: async (message: string, context: LogContext = {}) =>\n      logFunction(LogSeverity.Debug, message, context),\n    info: async (message: string, context: LogContext = {}) =>\n      logFunction(LogSeverity.Info, message, context),\n    warning: async (message: string, context: LogContext = {}) =>\n      logFunction(LogSeverity.Warning, message, context),\n    error: async (message: string, context: LogContext = {}) =>\n      logFunction(LogSeverity.Error, message, context),\n    deprecated: deprecated(logFunction),\n  };\n}\n\nexport type ShopifyLogger = ReturnType<typeof logger>;\n\nfunction deprecated(logFunction: LoggerFunction) {\n  return function (version: string, message: string): void {\n    if (compare(SHOPIFY_API_LIBRARY_VERSION, version, '>=')) {\n      throw new FeatureDeprecatedError(\n        `Feature was deprecated in version ${version}`,\n      );\n    }\n\n    return logFunction(\n      LogSeverity.Warning,\n      `[Deprecated | ${version}] ${message}`,\n    );\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAUM,SAAU,MAAM,CAAC,MAAuB,EAAA;IAC5C,MAAM,WAAW,OAAG,4LAAG,EAAC,MAAM,CAAC;IAE/B,OAAO;QACL,GAAG,EAAE,WAAW;QAChB,KAAK,EAAE,OAAO,OAAe,EAAE,OAAA,GAAsB,CAAA,CAAE,GACrD,WAAW,CAAC,4LAAW,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,CAAC;QAClD,IAAI,EAAE,OAAO,OAAe,EAAE,OAAA,GAAsB,CAAA,CAAE,GACpD,WAAW,CAAC,4LAAW,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,CAAC;QACjD,OAAO,EAAE,OAAO,OAAe,EAAE,OAAA,GAAsB,CAAA,CAAE,GACvD,WAAW,CAAC,4LAAW,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACpD,KAAK,EAAE,OAAO,OAAe,EAAE,OAAA,GAAsB,CAAA,CAAE,GACrD,WAAW,CAAC,4LAAW,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,CAAC;QAClD,UAAU,EAAE,UAAU,CAAC,WAAW,CAAC;KACpC;AACH;AAIA,SAAS,UAAU,CAAC,WAA2B,EAAA;IAC7C,OAAO,SAAU,OAAe,EAAE,OAAe,EAAA;QAC/C,QAAI,yKAAO,EAAC,8MAA2B,EAAE,OAAO,EAAE,IAAI,CAAC,EAAE;YACvD,MAAM,IAAI,uMAAsB,CAC9B,CAAA,kCAAA,EAAqC,OAAO,CAAA,CAAE,CAC/C;QACH;QAEA,OAAO,WAAW,CAChB,4LAAW,CAAC,OAAO,EACnB,CAAA,cAAA,EAAiB,OAAO,CAAA,EAAA,EAAK,OAAO,CAAA,CAAE,CACvC;IACH,CAAC;AACH"}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/rest/load-rest-resources.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/rest/load-rest-resources.ts"],"sourcesContent":["import type {ShopifyClients} from '../lib';\nimport {ConfigInterface} from '../lib/base-types';\nimport {logger} from '../lib/logger';\n\nimport {Base} from './base';\nimport {ShopifyRestResources} from './types';\n\nexport interface LoadRestResourcesParams<\n  Resources extends ShopifyRestResources,\n> {\n  resources: Resources;\n  config: ConfigInterface;\n  RestClient: ShopifyClients['Rest'];\n}\n\nexport function loadRestResources<Resources extends ShopifyRestResources>({\n  resources,\n  config,\n  RestClient,\n}: LoadRestResourcesParams<Resources>): Resources {\n  const firstResource = Object.keys(resources)[0];\n  if (config.apiVersion !== resources[firstResource].apiVersion) {\n    logger(config).warning(\n      `Loading REST resources for API version ${resources[firstResource].apiVersion}, which doesn't match the default ${config.apiVersion}`,\n    );\n  }\n\n  return Object.fromEntries(\n    Object.entries(resources).map(([name, resource]) => {\n      class NewResource extends resource {}\n\n      NewResource.setClassProperties({\n        Client: RestClient,\n        config,\n      });\n\n      Object.entries(NewResource.hasOne).map(([_attribute, klass]) => {\n        (klass as typeof Base).setClassProperties({\n          Client: RestClient,\n          config,\n        });\n      });\n\n      Object.entries(NewResource.hasMany).map(([_attribute, klass]) => {\n        (klass as typeof Base).setClassProperties({\n          Client: RestClient,\n          config,\n        });\n      });\n\n      Reflect.defineProperty(NewResource, 'name', {\n        value: name,\n      });\n\n      return [name, NewResource];\n    }),\n  ) as Resources;\n}\n"],"names":[],"mappings":";;;;;;AAeM,SAAU,iBAAiB,CAAyC,EACxE,SAAS,EACT,MAAM,EACN,UAAU,EACyB,EAAA;IACnC,MAAM,aAAa,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IAC/C,IAAI,MAAM,CAAC,UAAU,KAAK,SAAS,CAAC,aAAa,CAAC,CAAC,UAAU,EAAE;YAC7D,iMAAM,EAAC,MAAM,CAAC,CAAC,OAAO,CACpB,CAAA,uCAAA,EAA0C,SAAS,CAAC,aAAa,CAAC,CAAC,UAAU,CAAA,kCAAA,EAAqC,MAAM,CAAC,UAAU,CAAA,CAAE,CACtI;IACH;IAEA,OAAO,MAAM,CAAC,WAAW,CACvB,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,QAAQ,CAAC,KAAI;QACjD,MAAM,WAAY,SAAQ,QAAQ,CAAA;QAAG;QAErC,WAAW,CAAC,kBAAkB,CAAC;YAC7B,MAAM,EAAE,UAAU;YAClB,MAAM;QACP,CAAA,CAAC;QAEF,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,UAAU,EAAE,KAAK,CAAC,KAAI;YAC5D,KAAqB,CAAC,kBAAkB,CAAC;gBACxC,MAAM,EAAE,UAAU;gBAClB,MAAM;YACP,CAAA,CAAC;QACJ,CAAC,CAAC;QAEF,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,UAAU,EAAE,KAAK,CAAC,KAAI;YAC7D,KAAqB,CAAC,kBAAkB,CAAC;gBACxC,MAAM,EAAE,UAAU;gBAClB,MAAM;YACP,CAAA,CAAC;QACJ,CAAC,CAAC;QAEF,OAAO,CAAC,cAAc,CAAC,WAAW,EAAE,MAAM,EAAE;YAC1C,KAAK,EAAE,IAAI;QACZ,CAAA,CAAC;QAEF,OAAO;YAAC,IAAI;YAAE,WAAW;SAAC;IAC5B,CAAC,CAAC,CACU;AAChB"}},
    {"offset": {"line": 457, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/platform/runtime-string.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/runtime/platform/runtime-string.ts"],"sourcesContent":["import {AbstractRuntimeStringFunc} from './types';\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let abstractRuntimeString: AbstractRuntimeStringFunc = () => {\n  throw new Error(\n    \"Missing adapter implementation for 'abstractRuntimeString' - make sure to import the appropriate adapter for your platform\",\n  );\n};\nexport function setAbstractRuntimeString(func: AbstractRuntimeStringFunc) {\n  abstractRuntimeString = func;\n}\n"],"names":[],"mappings":";;;;;;AAEA,qDAAA;AACO,IAAI,qBAAqB,GAA8B,MAAK;IACjE,MAAM,IAAI,KAAK,CACb,4HAA4H,CAC7H;AACH;AACM,SAAU,wBAAwB,CAAC,IAA+B,EAAA;IACtE,qBAAqB,GAAG,IAAI;AAC9B"}},
    {"offset": {"line": 476, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/future/flags.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/future/flags.ts"],"sourcesContent":["import {type ShopifyLogger} from '../lib/logger';\nimport {type ConfigInterface} from '../lib/base-types';\n\n/**\n * Future flags are used to enable features that are not yet available by default.\n */\nexport interface FutureFlags {\n  /**\n   * Enable support for managed pricing, so apps can check for payments without needing a billing config.\n   */\n  unstable_managedPricingSupport?: boolean;\n\n  /**\n   * Change the CustomerAddress classes to expose a `is_default` property instead of `default` when fetching data. This\n   * resolves a conflict with the default() method in that class.\n   */\n  customerAddressDefaultFix?: boolean;\n}\n\n/**\n * Configuration option for future flags.\n */\nexport type FutureFlagOptions = FutureFlags | undefined;\n\nexport type FeatureEnabled<\n  Future extends FutureFlagOptions,\n  Flag extends keyof FutureFlags,\n> = Future extends FutureFlags\n  ? Future[Flag] extends true\n    ? true\n    : false\n  : false;\n\nexport function logDisabledFutureFlags(\n  config: ConfigInterface,\n  logger: ShopifyLogger,\n) {\n  if (!config._logDisabledFutureFlags) {\n    return;\n  }\n\n  const logFlag = (flag: string, message: string) =>\n    logger.info(`Future flag ${flag} is disabled.\\n\\n  ${message}\\n`);\n\n  if (!config.future?.customerAddressDefaultFix) {\n    logFlag(\n      'customerAddressDefaultFix',\n      \"Enable this flag to change the CustomerAddress classes to expose a 'is_default' property instead of 'default' when fetching data.\",\n    );\n  }\n\n  if (!config.future?.unstable_managedPricingSupport) {\n    logFlag(\n      'unstable_managedPricingSupport',\n      'Enable this flag to support managed pricing, so apps can check for payments without needing a billing config. Learn more at https://shopify.dev/docs/apps/launch/billing/managed-pricing',\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAiCM,SAAU,sBAAsB,CACpC,MAAuB,EACvB,MAAqB,EAAA;IAErB,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE;QACnC;IACF;IAEA,MAAM,OAAO,GAAG,CAAC,IAAY,EAAE,OAAe,GAC5C,MAAM,CAAC,IAAI,CAAC,CAAA,YAAA,EAAe,IAAI,CAAA,mBAAA,EAAsB,OAAO,CAAA,EAAA,CAAI,CAAC;IAEnE,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,yBAAyB,EAAE;QAC7C,OAAO,CACL,2BAA2B,EAC3B,mIAAmI,CACpI;IACH;IAEA,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,8BAA8B,EAAE;QAClD,OAAO,CACL,gCAAgC,EAChC,0LAA0L,CAC3L;IACH;AACF"}},
    {"offset": {"line": 498, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/scopes/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/scopes/index.ts"],"sourcesContent":["/**\n * A class that represents a set of access token scopes.\n */\nclass AuthScopes {\n  public static SCOPE_DELIMITER = ',';\n\n  private compressedScopes: Set<string>;\n  private expandedScopes: Set<string>;\n  private originalScopes: Set<string>;\n\n  constructor(scopes: string | string[] | AuthScopes | undefined) {\n    let scopesArray: string[] = [];\n    if (typeof scopes === 'string') {\n      scopesArray = scopes.split(\n        new RegExp(`${AuthScopes.SCOPE_DELIMITER}\\\\s*`),\n      );\n    } else if (Array.isArray(scopes)) {\n      scopesArray = scopes;\n    } else if (scopes) {\n      scopesArray = Array.from(scopes.expandedScopes);\n    }\n\n    scopesArray = scopesArray\n      .map((scope) => scope.trim())\n      .filter((scope) => scope.length);\n\n    const impliedScopes = this.getImpliedScopes(scopesArray);\n\n    const scopeSet = new Set(scopesArray);\n    const impliedSet = new Set(impliedScopes);\n\n    this.compressedScopes = new Set(\n      [...scopeSet].filter((x) => !impliedSet.has(x)),\n    );\n    this.expandedScopes = new Set([...scopeSet, ...impliedSet]);\n    this.originalScopes = scopeSet;\n  }\n\n  /**\n   * Checks whether the current set of scopes includes the given one.\n   */\n  public has(scope: string | string[] | AuthScopes | undefined) {\n    let other: AuthScopes;\n\n    if (scope instanceof AuthScopes) {\n      other = scope;\n    } else {\n      other = new AuthScopes(scope);\n    }\n\n    return (\n      other.toArray().filter((x) => !this.expandedScopes.has(x)).length === 0\n    );\n  }\n\n  /**\n   * Checks whether the current set of scopes equals the given one.\n   */\n  public equals(otherScopes: string | string[] | AuthScopes | undefined) {\n    let other: AuthScopes;\n\n    if (otherScopes instanceof AuthScopes) {\n      other = otherScopes;\n    } else {\n      other = new AuthScopes(otherScopes);\n    }\n\n    return (\n      this.compressedScopes.size === other.compressedScopes.size &&\n      this.toArray().filter((x) => !other.has(x)).length === 0\n    );\n  }\n\n  /**\n   * Returns a comma-separated string with the current set of scopes.\n   */\n  public toString() {\n    return this.toArray().join(AuthScopes.SCOPE_DELIMITER);\n  }\n\n  /**\n   * Returns an array with the current set of scopes.\n   */\n  public toArray(returnOriginalScopes = false) {\n    return returnOriginalScopes\n      ? [...this.originalScopes]\n      : [...this.compressedScopes];\n  }\n\n  private getImpliedScopes(scopesArray: string[]): string[] {\n    return scopesArray.reduce((array: string[], current: string) => {\n      const matches = current.match(/^(unauthenticated_)?write_(.*)$/);\n      if (matches) {\n        array.push(`${matches[1] ? matches[1] : ''}read_${matches[2]}`);\n      }\n\n      return array;\n    }, []);\n  }\n}\n\nexport {AuthScopes};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 583, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/config.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/config.ts"],"sourcesContent":["import {ShopifyError} from './error';\nimport {ConfigInterface, ConfigParams} from './base-types';\nimport {LogSeverity} from './types';\nimport {AuthScopes} from './auth/scopes';\nimport {logger as createLogger} from './logger';\n\nexport function validateConfig<Params extends ConfigParams>(\n  params: Params,\n): ConfigInterface<Params> {\n  const config = {\n    apiKey: '',\n    apiSecretKey: '',\n    hostName: '',\n    hostScheme: 'https',\n    isEmbeddedApp: true,\n    isCustomStoreApp: false,\n    logger: {\n      log: defaultLogFunction,\n      level: LogSeverity.Info,\n      httpRequests: false,\n      timestamps: false,\n    },\n    future: {},\n    _logDisabledFutureFlags: true,\n  } as ConfigInterface<Params>;\n\n  // Make sure that the essential params actually have content in them\n  const mandatory: (keyof Params)[] = [\n    'apiSecretKey',\n    'hostName',\n    'apiVersion',\n  ];\n  if (!('isCustomStoreApp' in params) || !params.isCustomStoreApp) {\n    mandatory.push('apiKey');\n  }\n  if ('isCustomStoreApp' in params && params.isCustomStoreApp) {\n    if (\n      !('adminApiAccessToken' in params) ||\n      params.adminApiAccessToken?.length === 0\n    ) {\n      mandatory.push('adminApiAccessToken');\n    }\n  }\n\n  const missing: (keyof Params)[] = [];\n  mandatory.forEach((key) => {\n    if (!notEmpty(params[key])) {\n      missing.push(key);\n    }\n  });\n\n  if (missing.length) {\n    throw new ShopifyError(\n      `Cannot initialize Shopify API Library. Missing values for: ${missing.join(\n        ', ',\n      )}. For apiVersion, please specify an explicit API version (e.g., ApiVersion.July25). See https://shopify.dev/docs/api/usage/versioning for more information.`,\n    );\n  }\n\n  const {\n    hostScheme,\n    isCustomStoreApp,\n    adminApiAccessToken,\n    userAgentPrefix,\n    logger,\n    privateAppStorefrontAccessToken,\n    customShopDomains,\n    billing,\n    future,\n    ...mandatoryParams\n  } = params;\n\n  let scopes;\n  if (params.scopes === undefined) {\n    scopes = undefined;\n  } else if (params.scopes instanceof AuthScopes) {\n    scopes = params.scopes;\n  } else {\n    scopes = new AuthScopes(params.scopes);\n  }\n\n  Object.assign(config, mandatoryParams, {\n    hostName: params.hostName.replace(/\\/$/, ''),\n    scopes,\n    hostScheme: hostScheme ?? config.hostScheme,\n    isCustomStoreApp: isCustomStoreApp ?? config.isCustomStoreApp,\n    adminApiAccessToken: adminApiAccessToken ?? config.adminApiAccessToken,\n    userAgentPrefix: userAgentPrefix ?? config.userAgentPrefix,\n    logger: {...config.logger, ...(logger || {})},\n    privateAppStorefrontAccessToken:\n      privateAppStorefrontAccessToken ?? config.privateAppStorefrontAccessToken,\n    customShopDomains: customShopDomains ?? config.customShopDomains,\n    billing: billing ?? config.billing,\n    future: future ?? config.future,\n  });\n\n  if (\n    config.isCustomStoreApp &&\n    params.adminApiAccessToken === params.apiSecretKey\n  ) {\n    createLogger(config).warning(\n      \"adminApiAccessToken is set to the same value as apiSecretKey. adminApiAccessToken should be set to the Admin API access token for custom store apps; apiSecretKey should be set to the custom store app's API secret key.\",\n    );\n  }\n\n  return config;\n}\n\nfunction notEmpty<T>(value: T): value is NonNullable<T> {\n  if (value == null) {\n    return false;\n  }\n  return typeof value === 'string' || Array.isArray(value)\n    ? value.length > 0\n    : true;\n}\n\nfunction defaultLogFunction(severity: LogSeverity, message: string): void {\n  switch (severity) {\n    case LogSeverity.Debug:\n      console.debug(message);\n      break;\n    case LogSeverity.Info:\n      console.log(message);\n      break;\n    case LogSeverity.Warning:\n      console.warn(message);\n      break;\n    case LogSeverity.Error:\n      console.error(message);\n      break;\n  }\n}\n"],"names":["logger","createLogger"],"mappings":"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"}},
    {"offset": {"line": 693, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/headers.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/runtime/http/headers.ts"],"sourcesContent":["import type {Headers} from './types';\n\n/**\n * Canonicalizes a header name by capitalizing each segment and ensuring consistent hyphenation.\n *\n * @param hdr - The header name to canonicalize.\n * @returns The canonicalized header name.\n */\nexport function canonicalizeHeaderName(hdr: string): string {\n  return hdr.replace(\n    /(^|-)(\\w+)/g,\n    (_fullMatch, start, letters) =>\n      start +\n      letters.slice(0, 1).toUpperCase() +\n      letters.slice(1).toLowerCase(),\n  );\n}\n\n/**\n * Retrieves all values associated with a canonicalized header name from the headers object.\n *\n * @param headers - The headers object or undefined.\n * @param needle_ - The header name to search for.\n * @returns An array of header values associated with the canonicalized header name.\n */\nexport function getHeaders(\n  headers: Headers | undefined,\n  needle_: string,\n): string[] {\n  const result: string[] = [];\n  if (!headers) return result;\n  const needle = canonicalizeHeaderName(needle_);\n  for (const [key, values] of Object.entries(headers)) {\n    if (canonicalizeHeaderName(key) !== needle) continue;\n    if (Array.isArray(values)) {\n      result.push(...values);\n    } else {\n      result.push(values);\n    }\n  }\n  return result;\n}\n\n/**\n * Retrieves the first value associated with a canonicalized header name from the headers object.\n *\n * @param headers - The headers object or undefined.\n * @param needle - The header name to search for.\n * @returns The first value associated with the canonicalized header name, or undefined if not found.\n */\nexport function getHeader(\n  headers: Headers | undefined,\n  needle: string,\n): string | undefined {\n  if (!headers) return undefined;\n  return getHeaders(headers, needle)?.[0];\n}\n/**\n * Sets a header to a single value, canonicalizing the header name.\n *\n * @param headers - The headers object.\n * @param key - The header name to set.\n * @param value - The value to assign to the header.\n */\nexport function setHeader(headers: Headers, key: string, value: string) {\n  canonicalizeHeaders(headers);\n  headers[canonicalizeHeaderName(key)] = [value];\n}\n/**\n * Adds a value to an existing header, creating a new array if necessary, and canonicalizing the header name.\n *\n * @param headers - The headers object.\n * @param key - The header name to add to.\n * @param value - The value to add.\n */\nexport function addHeader(headers: Headers, key: string, value: string) {\n  canonicalizeHeaders(headers);\n  const canonKey = canonicalizeHeaderName(key);\n  let list = headers[canonKey];\n  if (!list) {\n    list = [];\n  } else if (!Array.isArray(list)) {\n    list = [list];\n  }\n  headers[canonKey] = list;\n  list.push(value);\n}\n\n/**\n * Canonicalizes a header value, converting numbers to strings.\n *\n * @param value - The value to canonicalize.\n * @returns The canonicalized value as a string.\n */\nfunction canonicalizeValue(value: any): any {\n  if (typeof value === 'number') return value.toString();\n  return value;\n}\n\n/**\n * Canonicalizes all headers in the headers object by ensuring consistent header names and values.\n *\n * @param hdr - The headers object to canonicalize.\n * @returns The headers object with canonicalized header names and values.\n */\nexport function canonicalizeHeaders(hdr: Headers): Headers {\n  for (const [key, values] of Object.entries(hdr)) {\n    const canonKey = canonicalizeHeaderName(key);\n    if (!hdr[canonKey]) hdr[canonKey] = [];\n    if (!Array.isArray(hdr[canonKey]))\n      hdr[canonKey] = [canonicalizeValue(hdr[canonKey])];\n    if (key === canonKey) continue;\n    delete hdr[key];\n    (hdr[canonKey] as any).push(\n      ...[values].flat().map((value) => canonicalizeValue(value)),\n    );\n  }\n  return hdr;\n}\n\n/**\n * Removes a header from the headers object.\n *\n * @param headers - The headers object.\n * @param needle - The header name to remove.\n */\nexport function removeHeader(headers: Headers, needle: string) {\n  canonicalizeHeaders(headers);\n  const canonKey = canonicalizeHeaderName(needle);\n  delete headers[canonKey];\n}\n\n/**\n * Converts a headers object into an array of tuples, where each tuple represents a header name and value.\n *\n * @param {Object|string[][]} headers - The headers object or undefined/null.\n * @returns {string[][]} An array of tuples where each tuple contains a header name and its corresponding value.\n *\n * @example\n * // Example headers object\n * const headers = {\n *   'Set-Cookie': 'a=b',\n *   'Set-Cookie': 'x=y'\n * };\n *\n * // Converted to an array of tuples\n * const result = convertHeadersToTuples(headers);\n * console.log(result);\n * // Output: [\n * //   [\"Set-Cookie\", \"a=b\"],\n * //   [\"Set-Cookie\", \"x=y\"]\n * // ]\n */\nexport function flatHeaders(\n  headers: Headers | undefined | null,\n): [string, string][] {\n  if (!headers) return [];\n\n  return Object.entries(headers).flatMap(([header, values]) =>\n    Array.isArray(values)\n      ? values.map((value): [string, string] => [header, value])\n      : [[header, values]],\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 858, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/common.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/clients/common.ts"],"sourcesContent":["import {\n  HTTPResponseLog,\n  HTTPRetryLog,\n  HTTPResponseGraphQLDeprecationNotice,\n  LogContent,\n} from '@shopify/admin-api-client';\n\nimport * as ShopifyErrors from '../error';\nimport {LIBRARY_NAME, StatusCode} from '../types';\nimport {ConfigInterface} from '../base-types';\nimport {SHOPIFY_API_LIBRARY_VERSION} from '../version';\nimport {\n  abstractRuntimeString,\n  canonicalizeHeaders,\n  getHeader,\n} from '../../runtime';\nimport {logger} from '../logger';\n\nexport function getUserAgent(config: ConfigInterface): string {\n  let userAgentPrefix = `${LIBRARY_NAME} v${SHOPIFY_API_LIBRARY_VERSION} | ${abstractRuntimeString()}`;\n  if (config.userAgentPrefix) {\n    userAgentPrefix = `${config.userAgentPrefix} | ${userAgentPrefix}`;\n  }\n\n  return userAgentPrefix;\n}\n\nfunction serializeResponse(response: Response | any) {\n  if (!response) {\n    return {error: 'No response object provided'};\n  }\n\n  try {\n    const {status, statusText, ok, redirected, type, url, headers} = response;\n\n    const serialized: any = {\n      status,\n      statusText,\n      ok,\n      redirected,\n      type,\n      url,\n    };\n\n    if (headers?.entries) {\n      serialized.headers = Object.fromEntries(headers.entries());\n    } else if (headers) {\n      serialized.headers = headers;\n    }\n\n    return serialized;\n  } catch {\n    return response;\n  }\n}\n\nexport function clientLoggerFactory(config: ConfigInterface) {\n  return (logContent: LogContent) => {\n    if (config.logger.httpRequests) {\n      switch (logContent.type) {\n        case 'HTTP-Response': {\n          const responseLog: HTTPResponseLog['content'] = logContent.content;\n          logger(config).debug('Received response for HTTP request', {\n            requestParams: JSON.stringify(responseLog.requestParams),\n            response: JSON.stringify(serializeResponse(responseLog.response)),\n          });\n          break;\n        }\n        case 'HTTP-Retry': {\n          const responseLog: HTTPRetryLog['content'] = logContent.content;\n          logger(config).debug('Retrying HTTP request', {\n            requestParams: JSON.stringify(responseLog.requestParams),\n            retryAttempt: responseLog.retryAttempt,\n            maxRetries: responseLog.maxRetries,\n            response: responseLog.lastResponse\n              ? JSON.stringify(serializeResponse(responseLog.lastResponse))\n              : 'undefined',\n          });\n          break;\n        }\n        case 'HTTP-Response-GraphQL-Deprecation-Notice': {\n          const responseLog: HTTPResponseGraphQLDeprecationNotice['content'] =\n            logContent.content;\n          logger(config).debug(\n            'Received response containing Deprecated GraphQL Notice',\n            {\n              requestParams: JSON.stringify(responseLog.requestParams),\n              deprecationNotice: responseLog.deprecationNotice,\n            },\n          );\n          break;\n        }\n        default: {\n          logger(config).debug(`HTTP request event: ${logContent.content}`);\n          break;\n        }\n      }\n    }\n  };\n}\n\nexport function throwFailedRequest(\n  body: any,\n  atMaxRetries: boolean,\n  response?: Response,\n): never {\n  if (typeof response === 'undefined') {\n    const message = body?.errors?.message ?? '';\n    throw new ShopifyErrors.HttpRequestError(\n      `Http request error, no response available: ${message}`,\n    );\n  }\n\n  const responseHeaders = canonicalizeHeaders(\n    Object.fromEntries(response.headers.entries() ?? []),\n  );\n\n  if (response.status === StatusCode.Ok && body.errors.graphQLErrors) {\n    throw new ShopifyErrors.GraphqlQueryError({\n      message:\n        body.errors.graphQLErrors?.[0].message ?? 'GraphQL operation failed',\n      response: response as Record<string, any>,\n      headers: responseHeaders,\n      body: body as Record<string, any>,\n    });\n  }\n\n  const errorMessages: string[] = [];\n  if (body.errors) {\n    errorMessages.push(JSON.stringify(body.errors, null, 2));\n  }\n  const xRequestId = getHeader(responseHeaders, 'x-request-id');\n  if (xRequestId) {\n    errorMessages.push(\n      `If you report this error, please include this id: ${xRequestId}`,\n    );\n  }\n\n  const errorMessage = errorMessages.length\n    ? `:\\n${errorMessages.join('\\n')}`\n    : '';\n  const code = response.status;\n  const statusText = response.statusText;\n\n  switch (true) {\n    case response.status === StatusCode.TooManyRequests: {\n      if (atMaxRetries) {\n        throw new ShopifyErrors.HttpMaxRetriesError(\n          'Attempted the maximum number of retries for HTTP request.',\n        );\n      } else {\n        const retryAfter = getHeader(responseHeaders, 'Retry-After');\n        throw new ShopifyErrors.HttpThrottlingError({\n          message: `Shopify is throttling requests ${errorMessage}`,\n          code,\n          statusText,\n          body,\n          headers: responseHeaders,\n          retryAfter: retryAfter ? parseFloat(retryAfter) : undefined,\n        });\n      }\n    }\n    case response.status >= StatusCode.InternalServerError:\n      if (atMaxRetries) {\n        throw new ShopifyErrors.HttpMaxRetriesError(\n          'Attempted the maximum number of retries for HTTP request.',\n        );\n      } else {\n        throw new ShopifyErrors.HttpInternalError({\n          message: `Shopify internal error${errorMessage}`,\n          code,\n          statusText,\n          body,\n          headers: responseHeaders,\n        });\n      }\n    default:\n      throw new ShopifyErrors.HttpResponseError({\n        message: `Received an error response (${response.status} ${response.statusText}) from Shopify${errorMessage}`,\n        code,\n        statusText,\n        body,\n        headers: responseHeaders,\n      });\n  }\n}\n"],"names":["ShopifyErrors.HttpRequestError","ShopifyErrors.GraphqlQueryError","ShopifyErrors.HttpMaxRetriesError","ShopifyErrors.HttpThrottlingError","ShopifyErrors.HttpInternalError","ShopifyErrors.HttpResponseError"],"mappings":"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"}},
    {"offset": {"line": 1023, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/runtime/http/index.ts"],"sourcesContent":["import type {\n  AbstractFetchFunc,\n  AbstractConvertRequestFunc,\n  AbstractConvertIncomingResponseFunc,\n  AbstractConvertResponseFunc,\n  NormalizedResponse,\n  AbstractConvertHeadersFunc,\n} from './types';\n\nexport * from './cookies';\nexport * from './headers';\nexport * from './utils';\n\nexport * from './types';\n\nexport function isOK(resp: NormalizedResponse) {\n  // https://fetch.spec.whatwg.org/#ok-status\n  return resp.statusCode >= 200 && resp.statusCode <= 299;\n}\n\n// We ignore mutable export linting errors because we explicitly want these abstract functions to be overwritten.\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let abstractFetch: AbstractFetchFunc = () => {\n  throw new Error(\n    \"Missing adapter implementation for 'abstractFetch' - make sure to import the appropriate adapter for your platform\",\n  );\n};\nexport function setAbstractFetchFunc(func: AbstractFetchFunc) {\n  abstractFetch = func;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let abstractConvertRequest: AbstractConvertRequestFunc = () => {\n  throw new Error(\n    \"Missing adapter implementation for 'abstractConvertRequest' - make sure to import the appropriate adapter for your platform\",\n  );\n};\nexport function setAbstractConvertRequestFunc(\n  func: AbstractConvertRequestFunc,\n) {\n  abstractConvertRequest = func;\n}\n\n// By default we just return an empty NormalizedResponse because not all adapters will need to convert an incoming response\n// eslint-disable-next-line import/no-mutable-exports\nexport let abstractConvertIncomingResponse: AbstractConvertIncomingResponseFunc =\n  () => Promise.resolve({} as NormalizedResponse);\nexport function setAbstractConvertIncomingResponseFunc(\n  func: AbstractConvertIncomingResponseFunc,\n) {\n  abstractConvertIncomingResponse = func;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let abstractConvertResponse: AbstractConvertResponseFunc = () => {\n  throw new Error(\n    \"Missing adapter implementation for 'abstractConvertResponse' - make sure to import the appropriate adapter for your platform\",\n  );\n};\nexport function setAbstractConvertResponseFunc(\n  func: AbstractConvertResponseFunc,\n) {\n  abstractConvertResponse = func;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let abstractConvertHeaders: AbstractConvertHeadersFunc = () => {\n  throw new Error(\n    \"Missing adapter implementation for 'abstractConvertHeaders' - make sure to import the appropriate adapter for your platform\",\n  );\n};\nexport function setAbstractConvertHeadersFunc(\n  func: AbstractConvertHeadersFunc,\n) {\n  abstractConvertHeaders = func;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAeM,SAAU,IAAI,CAAC,IAAwB,EAAA;;IAE3C,OAAO,IAAI,CAAC,UAAU,IAAI,GAAG,IAAI,IAAI,CAAC,UAAU,IAAI,GAAG;AACzD;AAEA,iHAAA;AAEA,qDAAA;AACO,IAAI,aAAa,GAAsB,MAAK;IACjD,MAAM,IAAI,KAAK,CACb,oHAAoH,CACrH;AACH;AACM,SAAU,oBAAoB,CAAC,IAAuB,EAAA;IAC1D,aAAa,GAAG,IAAI;AACtB;AAEA,qDAAA;AACO,IAAI,sBAAsB,GAA+B,MAAK;IACnE,MAAM,IAAI,KAAK,CACb,6HAA6H,CAC9H;AACH;AACM,SAAU,6BAA6B,CAC3C,IAAgC,EAAA;IAEhC,sBAAsB,GAAG,IAAI;AAC/B;AAEA,2HAAA;AACA,qDAAA;AACO,IAAI,+BAA+B,GACxC,IAAM,OAAO,CAAC,OAAO,CAAC,CAAA,CAAwB;AAC1C,SAAU,sCAAsC,CACpD,IAAyC,EAAA;IAEzC,+BAA+B,GAAG,IAAI;AACxC;AAEA,qDAAA;AACO,IAAI,uBAAuB,GAAgC,MAAK;IACrE,MAAM,IAAI,KAAK,CACb,8HAA8H,CAC/H;AACH;AACM,SAAU,8BAA8B,CAC5C,IAAiC,EAAA;IAEjC,uBAAuB,GAAG,IAAI;AAChC;AAEA,qDAAA;AACO,IAAI,sBAAsB,GAA+B,MAAK;IACnE,MAAM,IAAI,KAAK,CACb,6HAA6H,CAC9H;AACH;AACM,SAAU,6BAA6B,CAC3C,IAAgC,EAAA;IAEhC,sBAAsB,GAAG,IAAI;AAC/B"}},
    {"offset": {"line": 1093, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/clients/admin/graphql/client.ts"],"sourcesContent":["import {\n  AdminApiClient,\n  AdminOperations,\n  ApiClientRequestOptions,\n  createAdminApiClient,\n  ReturnData,\n} from '@shopify/admin-api-client';\n\nimport {ApiVersion} from '../../../types';\nimport {ConfigInterface} from '../../../base-types';\nimport type {\n  RequestReturn,\n  GraphqlParams,\n  GraphqlClientParams,\n  GraphqlQueryOptions,\n  GraphQLClientResponse,\n} from '../../types';\nimport {Session} from '../../../session/session';\nimport {logger} from '../../../logger';\nimport * as ShopifyErrors from '../../../error';\nimport {abstractFetch, canonicalizeHeaders} from '../../../../runtime';\nimport {\n  clientLoggerFactory,\n  getUserAgent,\n  throwFailedRequest,\n} from '../../common';\n\ninterface GraphqlClientClassParams {\n  config: ConfigInterface;\n}\nexport class GraphqlClient {\n  public static config: ConfigInterface;\n\n  readonly session: Session;\n  readonly client: AdminApiClient;\n  readonly apiVersion?: ApiVersion;\n\n  constructor(params: GraphqlClientParams) {\n    const config = this.graphqlClass().config;\n\n    if (!config.isCustomStoreApp && !params.session.accessToken) {\n      throw new ShopifyErrors.MissingRequiredArgument(\n        'Missing access token when creating GraphQL client',\n      );\n    }\n\n    if (params.apiVersion) {\n      const message =\n        params.apiVersion === config.apiVersion\n          ? `Admin client has a redundant API version override to the default ${params.apiVersion}`\n          : `Admin client overriding default API version ${config.apiVersion} with ${params.apiVersion}`;\n\n      logger(config).debug(message);\n    }\n\n    this.session = params.session;\n    this.apiVersion = params.apiVersion;\n    this.client = createAdminApiClient({\n      accessToken: config.adminApiAccessToken ?? this.session.accessToken!,\n      apiVersion: this.apiVersion ?? config.apiVersion,\n      storeDomain: this.session.shop,\n      customFetchApi: abstractFetch,\n      logger: clientLoggerFactory(config),\n      userAgentPrefix: getUserAgent(config),\n      isTesting: config.isTesting,\n    });\n  }\n\n  public async query<T = undefined>(\n    params: GraphqlParams,\n  ): Promise<RequestReturn<T>> {\n    logger(this.graphqlClass().config).deprecated(\n      '12.0.0',\n      'The query method is deprecated, and was replaced with the request method.\\n' +\n        'See the migration guide: https://github.com/Shopify/shopify-app-js/blob/main/packages/apps/shopify-api/docs/migrating-to-v9.md#using-the-new-clients.',\n    );\n\n    if (\n      (typeof params.data === 'string' && params.data.length === 0) ||\n      Object.entries(params.data).length === 0\n    ) {\n      throw new ShopifyErrors.MissingRequiredArgument('Query missing.');\n    }\n\n    let operation: string;\n    let variables: Record<string, any> | undefined;\n    if (typeof params.data === 'string') {\n      operation = params.data;\n    } else {\n      operation = params.data.query;\n      variables = params.data.variables;\n    }\n\n    const headers = Object.fromEntries(\n      Object.entries(params?.extraHeaders ?? {}).map(([key, value]) => [\n        key,\n        Array.isArray(value) ? value.join(', ') : value.toString(),\n      ]),\n    );\n\n    const response = await this.request<T>(operation, {\n      headers,\n      retries: params.tries ? params.tries - 1 : undefined,\n      variables,\n    });\n\n    return {body: response as T, headers: {}};\n  }\n\n  public async request<\n    T = undefined,\n    Operation extends keyof Operations = string,\n    Operations extends AdminOperations = AdminOperations,\n  >(\n    operation: Operation,\n    options?: GraphqlQueryOptions<Operation, Operations>,\n  ): Promise<\n    GraphQLClientResponse<\n      T extends undefined ? ReturnData<Operation, Operations> : T\n    >\n  > {\n    const response = await this.client.request<\n      T extends undefined ? ReturnData<Operation, Operations> : T,\n      Operation\n    >(operation, {\n      apiVersion: this.apiVersion || this.graphqlClass().config.apiVersion,\n      ...(options as ApiClientRequestOptions<Operation, AdminOperations>),\n    });\n\n    if (response.errors) {\n      const fetchResponse = response.errors.response;\n\n      throwFailedRequest(response, (options?.retries ?? 0) > 0, fetchResponse);\n    }\n\n    const headerObject = Object.fromEntries(\n      response.headers ? response.headers.entries() : [],\n    );\n\n    return {\n      ...response,\n      headers: canonicalizeHeaders(headerObject ?? {}),\n    };\n  }\n\n  private graphqlClass() {\n    return this.constructor as typeof GraphqlClient;\n  }\n}\n\nexport function graphqlClientClass({\n  config,\n}: GraphqlClientClassParams): typeof GraphqlClient {\n  class NewGraphqlClient extends GraphqlClient {\n    public static config = config;\n  }\n\n  Reflect.defineProperty(NewGraphqlClient, 'name', {\n    value: 'GraphqlClient',\n  });\n\n  return NewGraphqlClient as typeof GraphqlClient;\n}\n"],"names":["ShopifyErrors.MissingRequiredArgument"],"mappings":"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"}},
    {"offset": {"line": 1199, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/runtime/crypto/types.ts"],"sourcesContent":["export enum HashFormat {\n  Base64 = 'base64',\n  Hex = 'hex',\n}\n"],"names":[],"mappings":";;;;IAAY;AAAZ,CAAA,SAAY,UAAU,EAAA;IACpB,UAAA,CAAA,QAAA,CAAA,GAAA,QAAiB;IACjB,UAAA,CAAA,KAAA,CAAA,GAAA,KAAW;AACb,CAAC,EAHW,UAAU,IAAA,CAAV,UAAU,GAAA,CAAA,CAAA,CAAA,CAAA"}},
    {"offset": {"line": 1214, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/utils.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/runtime/crypto/utils.ts"],"sourcesContent":["import {ShopifyError} from '../../lib/error';\n\nimport {HashFormat} from './types';\n\nexport async function createSHA256HMAC(\n  secret: string,\n  payload: string,\n  returnFormat: HashFormat = HashFormat.Base64,\n): Promise<string> {\n  const cryptoLib =\n    typeof (crypto as any)?.webcrypto === 'undefined'\n      ? crypto\n      : (crypto as any).webcrypto;\n\n  const enc = new TextEncoder();\n  const key = await cryptoLib.subtle.importKey(\n    'raw',\n    enc.encode(secret),\n    {\n      name: 'HMAC',\n      hash: {name: 'SHA-256'},\n    },\n    false,\n    ['sign'],\n  );\n\n  const signature = await cryptoLib.subtle.sign(\n    'HMAC',\n    key,\n    enc.encode(payload),\n  );\n  return returnFormat === HashFormat.Base64\n    ? asBase64(signature)\n    : asHex(signature);\n}\n\nexport function asHex(buffer: ArrayBuffer): string {\n  return [...new Uint8Array(buffer)]\n    .map((byte) => byte.toString(16).padStart(2, '0'))\n    .join('');\n}\n\nconst LookupTable =\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nexport function asBase64(buffer: ArrayBuffer): string {\n  let output = '';\n\n  const input = new Uint8Array(buffer);\n  for (let i = 0; i < input.length; ) {\n    const byte1 = input[i++];\n    const byte2 = input[i++];\n    const byte3 = input[i++];\n\n    const enc1 = byte1 >> 2;\n    const enc2 = ((byte1 & 0b00000011) << 4) | (byte2 >> 4);\n    let enc3 = ((byte2 & 0b00001111) << 2) | (byte3 >> 6);\n    let enc4 = byte3 & 0b00111111;\n\n    if (isNaN(byte2)) {\n      enc3 = 64;\n    }\n    if (isNaN(byte3)) {\n      enc4 = 64;\n    }\n\n    output +=\n      LookupTable[enc1] +\n      LookupTable[enc2] +\n      LookupTable[enc3] +\n      LookupTable[enc4];\n  }\n  return output;\n}\n\nexport function hashString(str: string, returnFormat: HashFormat): string {\n  const buffer = new TextEncoder().encode(str);\n\n  switch (returnFormat) {\n    case HashFormat.Base64:\n      return asBase64(buffer);\n    case HashFormat.Hex:\n      return asHex(buffer);\n    default:\n      throw new ShopifyError(`Unrecognized hash format '${returnFormat}'`);\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAIO,eAAe,gBAAgB,CACpC,MAAc,EACd,OAAe,EACf,YAAA,GAA2B,yMAAU,CAAC,MAAM,EAAA;IAE5C,MAAM,SAAS,GACb,OAAQ,MAAc,EAAE,SAAS,KAAK,cAClC,SACC,MAAc,CAAC,SAAS;IAE/B,MAAM,GAAG,GAAG,IAAI,WAAW,EAAE;IAC7B,MAAM,GAAG,GAAG,MAAM,SAAS,CAAC,MAAM,CAAC,SAAS,CAC1C,KAAK,EACL,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAClB;QACE,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE;YAAC,IAAI,EAAE,SAAS;QAAA,CAAC;IACxB,CAAA,EACD,KAAK,EACL;QAAC,MAAM;KAAC,CACT;IAED,MAAM,SAAS,GAAG,MAAM,SAAS,CAAC,MAAM,CAAC,IAAI,CAC3C,MAAM,EACN,GAAG,EACH,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CACpB;IACD,OAAO,YAAY,KAAK,yMAAU,CAAC,MAAA,GAC/B,QAAQ,CAAC,SAAS,IAClB,KAAK,CAAC,SAAS,CAAC;AACtB;AAEM,SAAU,KAAK,CAAC,MAAmB,EAAA;IACvC,OAAO,CAAC;WAAG,IAAI,UAAU,CAAC,MAAM,CAAC;KAAA,CAC9B,GAAG,CAAC,CAAC,IAAI,GAAK,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAChD,IAAI,CAAC,EAAE,CAAC;AACb;AAEA,MAAM,WAAW,GACf,mEAAmE;AAC/D,SAAU,QAAQ,CAAC,MAAmB,EAAA;IAC1C,IAAI,MAAM,GAAG,EAAE;IAEf,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,MAAM,CAAC;IACpC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAI;QAClC,MAAM,KAAK,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC;QACxB,MAAM,KAAK,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC;QACxB,MAAM,KAAK,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC;QAExB,MAAM,IAAI,GAAG,KAAK,IAAI,CAAC;QACvB,MAAM,IAAI,GAAG,AAAC,CAAC,KAAK,GAAG,UAAU,KAAK,CAAC,GAAK,KAAK,IAAI,CAAC,CAAC;QACvD,IAAI,IAAI,GAAG,AAAC,CAAC,KAAK,GAAG,UAAU,KAAK,CAAC,GAAK,KAAK,IAAI,CAAC,CAAC;QACrD,IAAI,IAAI,GAAG,KAAK,GAAG,UAAU;QAE7B,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE;YAChB,IAAI,GAAG,EAAE;QACX;QACA,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE;YAChB,IAAI,GAAG,EAAE;QACX;QAEA,MAAM,IACJ,WAAW,CAAC,IAAI,CAAC,GACjB,WAAW,CAAC,IAAI,CAAC,GACjB,WAAW,CAAC,IAAI,CAAC,GACjB,WAAW,CAAC,IAAI,CAAC;IACrB;IACA,OAAO,MAAM;AACf;AAEM,SAAU,UAAU,CAAC,GAAW,EAAE,YAAwB,EAAA;IAC9D,MAAM,MAAM,GAAG,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC;IAE5C,OAAQ,YAAY;QAClB,KAAK,yMAAU,CAAC,MAAM;YACpB,OAAO,QAAQ,CAAC,MAAM,CAAC;QACzB,KAAK,yMAAU,CAAC,GAAG;YACjB,OAAO,KAAK,CAAC,MAAM,CAAC;QACtB;YACE,MAAM,IAAI,6LAAY,CAAC,CAAA,0BAAA,EAA6B,YAAY,CAAA,CAAA,CAAG,CAAC;;AAE1E"}},
    {"offset": {"line": 1286, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/rest/client.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/clients/admin/rest/client.ts"],"sourcesContent":["import {\n  AdminRestApiClient,\n  createAdminRestApiClient,\n} from '@shopify/admin-api-client';\nimport * as LosslessJSON from 'lossless-json';\n\nimport {\n  clientLoggerFactory,\n  getUserAgent,\n  throwFailedRequest,\n} from '../../common';\nimport {\n  HashFormat,\n  NormalizedRequest,\n  abstractFetch,\n  canonicalizeHeaders,\n  createSHA256HMAC,\n  getHeader,\n} from '../../../../runtime';\nimport {ConfigInterface} from '../../../base-types';\nimport * as ShopifyErrors from '../../../error';\nimport {logger} from '../../../logger';\nimport {\n  RestRequestReturn,\n  PageInfo,\n  RestClientParams,\n  PageInfoParams,\n} from '../types';\nimport type {\n  RequestParams,\n  GetRequestParams,\n  PutRequestParams,\n  PostRequestParams,\n  DeleteRequestParams,\n} from '../../types';\nimport {ApiVersion, Method} from '../../../types';\nimport {Session} from '../../../session/session';\n\nexport interface RestClientClassParams {\n  config: ConfigInterface;\n  formatPaths?: boolean;\n}\n\ninterface DeprecationInterface {\n  message: string | null;\n  path: string;\n  body?: string;\n}\n\nexport class RestClient {\n  public static config: ConfigInterface;\n  public static formatPaths: boolean;\n\n  static LINK_HEADER_REGEXP = /<([^<]+)>; rel=\"([^\"]+)\"/;\n  static DEFAULT_LIMIT = '50';\n  static RETRY_WAIT_TIME = 1000;\n\n  static readonly DEPRECATION_ALERT_DELAY = 300000;\n  loggedDeprecations: Record<string, number> = {};\n\n  readonly client: AdminRestApiClient;\n  readonly session: Session;\n  readonly apiVersion: ApiVersion;\n\n  public constructor({session, apiVersion}: RestClientParams) {\n    const config = this.restClass().config;\n\n    if (!config.isCustomStoreApp && !session.accessToken) {\n      throw new ShopifyErrors.MissingRequiredArgument(\n        'Missing access token when creating REST client',\n      );\n    }\n\n    if (apiVersion) {\n      const message =\n        apiVersion === config.apiVersion\n          ? `REST client has a redundant API version override to the default ${apiVersion}`\n          : `REST client overriding default API version ${config.apiVersion} with ${apiVersion}`;\n\n      logger(config).debug(message);\n    }\n\n    const customStoreAppAccessToken =\n      config.adminApiAccessToken ?? config.apiSecretKey;\n\n    this.session = session;\n    this.apiVersion = apiVersion ?? config.apiVersion;\n    this.client = createAdminRestApiClient({\n      scheme: config.hostScheme,\n      storeDomain: session.shop,\n      apiVersion: apiVersion ?? config.apiVersion,\n      accessToken: config.isCustomStoreApp\n        ? customStoreAppAccessToken\n        : session.accessToken!,\n      customFetchApi: abstractFetch,\n      logger: clientLoggerFactory(config),\n      userAgentPrefix: getUserAgent(config),\n      defaultRetryTime: this.restClass().RETRY_WAIT_TIME,\n      formatPaths: this.restClass().formatPaths,\n      isTesting: config.isTesting,\n    });\n  }\n\n  /**\n   * Performs a GET request on the given path.\n   */\n  public async get<T = any>(params: GetRequestParams) {\n    return this.request<T>({method: Method.Get, ...params});\n  }\n\n  /**\n   * Performs a POST request on the given path.\n   */\n  public async post<T = any>(params: PostRequestParams) {\n    return this.request<T>({method: Method.Post, ...params});\n  }\n\n  /**\n   * Performs a PUT request on the given path.\n   */\n  public async put<T = any>(params: PutRequestParams) {\n    return this.request<T>({method: Method.Put, ...params});\n  }\n\n  /**\n   * Performs a DELETE request on the given path.\n   */\n  public async delete<T = any>(params: DeleteRequestParams) {\n    return this.request<T>({method: Method.Delete, ...params});\n  }\n\n  protected async request<T = any>(\n    params: RequestParams,\n  ): Promise<RestRequestReturn<T>> {\n    const requestParams = {\n      headers: {\n        ...params.extraHeaders,\n        ...(params.type ? {'Content-Type': params.type.toString()} : {}),\n      },\n      retries: params.tries ? params.tries - 1 : undefined,\n      searchParams: params.query,\n    };\n\n    let response: Response;\n    switch (params.method) {\n      case Method.Get:\n        response = await this.client.get(params.path, requestParams);\n        break;\n      case Method.Put:\n        response = await this.client.put(params.path, {\n          ...requestParams,\n          data: params.data!,\n        });\n        break;\n      case Method.Post:\n        response = await this.client.post(params.path, {\n          ...requestParams,\n          data: params.data!,\n        });\n        break;\n      case Method.Delete:\n        response = await this.client.delete(params.path, requestParams);\n        break;\n      default:\n        throw new ShopifyErrors.InvalidRequestError(\n          `Unsupported request method '${params.method}'`,\n        );\n    }\n\n    const bodyString: string = await response.text();\n\n    // Some DELETE requests return an empty body but are still valid responses, we want those to go through\n    const body: any =\n      params.method === Method.Delete && bodyString === ''\n        ? {}\n        : this.parseJsonWithLosslessNumbers(bodyString);\n\n    const responseHeaders = canonicalizeHeaders(\n      Object.fromEntries(response.headers.entries()),\n    );\n\n    if (!response.ok) {\n      throwFailedRequest(body, (params.tries ?? 1) > 1, response);\n    }\n\n    const requestReturn: RestRequestReturn<T> = {\n      body,\n      headers: responseHeaders,\n    };\n\n    await this.logDeprecations(\n      {\n        method: params.method,\n        url: params.path,\n        headers: requestParams.headers,\n        body: params.data ? JSON.stringify(params.data) : undefined,\n      },\n      requestReturn,\n    );\n\n    const link = response.headers.get('Link');\n    if (link !== undefined) {\n      const pageInfo: PageInfo = {\n        limit: params.query?.limit\n          ? params.query?.limit.toString()\n          : RestClient.DEFAULT_LIMIT,\n      };\n\n      if (link) {\n        const links = link.split(', ');\n\n        for (const link of links) {\n          const parsedLink = link.match(RestClient.LINK_HEADER_REGEXP);\n          if (!parsedLink) {\n            continue;\n          }\n\n          const linkRel = parsedLink[2];\n          const linkUrl = new URL(parsedLink[1]);\n          const linkFields = linkUrl.searchParams.get('fields');\n          const linkPageToken = linkUrl.searchParams.get('page_info');\n\n          if (!pageInfo.fields && linkFields) {\n            pageInfo.fields = linkFields.split(',');\n          }\n\n          if (linkPageToken) {\n            switch (linkRel) {\n              case 'previous':\n                pageInfo.previousPageUrl = parsedLink[1];\n                pageInfo.prevPage = this.buildRequestParams(parsedLink[1]);\n                break;\n              case 'next':\n                pageInfo.nextPageUrl = parsedLink[1];\n                pageInfo.nextPage = this.buildRequestParams(parsedLink[1]);\n                break;\n            }\n          }\n        }\n      }\n\n      requestReturn.pageInfo = pageInfo;\n    }\n\n    return requestReturn;\n  }\n\n  private restClass() {\n    return this.constructor as typeof RestClient;\n  }\n\n  /**\n   * Parse JSON with lossless-json to preserve numeric precision.\n   * Converts all ID fields (ending with _id, _ids, or named 'id') to strings.\n   */\n  private parseJsonWithLosslessNumbers(jsonString: string): any {\n    // Parse with lossless-json first to preserve precision\n    const parsed = LosslessJSON.parse(jsonString);\n\n    // Recursively process the parsed object to convert IDs to strings\n    const processValue = (value: any, key?: string): any => {\n      if (value === null || value === undefined) {\n        return value;\n      }\n\n      // Handle LosslessNumber instances\n      if (value && value.isLosslessNumber === true) {\n        const keyLower = (key || '').toLowerCase();\n        // Always convert ID fields to strings\n        if (keyLower === 'id' || keyLower.endsWith('_id')) {\n          return value.toString();\n        }\n        // For non-ID fields, always convert to regular JavaScript number\n        // The IDs have already been handled, so we can use standard conversion\n        return Number(value.value);\n      }\n\n      // Handle arrays - special case for _ids arrays\n      if (Array.isArray(value)) {\n        const isIdsArray = key && key.toLowerCase().endsWith('_ids');\n        return value.map((item) => {\n          // If this is an _ids array and item is a LosslessNumber, convert to string\n          if (isIdsArray && item && item.isLosslessNumber === true) {\n            return item.toString();\n          }\n          return processValue(item);\n        });\n      }\n\n      // Handle objects\n      if (typeof value === 'object') {\n        const result: any = {};\n        for (const objKey in value) {\n          if (Object.prototype.hasOwnProperty.call(value, objKey)) {\n            result[objKey] = processValue(value[objKey], objKey);\n          }\n        }\n        return result;\n      }\n\n      return value;\n    };\n\n    return processValue(parsed);\n  }\n\n  private buildRequestParams(newPageUrl: string): PageInfoParams {\n    const pattern = `^/admin/api/[^/]+/(.*).json$`;\n\n    const url = new URL(newPageUrl);\n    const path = url.pathname.replace(new RegExp(pattern), '$1');\n    return {\n      path,\n      query: Object.fromEntries(url.searchParams.entries()),\n    };\n  }\n\n  private async logDeprecations(\n    request: NormalizedRequest,\n    response: RestRequestReturn,\n  ) {\n    const config = this.restClass().config;\n\n    const deprecationReason = getHeader(\n      response.headers,\n      'X-Shopify-API-Deprecated-Reason',\n    );\n    if (deprecationReason) {\n      const deprecation: DeprecationInterface = {\n        message: deprecationReason,\n        path: request.url,\n      };\n\n      if (request.body) {\n        // This can only be a string, since we're always converting the body before calling this method\n        deprecation.body = `${(request.body as string).substring(0, 100)}...`;\n      }\n\n      const depHash = await createSHA256HMAC(\n        config.apiSecretKey,\n        JSON.stringify(deprecation),\n        HashFormat.Hex,\n      );\n\n      if (\n        !Object.keys(this.loggedDeprecations).includes(depHash) ||\n        Date.now() - this.loggedDeprecations[depHash] >=\n          RestClient.DEPRECATION_ALERT_DELAY\n      ) {\n        this.loggedDeprecations[depHash] = Date.now();\n\n        const stack = new Error().stack;\n        const message = `API Deprecation Notice ${new Date().toLocaleString()} : ${JSON.stringify(\n          deprecation,\n        )}  -  Stack Trace: ${stack}`;\n        await logger(config).warning(message);\n      }\n    }\n  }\n}\n\nexport function restClientClass(\n  params: RestClientClassParams,\n): typeof RestClient {\n  const {config, formatPaths} = params;\n\n  class NewRestClient extends RestClient {\n    public static config = config;\n    public static formatPaths = formatPaths === undefined ? true : formatPaths;\n  }\n\n  Reflect.defineProperty(NewRestClient, 'name', {\n    value: 'RestClient',\n  });\n\n  return NewRestClient as typeof RestClient;\n}\n"],"names":["ShopifyErrors.MissingRequiredArgument","ShopifyErrors.InvalidRequestError"],"mappings":"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"}},
    {"offset": {"line": 1568, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/storefront/client.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/clients/storefront/client.ts"],"sourcesContent":["import {\n  StorefrontApiClient,\n  StorefrontOperations,\n  ClientResponse,\n  createStorefrontApiClient,\n  ReturnData,\n  ApiClientRequestOptions,\n} from '@shopify/storefront-api-client';\n\nimport {ApiVersion} from '../../types';\nimport {logger} from '../../logger';\nimport * as ShopifyErrors from '../../error';\nimport {MissingRequiredArgument} from '../../error';\nimport type {\n  GraphqlClientParams,\n  GraphqlParams,\n  GraphqlQueryOptions,\n  RequestReturn,\n} from '../types';\nimport {ConfigInterface} from '../../base-types';\nimport {Session} from '../../session/session';\nimport {abstractFetch} from '../../../runtime';\nimport {clientLoggerFactory, getUserAgent, throwFailedRequest} from '../common';\n\ninterface GraphqlClientClassParams {\n  config: ConfigInterface;\n}\n\nexport class StorefrontClient {\n  public static config: ConfigInterface;\n\n  readonly session: Session;\n  readonly client: StorefrontApiClient;\n  readonly apiVersion?: ApiVersion;\n\n  constructor(params: GraphqlClientParams) {\n    const config = this.storefrontClass().config;\n\n    if (!config.isCustomStoreApp && !params.session.accessToken) {\n      throw new ShopifyErrors.MissingRequiredArgument(\n        'Missing access token when creating GraphQL client',\n      );\n    }\n\n    if (params.apiVersion) {\n      const message =\n        params.apiVersion === config.apiVersion\n          ? `Storefront client has a redundant API version override to the default ${params.apiVersion}`\n          : `Storefront client overriding default API version ${config.apiVersion} with ${params.apiVersion}`;\n\n      logger(config).debug(message);\n    }\n\n    let accessToken: string | undefined;\n    if (config.isCustomStoreApp) {\n      accessToken = config.privateAppStorefrontAccessToken;\n\n      if (!accessToken) {\n        throw new MissingRequiredArgument(\n          'Custom store apps must set the privateAppStorefrontAccessToken property to call the Storefront API.',\n        );\n      }\n    } else {\n      accessToken = params.session.accessToken;\n\n      if (!accessToken) {\n        throw new MissingRequiredArgument('Session missing access token.');\n      }\n    }\n\n    this.session = params.session;\n    this.apiVersion = params.apiVersion;\n    this.client = createStorefrontApiClient({\n      privateAccessToken: accessToken,\n      apiVersion: this.apiVersion ?? config.apiVersion,\n      storeDomain: this.session.shop,\n      customFetchApi: abstractFetch,\n      logger: clientLoggerFactory(config),\n      clientName: getUserAgent(config),\n    });\n  }\n\n  public async query<T = undefined>(\n    params: GraphqlParams,\n  ): Promise<RequestReturn<T>> {\n    logger(this.storefrontClass().config).deprecated(\n      '12.0.0',\n      'The query method is deprecated, and was replaced with the request method.\\n' +\n        'See the migration guide: https://github.com/Shopify/shopify-app-js/blob/main/packages/apps/shopify-api/docs/migrating-to-v9.md#using-the-new-clients.',\n    );\n\n    if (\n      (typeof params.data === 'string' && params.data.length === 0) ||\n      Object.entries(params.data).length === 0\n    ) {\n      throw new ShopifyErrors.MissingRequiredArgument('Query missing.');\n    }\n\n    let operation: string;\n    let variables: Record<string, any> | undefined;\n    if (typeof params.data === 'string') {\n      operation = params.data;\n    } else {\n      operation = params.data.query;\n      variables = params.data.variables;\n    }\n\n    const headers = Object.fromEntries(\n      Object.entries(params?.extraHeaders ?? {}).map(([key, value]) => [\n        key,\n        Array.isArray(value) ? value.join(', ') : value.toString(),\n      ]),\n    );\n\n    const response = await this.request<T>(operation, {\n      headers,\n      retries: params.tries ? params.tries - 1 : undefined,\n      variables,\n    });\n\n    return {body: response as T, headers: {}};\n  }\n\n  public async request<\n    T = undefined,\n    Operation extends keyof Operations = string,\n    Operations extends StorefrontOperations = StorefrontOperations,\n  >(\n    operation: Operation,\n    options?: GraphqlQueryOptions<Operation, Operations>,\n  ): Promise<\n    ClientResponse<T extends undefined ? ReturnData<Operation, Operations> : T>\n  > {\n    const response = await this.client.request<T, Operation>(operation, {\n      apiVersion: this.apiVersion || this.storefrontClass().config.apiVersion,\n      ...(options as ApiClientRequestOptions<Operation, StorefrontOperations>),\n    });\n\n    if (response.errors) {\n      const fetchResponse = response.errors.response;\n\n      throwFailedRequest(response, (options?.retries ?? 0) > 0, fetchResponse);\n    }\n\n    return response;\n  }\n\n  private storefrontClass() {\n    return this.constructor as typeof StorefrontClient;\n  }\n}\n\nexport function storefrontClientClass(params: GraphqlClientClassParams) {\n  const {config} = params;\n  class NewStorefrontClient extends StorefrontClient {\n    public static config = config;\n  }\n\n  Reflect.defineProperty(NewStorefrontClient, 'name', {\n    value: 'StorefrontClient',\n  });\n\n  return NewStorefrontClient as typeof StorefrontClient;\n}\n"],"names":["ShopifyErrors.MissingRequiredArgument"],"mappings":"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"}},
    {"offset": {"line": 1680, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/graphql_proxy/graphql_proxy.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/clients/graphql_proxy/graphql_proxy.ts"],"sourcesContent":["import {ConfigInterface} from '../../base-types';\nimport * as ShopifyErrors from '../../error';\nimport {graphqlClientClass} from '../admin';\n\nimport {GraphqlProxy} from './types';\n\nexport function graphqlProxy(config: ConfigInterface): GraphqlProxy {\n  return async ({session, rawBody}) => {\n    if (!session.accessToken) {\n      throw new ShopifyErrors.InvalidSession(\n        'Cannot proxy query. Session not authenticated.',\n      );\n    }\n\n    const GraphqlClient = graphqlClientClass({config});\n    const client = new GraphqlClient({session});\n\n    let query: string;\n    let variables: Record<string, any> | undefined;\n    if (typeof rawBody === 'string') {\n      query = rawBody;\n    } else {\n      query = rawBody.query;\n      variables = rawBody.variables;\n    }\n\n    if (!query) {\n      throw new ShopifyErrors.MissingRequiredArgument('Query missing.');\n    }\n\n    const response = await client.request(query, {variables});\n\n    return {body: response, headers: {}};\n  };\n}\n"],"names":["ShopifyErrors.InvalidSession","ShopifyErrors.MissingRequiredArgument"],"mappings":";;;;;;;;;;;;;;AAMM,SAAU,YAAY,CAAC,MAAuB,EAAA;IAClD,OAAO,OAAO,EAAC,OAAO,EAAE,OAAO,EAAC,KAAI;QAClC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE;YACxB,MAAM,IAAIA,+LAA4B,CACpC,gDAAgD,CACjD;QACH;QAEA,MAAM,aAAa,OAAG,mOAAkB,EAAC;YAAC,MAAM;QAAA,CAAC,CAAC;QAClD,MAAM,MAAM,GAAG,IAAI,aAAa,CAAC;YAAC,OAAO;QAAA,CAAC,CAAC;QAE3C,IAAI,KAAa;QACjB,IAAI,SAA0C;QAC9C,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;YAC/B,KAAK,GAAG,OAAO;QACjB,OAAO;YACL,KAAK,GAAG,OAAO,CAAC,KAAK;YACrB,SAAS,GAAG,OAAO,CAAC,SAAS;QAC/B;QAEA,IAAI,CAAC,KAAK,EAAE;YACV,MAAM,IAAIC,wMAAqC,CAAC,gBAAgB,CAAC;QACnE;QAEA,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE;YAAC,SAAS;QAAA,CAAC,CAAC;QAEzD,OAAO;YAAC,IAAI,EAAE,QAAQ;YAAE,OAAO,EAAE,CAAA,CAAE;QAAA,CAAC;IACtC,CAAC;AACH"}},
    {"offset": {"line": 1731, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/clients/index.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\n\nimport {restClientClass, graphqlClientClass} from './admin';\nimport {storefrontClientClass} from './storefront';\nimport {graphqlProxy} from './graphql_proxy/graphql_proxy';\nimport {ShopifyClients} from './types';\n\nexport type {ShopifyClients} from './types';\n\nexport function clientClasses(config: ConfigInterface): ShopifyClients {\n  return {\n    // We don't pass in the HttpClient because the RestClient inherits from it, and goes through the same setup process\n    Rest: restClientClass({config}),\n    Graphql: graphqlClientClass({config}),\n    Storefront: storefrontClientClass({config}),\n    graphqlProxy: graphqlProxy(config),\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AASM,SAAU,aAAa,CAAC,MAAuB,EAAA;IACnD,OAAO;;QAEL,IAAI,MAAE,6NAAe,EAAC;YAAC,MAAM;QAAA,CAAC,CAAC;QAC/B,OAAO,MAAE,mOAAkB,EAAC;YAAC,MAAM;QAAA,CAAC,CAAC;QACrC,UAAU,MAAE,gOAAqB,EAAC;YAAC,MAAM;QAAA,CAAC,CAAC;QAC3C,YAAY,MAAE,iOAAY,EAAC,MAAM,CAAC;KACnC;AACH"}},
    {"offset": {"line": 1764, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/processed-query.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/utils/processed-query.ts"],"sourcesContent":["export default class ProcessedQuery {\n  static stringify(keyValuePairs?: Record<string, any>): string {\n    if (!keyValuePairs || Object.keys(keyValuePairs).length === 0) return '';\n\n    return new ProcessedQuery().putAll(keyValuePairs).stringify();\n  }\n\n  processedQuery: URLSearchParams;\n\n  constructor() {\n    this.processedQuery = new URLSearchParams();\n  }\n\n  putAll(keyValuePairs: Record<string, any>): ProcessedQuery {\n    Object.entries(keyValuePairs).forEach(([key, value]: [string, any]) =>\n      this.put(key, value),\n    );\n    return this;\n  }\n\n  put(key: string, value: any): void {\n    if (Array.isArray(value)) {\n      this.putArray(key, value);\n    } else if (value?.constructor === Object) {\n      this.putObject(key, value);\n    } else {\n      this.putSimple(key, value);\n    }\n  }\n\n  putArray(key: string, value: (string | number)[]): void {\n    value.forEach((arrayValue) =>\n      this.processedQuery.append(`${key}[]`, `${arrayValue}`),\n    );\n  }\n\n  putObject(key: string, value: object): void {\n    Object.entries(value).forEach(\n      ([entry, entryValue]: [string, string | number]) => {\n        this.processedQuery.append(`${key}[${entry}]`, `${entryValue}`);\n      },\n    );\n  }\n\n  putSimple(key: string, value: string | number): void {\n    this.processedQuery.append(key, `${value}`);\n  }\n\n  stringify(omitQuestionMark = false): string {\n    const queryString = this.processedQuery.toString();\n    return omitQuestionMark ? queryString : `?${queryString}`;\n  }\n}\n"],"names":[],"mappings":";;;;AAAc,MAAO,cAAc,CAAA;IACjC,OAAO,SAAS,CAAC,aAAmC,EAAA;QAClD,IAAI,CAAC,aAAa,IAAI,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;QAExE,OAAO,IAAI,cAAc,EAAE,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,SAAS,EAAE;IAC/D;IAEA,cAAc,CAAA;IAEd,WAAA,EAAA;QACE,IAAI,CAAC,cAAc,GAAG,IAAI,eAAe,EAAE;IAC7C;IAEA,MAAM,CAAC,aAAkC,EAAA;QACvC,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,CAAgB,GAChE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CACrB;QACD,OAAO,IAAI;IACb;IAEA,GAAG,CAAC,GAAW,EAAE,KAAU,EAAA;QACzB,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACxB,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,KAAK,CAAC;QAC3B,OAAO,IAAI,KAAK,EAAE,WAAW,KAAK,MAAM,EAAE;YACxC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,KAAK,CAAC;QAC5B,OAAO;YACL,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,KAAK,CAAC;QAC5B;IACF;IAEA,QAAQ,CAAC,GAAW,EAAE,KAA0B,EAAA;QAC9C,KAAK,CAAC,OAAO,CAAC,CAAC,UAAU,GACvB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAA,EAAG,GAAG,CAAA,EAAA,CAAI,EAAE,GAAG,UAAU,CAAA,CAAE,CAAC,CACxD;IACH;IAEA,SAAS,CAAC,GAAW,EAAE,KAAa,EAAA;QAClC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,OAAO,CAC3B,CAAC,CAAC,KAAK,EAAE,UAAU,CAA4B,KAAI;YACjD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAA,EAAG,GAAG,CAAA,CAAA,EAAI,KAAK,CAAA,CAAA,CAAG,EAAE,CAAA,EAAG,UAAU,CAAA,CAAE,CAAC;QACjE,CAAC,CACF;IACH;IAEA,SAAS,CAAC,GAAW,EAAE,KAAsB,EAAA;QAC3C,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,EAAE,CAAA,EAAG,KAAK,CAAA,CAAE,CAAC;IAC7C;IAEA,SAAS,CAAC,gBAAgB,GAAG,KAAK,EAAA;QAChC,MAAM,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE;QAClD,OAAO,gBAAgB,GAAG,WAAW,GAAG,CAAA,CAAA,EAAI,WAAW,CAAA,CAAE;IAC3D;AACD"}},
    {"offset": {"line": 1812, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/safe-compare.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/oauth/safe-compare.ts"],"sourcesContent":["import * as ShopifyErrors from '../../error';\n\nexport type SafeCompare = (\n  strA: string | Record<string, string> | string[] | number[],\n  strB: string | Record<string, string> | string[] | number[],\n) => boolean;\n\nexport const safeCompare: SafeCompare = (strA, strB) => {\n  if (typeof strA === typeof strB) {\n    const enc = new TextEncoder();\n    const buffA = enc.encode(JSON.stringify(strA));\n    const buffB = enc.encode(JSON.stringify(strB));\n\n    if (buffA.length === buffB.length) {\n      return timingSafeEqual(buffA, buffB);\n    }\n  } else {\n    throw new ShopifyErrors.SafeCompareError(\n      `Mismatched data types provided: ${typeof strA} and ${typeof strB}`,\n    );\n  }\n  return false;\n};\n\n// Buffer must be same length for this function to be secure.\nfunction timingSafeEqual(bufA: ArrayBuffer, bufB: ArrayBuffer): boolean {\n  const viewA = new Uint8Array(bufA);\n  const viewB = new Uint8Array(bufB);\n  let out = 0;\n  for (let i = 0; i < viewA.length; i++) {\n    out |= viewA[i] ^ viewB[i];\n  }\n  return out === 0;\n}\n"],"names":["ShopifyErrors.SafeCompareError"],"mappings":";;;;;;MAOa,WAAW,GAAgB,CAAC,IAAI,EAAE,IAAI,KAAI;IACrD,IAAI,OAAO,IAAI,KAAK,OAAO,IAAI,EAAE;QAC/B,MAAM,GAAG,GAAG,IAAI,WAAW,EAAE;QAC7B,MAAM,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC9C,MAAM,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAE9C,IAAI,KAAK,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE;YACjC,OAAO,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC;QACtC;IACF,OAAO;QACL,MAAM,IAAIA,iMAA8B,CACtC,CAAA,gCAAA,EAAmC,OAAO,IAAI,CAAA,KAAA,EAAQ,OAAO,IAAI,CAAA,CAAE,CACpE;IACH;IACA,OAAO,KAAK;AACd;AAEA,6DAAA;AACA,SAAS,eAAe,CAAC,IAAiB,EAAE,IAAiB,EAAA;IAC3D,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC;IAClC,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC;IAClC,IAAI,GAAG,GAAG,CAAC;IACX,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE;QACrC,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;IAC5B;IACA,OAAO,GAAG,KAAK,CAAC;AAClB"}},
    {"offset": {"line": 1847, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/types.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/utils/types.ts"],"sourcesContent":["import {AdapterArgs} from '../../runtime/types';\n\nexport enum HmacValidationType {\n  Flow = 'flow',\n  Webhook = 'webhook',\n  FulfillmentService = 'fulfillment_service',\n}\n\nexport interface ValidateParams extends AdapterArgs {\n  /**\n   * The raw body of the request.\n   */\n  rawBody: string;\n}\n\nexport const ValidationErrorReason = {\n  MissingBody: 'missing_body',\n  InvalidHmac: 'invalid_hmac',\n  MissingHmac: 'missing_hmac',\n} as const;\n\nexport type ValidationErrorReasonType =\n  (typeof ValidationErrorReason)[keyof typeof ValidationErrorReason];\n\nexport interface ValidationInvalid {\n  /**\n   * Whether the request is a valid Flow request from Shopify.\n   */\n  valid: false;\n  /**\n   * The reason why the request is not valid.\n   */\n  reason: ValidationErrorReasonType;\n}\n\nexport interface ValidationValid {\n  /**\n   * Whether the request is a valid request from Shopify.\n   */\n  valid: true;\n}\n"],"names":[],"mappings":";;;;;;IAEY;AAAZ,CAAA,SAAY,kBAAkB,EAAA;IAC5B,kBAAA,CAAA,MAAA,CAAA,GAAA,MAAa;IACb,kBAAA,CAAA,SAAA,CAAA,GAAA,SAAmB;IACnB,kBAAA,CAAA,oBAAA,CAAA,GAAA,qBAA0C;AAC5C,CAAC,EAJW,kBAAkB,IAAA,CAAlB,kBAAkB,GAAA,CAAA,CAAA,CAAA,CAAA;AAavB,MAAM,qBAAqB,GAAG;IACnC,WAAW,EAAE,cAAc;IAC3B,WAAW,EAAE,cAAc;IAC3B,WAAW,EAAE,cAAc"}},
    {"offset": {"line": 1870, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/hmac-validator.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/utils/hmac-validator.ts"],"sourcesContent":["import {logger} from '../logger';\nimport {ShopifyHeader} from '../types';\nimport {\n  AdapterArgs,\n  abstractConvertRequest,\n  getHeader,\n} from '../../runtime/http';\nimport {ConfigInterface} from '../base-types';\nimport {createSHA256HMAC} from '../../runtime/crypto';\nimport {HashFormat} from '../../runtime/crypto/types';\nimport {AuthQuery} from '../auth/oauth/types';\nimport * as ShopifyErrors from '../error';\nimport {safeCompare} from '../auth/oauth/safe-compare';\n\nimport ProcessedQuery from './processed-query';\nimport {\n  ValidationErrorReason,\n  ValidationInvalid,\n  HmacValidationType,\n  ValidationValid,\n  ValidationErrorReasonType,\n} from './types';\n\nconst HMAC_TIMESTAMP_PERMITTED_CLOCK_TOLERANCE_SEC = 90;\n\nexport type HMACSignator = 'admin' | 'appProxy';\n\nexport interface ValidateParams extends AdapterArgs {\n  /**\n   * The type of validation to perform, either 'flow' or 'webhook'.\n   */\n  type: HmacValidationType;\n  /**\n   * The raw body of the request.\n   */\n  rawBody: string;\n}\n\nfunction stringifyQueryForAdmin(query: AuthQuery): string {\n  const processedQuery = new ProcessedQuery();\n  Object.keys(query)\n    .sort((val1, val2) => val1.localeCompare(val2))\n    .forEach((key: string) => processedQuery.put(key, query[key]));\n\n  return processedQuery.stringify(true);\n}\n\nfunction stringifyQueryForAppProxy(query: AuthQuery): string {\n  return Object.entries(query)\n    .sort(([val1], [val2]) => val1.localeCompare(val2))\n    .reduce((acc, [key, value]) => {\n      return `${acc}${key}=${Array.isArray(value) ? value.join(',') : value}`;\n    }, '');\n}\n\nexport function generateLocalHmac(config: ConfigInterface) {\n  return async (\n    params: AuthQuery,\n    signator: HMACSignator = 'admin',\n  ): Promise<string> => {\n    const {hmac, signature, ...query} = params;\n\n    const queryString =\n      signator === 'admin'\n        ? stringifyQueryForAdmin(query)\n        : stringifyQueryForAppProxy(query);\n\n    return createSHA256HMAC(config.apiSecretKey, queryString, HashFormat.Hex);\n  };\n}\n\nexport function validateHmac(config: ConfigInterface) {\n  return async (\n    query: AuthQuery,\n    {signator}: {signator: HMACSignator} = {signator: 'admin'},\n  ): Promise<boolean> => {\n    if (signator === 'admin' && !query.hmac) {\n      throw new ShopifyErrors.InvalidHmacError(\n        'Query does not contain an HMAC value.',\n      );\n    }\n\n    if (signator === 'appProxy' && !query.signature) {\n      throw new ShopifyErrors.InvalidHmacError(\n        'Query does not contain a signature value.',\n      );\n    }\n\n    validateHmacTimestamp(query);\n\n    const hmac = signator === 'appProxy' ? query.signature : query.hmac;\n    const localHmac = await generateLocalHmac(config)(query, signator);\n\n    return safeCompare(hmac as string, localHmac);\n  };\n}\n\nexport async function validateHmacString(\n  config: ConfigInterface,\n  data: string,\n  hmac: string,\n  format: HashFormat,\n) {\n  const localHmac = await createSHA256HMAC(config.apiSecretKey, data, format);\n\n  return safeCompare(hmac, localHmac);\n}\n\nexport function getCurrentTimeInSec() {\n  return Math.trunc(Date.now() / 1000);\n}\n\nexport function validateHmacFromRequestFactory(config: ConfigInterface) {\n  return async function validateHmacFromRequest({\n    type,\n    rawBody,\n    ...adapterArgs\n  }: ValidateParams): Promise<ValidationInvalid | ValidationValid> {\n    const request = await abstractConvertRequest(adapterArgs);\n    if (!rawBody.length) {\n      return fail(ValidationErrorReason.MissingBody, type, config);\n    }\n    const hmac = getHeader(request.headers, ShopifyHeader.Hmac);\n    if (!hmac) {\n      return fail(ValidationErrorReason.MissingHmac, type, config);\n    }\n    const validHmac = await validateHmacString(\n      config,\n      rawBody,\n      hmac,\n      HashFormat.Base64,\n    );\n    if (!validHmac) {\n      return fail(ValidationErrorReason.InvalidHmac, type, config);\n    }\n\n    return succeed(type, config);\n  };\n}\n\nfunction validateHmacTimestamp(query: AuthQuery) {\n  if (\n    Math.abs(getCurrentTimeInSec() - Number(query.timestamp)) >\n    HMAC_TIMESTAMP_PERMITTED_CLOCK_TOLERANCE_SEC\n  ) {\n    throw new ShopifyErrors.InvalidHmacError(\n      'HMAC timestamp is outside of the tolerance range',\n    );\n  }\n}\n\nasync function fail(\n  reason: ValidationErrorReasonType,\n  type: HmacValidationType,\n  config: ConfigInterface,\n): Promise<ValidationInvalid> {\n  const log = logger(config);\n  await log.debug(`${type} request is not valid`, {reason});\n\n  return {\n    valid: false,\n    reason,\n  };\n}\n\nasync function succeed(\n  type: HmacValidationType,\n  config: ConfigInterface,\n): Promise<ValidationValid> {\n  const log = logger(config);\n  await log.debug(`${type} request is valid`);\n\n  return {\n    valid: true,\n  };\n}\n"],"names":["ShopifyErrors.InvalidHmacError"],"mappings":"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"}},
    {"offset": {"line": 1988, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/decode-host.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/decode-host.ts"],"sourcesContent":["export function decodeHost(host: string): string {\n  return atob(host);\n}\n"],"names":[],"mappings":";;;;AAAM,SAAU,UAAU,CAAC,IAAY,EAAA;IACrC,OAAO,IAAI,CAAC,IAAI,CAAC;AACnB"}},
    {"offset": {"line": 2001, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-admin-url-helper.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/utils/shop-admin-url-helper.ts"],"sourcesContent":["// Converts admin.shopify.com/store/my-shop to my-shop.myshopify.com\nexport function shopAdminUrlToLegacyUrl(shopAdminUrl: string): string | null {\n  const shopUrl = removeProtocol(shopAdminUrl);\n\n  const isShopAdminUrl = shopUrl.split('.')[0] === 'admin';\n\n  if (!isShopAdminUrl) {\n    return null;\n  }\n\n  const regex = new RegExp(`admin\\\\..+/store/([^/]+)`);\n  const matches = shopUrl.match(regex);\n\n  if (matches && matches.length === 2) {\n    const shopName = matches[1];\n    const isSpinUrl = shopUrl.includes('spin.dev/store/');\n    const isLocalUrl = shopUrl.includes('shop.dev/store/');\n\n    if (isSpinUrl) {\n      return spinAdminUrlToLegacyUrl(shopUrl);\n    } else if (isLocalUrl) {\n      return localAdminUrlToLegacyUrl(shopUrl);\n    } else {\n      return `${shopName}.myshopify.com`;\n    }\n  } else {\n    return null;\n  }\n}\n\n// Converts my-shop.myshopify.com to admin.shopify.com/store/my-shop\nexport function legacyUrlToShopAdminUrl(legacyAdminUrl: string): string | null {\n  const shopUrl = removeProtocol(legacyAdminUrl);\n  const regex = new RegExp(`(.+)\\\\.myshopify\\\\.com$`);\n  const matches = shopUrl.match(regex);\n\n  if (matches && matches.length === 2) {\n    const shopName = matches[1];\n    return `admin.shopify.com/store/${shopName}`;\n  } else {\n    const isSpinUrl = shopUrl.endsWith('spin.dev');\n    const isLocalUrl = shopUrl.endsWith('shop.dev');\n    if (isSpinUrl) {\n      return spinLegacyUrlToAdminUrl(shopUrl);\n    } else if (isLocalUrl) {\n      return localLegacyUrlToAdminUrl(shopUrl);\n    } else {\n      return null;\n    }\n  }\n}\n\nfunction spinAdminUrlToLegacyUrl(shopAdminUrl: string) {\n  const spinRegex = new RegExp(`admin\\\\.web\\\\.(.+\\\\.spin\\\\.dev)/store/(.+)`);\n  const spinMatches = shopAdminUrl.match(spinRegex);\n\n  if (spinMatches && spinMatches.length === 3) {\n    const spinUrl = spinMatches[1];\n    const shopName = spinMatches[2];\n    return `${shopName}.shopify.${spinUrl}`;\n  } else {\n    return null;\n  }\n}\n\nfunction localAdminUrlToLegacyUrl(shopAdminUrl: string) {\n  const localRegex = new RegExp(`admin\\\\.shop\\\\.dev/store/(.+)`);\n  const localMatches = shopAdminUrl.match(localRegex);\n\n  if (localMatches && localMatches.length === 2) {\n    const shopName = localMatches[1];\n    return `${shopName}.shop.dev`;\n  } else {\n    return null;\n  }\n}\n\nfunction spinLegacyUrlToAdminUrl(legacyAdminUrl: string) {\n  const spinRegex = new RegExp(`(.+)\\\\.shopify\\\\.(.+\\\\.spin\\\\.dev)`);\n  const spinMatches = legacyAdminUrl.match(spinRegex);\n\n  if (spinMatches && spinMatches.length === 3) {\n    const shopName = spinMatches[1];\n    const spinUrl = spinMatches[2];\n    return `admin.web.${spinUrl}/store/${shopName}`;\n  } else {\n    return null;\n  }\n}\n\nfunction localLegacyUrlToAdminUrl(legacyAdminUrl: string) {\n  const localRegex = new RegExp(`(.+)\\\\.shop\\\\.dev$`);\n  const localMatches = legacyAdminUrl.match(localRegex);\n\n  if (localMatches && localMatches.length === 2) {\n    const shopName = localMatches[1];\n    return `admin.shop.dev/store/${shopName}`;\n  } else {\n    return null;\n  }\n}\nfunction removeProtocol(url: string): string {\n  return url.replace(/^https?:\\/\\//, '').replace(/\\/$/, '');\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2102, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-validator.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/utils/shop-validator.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\nimport {InvalidHostError, InvalidShopError} from '../error';\nimport {decodeHost} from '../auth/decode-host';\n\nimport {shopAdminUrlToLegacyUrl} from './shop-admin-url-helper';\n\nexport function sanitizeShop(config: ConfigInterface) {\n  return (shop: string, throwOnInvalid = false): string | null => {\n    let shopUrl = shop;\n    const domainsRegex = [\n      'myshopify\\\\.com',\n      'shopify\\\\.com',\n      'myshopify\\\\.io',\n      'shop\\\\.dev',\n    ];\n    if (config.customShopDomains) {\n      domainsRegex.push(\n        ...config.customShopDomains.map((regex) =>\n          typeof regex === 'string' ? regex : regex.source,\n        ),\n      );\n    }\n\n    const shopUrlRegex = new RegExp(\n      `^[a-zA-Z0-9][a-zA-Z0-9-_]*\\\\.(${domainsRegex.join('|')})[/]*$`,\n    );\n\n    const shopAdminRegex = new RegExp(\n      `^admin\\\\.(${domainsRegex.join('|')})/store/([a-zA-Z0-9][a-zA-Z0-9-_]*)$`,\n    );\n\n    const isShopAdminUrl = shopAdminRegex.test(shopUrl);\n    if (isShopAdminUrl) {\n      shopUrl = shopAdminUrlToLegacyUrl(shopUrl) || '';\n    }\n\n    const sanitizedShop = shopUrlRegex.test(shopUrl) ? shopUrl : null;\n    if (!sanitizedShop && throwOnInvalid) {\n      throw new InvalidShopError('Received invalid shop argument');\n    }\n\n    return sanitizedShop;\n  };\n}\n\nexport function sanitizeHost() {\n  return (host: string, throwOnInvalid = false): string | null => {\n    const base64regex = /^[0-9a-zA-Z+/]+={0,2}$/;\n\n    let sanitizedHost = base64regex.test(host) ? host : null;\n    if (sanitizedHost) {\n      const {hostname} = new URL(`https://${decodeHost(sanitizedHost)}`);\n\n      const originsRegex = [\n        'myshopify\\\\.com',\n        'shopify\\\\.com',\n        'myshopify\\\\.io',\n        'spin\\\\.dev',\n        'shop\\\\.dev',\n      ];\n\n      const hostRegex = new RegExp(`\\\\.(${originsRegex.join('|')})$`);\n      if (!hostRegex.test(hostname)) {\n        sanitizedHost = null;\n      }\n    }\n    if (!sanitizedHost && throwOnInvalid) {\n      throw new InvalidHostError('Received invalid host argument');\n    }\n\n    return sanitizedHost;\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAMM,SAAU,YAAY,CAAC,MAAuB,EAAA;IAClD,OAAO,CAAC,IAAY,EAAE,cAAc,GAAG,KAAK,KAAmB;QAC7D,IAAI,OAAO,GAAG,IAAI;QAClB,MAAM,YAAY,GAAG;YACnB,iBAAiB;YACjB,eAAe;YACf,gBAAgB;YAChB,YAAY;SACb;QACD,IAAI,MAAM,CAAC,iBAAiB,EAAE;YAC5B,YAAY,CAAC,IAAI,CACf,GAAG,MAAM,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,KAAK,GACpC,OAAO,KAAK,KAAK,QAAQ,GAAG,KAAK,GAAG,KAAK,CAAC,MAAM,CACjD,CACF;QACH;QAEA,MAAM,YAAY,GAAG,IAAI,MAAM,CAC7B,CAAA,8BAAA,EAAiC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA,MAAA,CAAQ,CAChE;QAED,MAAM,cAAc,GAAG,IAAI,MAAM,CAC/B,CAAA,UAAA,EAAa,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA,oCAAA,CAAsC,CAC1E;QAED,MAAM,cAAc,GAAG,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC;QACnD,IAAI,cAAc,EAAE;YAClB,OAAO,OAAG,0OAAuB,EAAC,OAAO,CAAC,IAAI,EAAE;QAClD;QAEA,MAAM,aAAa,GAAG,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,OAAO,GAAG,IAAI;QACjE,IAAI,CAAC,aAAa,IAAI,cAAc,EAAE;YACpC,MAAM,IAAI,iMAAgB,CAAC,gCAAgC,CAAC;QAC9D;QAEA,OAAO,aAAa;IACtB,CAAC;AACH;SAEgB,YAAY,GAAA;IAC1B,OAAO,CAAC,IAAY,EAAE,cAAc,GAAG,KAAK,KAAmB;QAC7D,MAAM,WAAW,GAAG,wBAAwB;QAE5C,IAAI,aAAa,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,IAAI;QACxD,IAAI,aAAa,EAAE;YACjB,MAAM,EAAC,QAAQ,EAAC,GAAG,IAAI,GAAG,CAAC,CAAA,QAAA,MAAW,4MAAU,EAAC,aAAa,CAAC,CAAA,CAAE,CAAC;YAElE,MAAM,YAAY,GAAG;gBACnB,iBAAiB;gBACjB,eAAe;gBACf,gBAAgB;gBAChB,YAAY;gBACZ,YAAY;aACb;YAED,MAAM,SAAS,GAAG,IAAI,MAAM,CAAC,CAAA,IAAA,EAAO,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA,EAAA,CAAI,CAAC;YAC/D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;gBAC7B,aAAa,GAAG,IAAI;YACtB;QACF;QACA,IAAI,CAAC,aAAa,IAAI,cAAc,EAAE;YACpC,MAAM,IAAI,iMAAgB,CAAC,gCAAgC,CAAC;QAC9D;QAEA,OAAO,aAAa;IACtB,CAAC;AACH"}},
    {"offset": {"line": 2169, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/types.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/clients/types.ts"],"sourcesContent":["import {\n  AllOperations,\n  ApiClientRequestOptions,\n  SearchParams,\n} from '@shopify/admin-api-client';\n\nimport {Session} from '../session/session';\nimport type {ApiVersion, Method} from '../types';\nimport {Headers} from '../../runtime/http';\n\nimport {GraphqlClient} from './admin/graphql/client';\nimport {StorefrontClient} from './storefront/client';\nimport type {GraphqlProxy} from './graphql_proxy/types';\nimport {RestClient} from './admin/rest/client';\n\nexport * from './admin/types';\nexport * from './graphql_proxy/types';\n\nexport interface ClientArgs {\n  session: Session;\n  apiVersion?: ApiVersion;\n  retries?: number;\n}\n\n/**\n * Headers to be sent with the request.\n */\nexport type HeaderParams = Record<string, string | number | string[]>;\n\n/* eslint-disable @shopify/typescript/prefer-pascal-case-enums */\nexport enum DataType {\n  JSON = 'application/json',\n  GraphQL = 'application/graphql',\n  URLEncoded = 'application/x-www-form-urlencoded',\n}\n\n/* eslint-enable @shopify/typescript/prefer-pascal-case-enums */\n\nexport interface GetRequestParams {\n  /**\n   * The path to the resource, relative to the API version root.\n   */\n  path: string;\n  /**\n   * The type of data expected in the response.\n   */\n  type?: DataType;\n  /**\n   * The request body.\n   */\n  data?: Record<string, any> | string;\n  /**\n   * Query parameters to be sent with the request.\n   */\n  query?: SearchParams;\n  /**\n   * Additional headers to be sent with the request.\n   */\n  extraHeaders?: HeaderParams;\n  /**\n   * The maximum number of times the request can be made if it fails with a throttling or server error.\n   */\n  tries?: number;\n}\n\nexport type PostRequestParams = GetRequestParams & {\n  data: Record<string, any> | string;\n};\n\nexport type PutRequestParams = PostRequestParams;\n\nexport type DeleteRequestParams = GetRequestParams;\n\nexport type RequestParams = (GetRequestParams | PostRequestParams) & {\n  method: Method;\n};\n\nexport interface RequestReturn<T = unknown> {\n  /**\n   * The response body.\n   */\n  body: T;\n  /**\n   * The response headers.\n   */\n  headers: Headers;\n}\n\nexport type GraphqlParams = Omit<PostRequestParams, 'path' | 'type'>;\n\nexport interface GraphqlClientParams {\n  session: Session;\n  apiVersion?: ApiVersion;\n}\n\nexport interface GraphqlQueryOptions<\n  Operation extends keyof Operations,\n  Operations extends AllOperations,\n> {\n  /**\n   * The variables to include in the operation.\n   */\n  variables?: ApiClientRequestOptions<Operation, Operations>['variables'];\n  /**\n   * Additional headers to be sent with the request.\n   */\n  headers?: Record<string, string | number>;\n  /**\n   * The maximum number of times to retry the request if it fails with a throttling or server error.\n   */\n  retries?: number;\n  /**\n   * An optional AbortSignal to cancel the request.\n   */\n  signal?: AbortSignal;\n}\n\nexport {GraphqlClient} from './admin/graphql/client';\nexport {RestClient} from './admin/rest/client';\n\nexport interface ShopifyClients {\n  Rest: typeof RestClient;\n  Graphql: typeof GraphqlClient;\n  Storefront: typeof StorefrontClient;\n  graphqlProxy: GraphqlProxy;\n}\n"],"names":[],"mappings":";;;;;;;;;;AA6BA,+DAAA,OACY;AAAZ,CAAA,SAAY,QAAQ,EAAA;IAClB,QAAA,CAAA,MAAA,CAAA,GAAA,kBAAyB;IACzB,QAAA,CAAA,SAAA,CAAA,GAAA,qBAA+B;IAC/B,QAAA,CAAA,YAAA,CAAA,GAAA,mCAAgD;AAClD,CAAC,EAJW,QAAQ,IAAA,CAAR,QAAQ,GAAA,CAAA,CAAA,CAAA,CAAA"}},
    {"offset": {"line": 2191, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/fetch-request.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/utils/fetch-request.ts"],"sourcesContent":["import {logger} from '../logger';\nimport {LogSeverity} from '../types';\nimport {abstractFetch} from '../../runtime';\nimport {ConfigInterface} from '../base-types';\n\nexport function fetchRequestFactory(config: ConfigInterface) {\n  return async function fetchRequest(\n    url: string,\n    options?: RequestInit,\n  ): Promise<Response> {\n    const log = logger(config);\n    const doLog =\n      config.logger.httpRequests && config.logger.level === LogSeverity.Debug;\n\n    if (doLog) {\n      log.debug('Making HTTP request', {\n        method: options?.method || 'GET',\n        url,\n        ...(options?.body && {body: options?.body}),\n      });\n    }\n\n    const response = await abstractFetch(url, options);\n\n    if (doLog) {\n      log.debug('HTTP request completed', {\n        method: options?.method || 'GET',\n        url,\n        status: response.status,\n      });\n    }\n\n    return response;\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;AAKM,SAAU,mBAAmB,CAAC,MAAuB,EAAA;IACzD,OAAO,eAAe,YAAY,CAChC,GAAW,EACX,OAAqB,EAAA;QAErB,MAAM,GAAG,OAAG,iMAAM,EAAC,MAAM,CAAC;QAC1B,MAAM,KAAK,GACT,MAAM,CAAC,MAAM,CAAC,YAAY,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,KAAK,4LAAW,CAAC,KAAK;QAEzE,IAAI,KAAK,EAAE;YACT,GAAG,CAAC,KAAK,CAAC,qBAAqB,EAAE;gBAC/B,MAAM,EAAE,OAAO,EAAE,MAAM,IAAI,KAAK;gBAChC,GAAG;gBACH,GAAI,OAAO,EAAE,IAAI,IAAI;oBAAC,IAAI,EAAE,OAAO,EAAE,IAAI;gBAAA,CAAC,CAAC;YAC5C,CAAA,CAAC;QACJ;QAEA,MAAM,QAAQ,GAAG,UAAM,0MAAa,EAAC,GAAG,EAAE,OAAO,CAAC;QAElD,IAAI,KAAK,EAAE;YACT,GAAG,CAAC,KAAK,CAAC,wBAAwB,EAAE;gBAClC,MAAM,EAAE,OAAO,EAAE,MAAM,IAAI,KAAK;gBAChC,GAAG;gBACH,MAAM,EAAE,QAAQ,CAAC,MAAM;YACxB,CAAA,CAAC;QACJ;QAEA,OAAO,QAAQ;IACjB,CAAC;AACH"}},
    {"offset": {"line": 2231, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/types.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/oauth/types.ts"],"sourcesContent":["import {AdapterArgs} from '../../../runtime/http/types';\n\nexport const SESSION_COOKIE_NAME = 'shopify_app_session';\nexport const STATE_COOKIE_NAME = 'shopify_app_state';\n\nexport interface AuthQuery {\n  [key: string]: string | undefined;\n  hmac?: string;\n  signature?: string;\n}\n\nexport interface BeginParams extends AdapterArgs {\n  /**\n   * The shop domain. For example: `{exampleshop}.myshopify.com`.\n   */\n  shop: string;\n  /**\n   * The path to the callback endpoint, with a leading `/`.\n   * This URL must be allowed in the Partners dashboard, or using the CLI to run your app.\n   */\n  callbackPath: string;\n  /**\n   * Defines if the session is online or offline.\n   * Learn more about [OAuth access modes](https://shopify.dev/docs/apps/auth/oauth/access-modes).\n   */\n  isOnline: boolean;\n}\n\nexport interface CallbackParams extends AdapterArgs {\n  /**\n   * Whether the access token should be expiring. Defaults to false.\n   * Learn more about [Expiring Access Tokens](https://shopify.dev/docs/apps/auth/oauth/access-modes#expiring-access-tokens).\n   */\n  expiring?: boolean;\n}\n\nexport interface AccessTokenResponse {\n  access_token: string;\n  scope: string;\n}\n\nexport interface OnlineAccessInfo {\n  /**\n   * How long the access token is valid for, in seconds.\n   */\n  expires_in: number;\n  /**\n   * The effective set of scopes for the session.\n   */\n  associated_user_scope: string;\n  /**\n   * The user associated with the access token.\n   */\n  associated_user: OnlineAccessUser;\n}\n\nexport interface OfflineAccessInfo {\n  /**\n   * How long the access token is valid for, in seconds.\n   */\n  expires_in?: number;\n  /**\n   * The refresh token for the session.\n   */\n  refresh_token?: string;\n  /**\n   * How long the refresh token is valid for, in seconds.\n   */\n  refresh_token_expires_in?: number;\n}\n\nexport interface OnlineAccessUser {\n  /**\n   * The user's ID.\n   */\n  id: number;\n  /**\n   * The user's first name.\n   */\n  first_name: string;\n  /**\n   * The user's last name.\n   */\n  last_name: string;\n  /**\n   * The user's email address.\n   */\n  email: string;\n  /**\n   * Whether the user has verified their email address.\n   */\n  email_verified: boolean;\n  /**\n   * Whether the user is the account owner.\n   */\n  account_owner: boolean;\n  /**\n   * The user's locale.\n   */\n  locale: string;\n  /**\n   * Whether the user is a collaborator.\n   */\n  collaborator: boolean;\n}\n\nexport interface OnlineAccessResponse\n  extends AccessTokenResponse,\n    OnlineAccessInfo {}\n\nexport interface OfflineAccessResponse\n  extends AccessTokenResponse,\n    OfflineAccessInfo {}\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,mBAAmB,GAAG;AAC5B,MAAM,iBAAiB,GAAG"}},
    {"offset": {"line": 2245, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/nonce.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/oauth/nonce.ts"],"sourcesContent":["export type Nonce = () => string;\n\nexport function nonce(): string {\n  const length = 15;\n\n  const bytes = crypto.getRandomValues(new Uint8Array(length));\n\n  const nonce = bytes\n    .map((byte: number) => {\n      return byte % 10;\n    })\n    .join('');\n\n  return nonce;\n}\n"],"names":[],"mappings":";;;;SAEgB,KAAK,GAAA;IACnB,MAAM,MAAM,GAAG,EAAE;IAEjB,MAAM,KAAK,GAAG,MAAM,CAAC,eAAe,CAAC,IAAI,UAAU,CAAC,MAAM,CAAC,CAAC;IAE5D,MAAM,KAAK,GAAG,MACX,GAAG,CAAC,CAAC,IAAY,KAAI;QACpB,OAAO,IAAI,GAAG,EAAE;IAClB,CAAC,EACA,IAAI,CAAC,EAAE,CAAC;IAEX,OAAO,KAAK;AACd"}},
    {"offset": {"line": 2263, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/session.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/session/session.ts"],"sourcesContent":["/* eslint-disable no-fallthrough */\nimport {InvalidSession} from '../error';\nimport {OnlineAccessInfo} from '../auth/oauth/types';\nimport {AuthScopes} from '../auth/scopes';\n\nimport {SessionParams} from './types';\n\nconst propertiesToSave = [\n  'id',\n  'shop',\n  'state',\n  'isOnline',\n  'scope',\n  'accessToken',\n  'expires',\n  'refreshToken',\n  'refreshTokenExpires',\n  'onlineAccessInfo',\n];\n\n/**\n * Stores App information from logged in merchants so they can make authenticated requests to the Admin API.\n */\nexport class Session {\n  public static fromPropertyArray(\n    entries: [string, string | number | boolean][],\n    returnUserData = false,\n  ): Session {\n    if (!Array.isArray(entries)) {\n      throw new InvalidSession(\n        'The parameter is not an array: a Session cannot be created from this object.',\n      );\n    }\n\n    const obj = Object.fromEntries(\n      entries\n        .filter(([_key, value]) => value !== null && value !== undefined)\n        // Sanitize keys\n        .map(([key, value]) => {\n          switch (key.toLowerCase()) {\n            case 'isonline':\n              return ['isOnline', value];\n            case 'accesstoken':\n              return ['accessToken', value];\n            case 'refreshtoken':\n              return ['refreshToken', value];\n            case 'refreshtokenexpires':\n              return ['refreshTokenExpires', value];\n            case 'onlineaccessinfo':\n              return ['onlineAccessInfo', value];\n            case 'userid':\n              return ['userId', value];\n            case 'firstname':\n              return ['firstName', value];\n            case 'lastname':\n              return ['lastName', value];\n            case 'accountowner':\n              return ['accountOwner', value];\n            case 'emailverified':\n              return ['emailVerified', value];\n            default:\n              return [key.toLowerCase(), value];\n          }\n        }),\n    );\n\n    const sessionData = {} as SessionParams;\n    const onlineAccessInfo = {\n      associated_user: {},\n    } as OnlineAccessInfo;\n    Object.entries(obj).forEach(([key, value]) => {\n      switch (key) {\n        case 'isOnline':\n          if (typeof value === 'string') {\n            sessionData[key] = value.toString().toLowerCase() === 'true';\n          } else if (typeof value === 'number') {\n            sessionData[key] = Boolean(value);\n          } else {\n            sessionData[key] = value;\n          }\n          break;\n        case 'scope':\n          sessionData[key] = value.toString();\n          break;\n        case 'expires':\n          sessionData[key] = value ? new Date(Number(value)) : undefined;\n          break;\n        case 'refreshToken':\n          sessionData[key] = value ? String(value) : undefined;\n          break;\n        case 'refreshTokenExpires':\n          sessionData[key] = value ? new Date(Number(value)) : undefined;\n          break;\n        case 'onlineAccessInfo':\n          onlineAccessInfo.associated_user.id = Number(value);\n          break;\n        case 'userId':\n          if (returnUserData) {\n            onlineAccessInfo.associated_user.id = Number(value);\n            break;\n          }\n        case 'firstName':\n          if (returnUserData) {\n            onlineAccessInfo.associated_user.first_name = String(value);\n            break;\n          }\n        case 'lastName':\n          if (returnUserData) {\n            onlineAccessInfo.associated_user.last_name = String(value);\n            break;\n          }\n        case 'email':\n          if (returnUserData) {\n            onlineAccessInfo.associated_user.email = String(value);\n            break;\n          }\n        case 'accountOwner':\n          if (returnUserData) {\n            onlineAccessInfo.associated_user.account_owner = Boolean(value);\n            break;\n          }\n        case 'locale':\n          if (returnUserData) {\n            onlineAccessInfo.associated_user.locale = String(value);\n            break;\n          }\n        case 'collaborator':\n          if (returnUserData) {\n            onlineAccessInfo.associated_user.collaborator = Boolean(value);\n            break;\n          }\n        case 'emailVerified':\n          if (returnUserData) {\n            onlineAccessInfo.associated_user.email_verified = Boolean(value);\n            break;\n          }\n        // Return any user keys as passed in\n        default:\n          sessionData[key] = value;\n      }\n    });\n    if (sessionData.isOnline) {\n      sessionData.onlineAccessInfo = onlineAccessInfo;\n    }\n    const session = new Session(sessionData);\n    return session;\n  }\n\n  /**\n   * The unique identifier for the session.\n   */\n  readonly id: string;\n  /**\n   * The Shopify shop domain, such as `example.myshopify.com`.\n   */\n  public shop: string;\n  /**\n   * The state of the session. Used for the OAuth authentication code flow.\n   */\n  public state: string;\n  /**\n   * Whether the access token in the session is online or offline.\n   */\n  public isOnline: boolean;\n  /**\n   * The desired scopes for the access token, at the time the session was created.\n   */\n  public scope?: string;\n  /**\n   * The date the access token expires.\n   */\n  public expires?: Date;\n  /**\n   * The access token for the session.\n   */\n  public accessToken?: string;\n  /**\n   * The refresh token for the session.\n   */\n  public refreshToken?: string;\n  /**\n   * The date the refresh token expires.\n   */\n  public refreshTokenExpires?: Date;\n  /**\n   * Information on the user for the session. Only present for online sessions.\n   */\n  public onlineAccessInfo?: OnlineAccessInfo;\n\n  constructor(params: SessionParams) {\n    Object.assign(this, params);\n  }\n\n  /**\n   * Whether the session is active. Active sessions have an access token that is not expired, and has has the given\n   * scopes if scopes is equal to a truthy value.\n   */\n  public isActive(\n    scopes: AuthScopes | string | string[] | undefined,\n    withinMillisecondsOfExpiry = 500,\n  ): boolean {\n    const hasAccessToken = Boolean(this.accessToken);\n    const isTokenNotExpired = !this.isExpired(withinMillisecondsOfExpiry);\n    const isScopeChanged = this.isScopeChanged(scopes);\n    return !isScopeChanged && hasAccessToken && isTokenNotExpired;\n  }\n\n  /**\n   * Whether the access token includes the given scopes if they are provided.\n   */\n  public isScopeChanged(\n    scopes: AuthScopes | string | string[] | undefined,\n  ): boolean {\n    if (typeof scopes === 'undefined') {\n      return false;\n    }\n\n    return !this.isScopeIncluded(scopes);\n  }\n\n  /**\n   * Whether the access token includes the given scopes.\n   */\n  public isScopeIncluded(scopes: AuthScopes | string | string[]): boolean {\n    const requiredScopes =\n      scopes instanceof AuthScopes ? scopes : new AuthScopes(scopes);\n    const sessionScopes = new AuthScopes(this.scope);\n\n    return sessionScopes.has(requiredScopes);\n  }\n\n  /**\n   * Whether the access token is expired.\n   */\n  public isExpired(withinMillisecondsOfExpiry = 0): boolean {\n    return Boolean(\n      this.expires &&\n        this.expires.getTime() - withinMillisecondsOfExpiry < Date.now(),\n    );\n  }\n\n  /**\n   * Converts an object with data into a Session.\n   */\n  public toObject(): SessionParams {\n    const object: SessionParams = {\n      id: this.id,\n      shop: this.shop,\n      state: this.state,\n      isOnline: this.isOnline,\n    };\n\n    if (this.scope) {\n      object.scope = this.scope;\n    }\n    if (this.expires) {\n      object.expires = this.expires;\n    }\n    if (this.accessToken) {\n      object.accessToken = this.accessToken;\n    }\n    if (this.refreshToken) {\n      object.refreshToken = this.refreshToken;\n    }\n    if (this.refreshTokenExpires) {\n      object.refreshTokenExpires = this.refreshTokenExpires;\n    }\n    if (this.onlineAccessInfo) {\n      object.onlineAccessInfo = this.onlineAccessInfo;\n    }\n    return object;\n  }\n\n  /**\n   * Checks whether the given session is equal to this session.\n   */\n  public equals(other: Session | undefined): boolean {\n    if (!other) return false;\n\n    const mandatoryPropsMatch =\n      this.id === other.id &&\n      this.shop === other.shop &&\n      this.state === other.state &&\n      this.isOnline === other.isOnline;\n\n    if (!mandatoryPropsMatch) return false;\n\n    const copyA = this.toPropertyArray(true);\n    copyA.sort(([k1], [k2]) => (k1 < k2 ? -1 : 1));\n\n    const copyB = other.toPropertyArray(true);\n    copyB.sort(([k1], [k2]) => (k1 < k2 ? -1 : 1));\n\n    return JSON.stringify(copyA) === JSON.stringify(copyB);\n  }\n\n  /**\n   * Converts the session into an array of key-value pairs.\n   */\n  public toPropertyArray(\n    returnUserData = false,\n  ): [string, string | number | boolean][] {\n    return (\n      Object.entries(this)\n        .filter(\n          ([key, value]) =>\n            propertiesToSave.includes(key) &&\n            value !== undefined &&\n            value !== null,\n        )\n        // Prepare values for db storage\n        .flatMap(([key, value]): [string, string | number | boolean][] => {\n          switch (key) {\n            case 'expires':\n              return [[key, value ? value.getTime() : undefined]];\n            case 'refreshTokenExpires':\n              return [[key, value ? value.getTime() : undefined]];\n            case 'onlineAccessInfo':\n              // eslint-disable-next-line no-negated-condition\n              if (!returnUserData) {\n                return [[key, value.associated_user.id]];\n              } else {\n                return [\n                  ['userId', value?.associated_user?.id],\n                  ['firstName', value?.associated_user?.first_name],\n                  ['lastName', value?.associated_user?.last_name],\n                  ['email', value?.associated_user?.email],\n                  ['locale', value?.associated_user?.locale],\n                  ['emailVerified', value?.associated_user?.email_verified],\n                  ['accountOwner', value?.associated_user?.account_owner],\n                  ['collaborator', value?.associated_user?.collaborator],\n                ];\n              }\n            default:\n              return [[key, value]];\n          }\n        })\n        // Filter out tuples with undefined values\n        .filter(([_key, value]) => value !== undefined)\n    );\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2617, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/get-hmac-key.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/utils/get-hmac-key.ts"],"sourcesContent":["export function getHMACKey(key: string): Uint8Array {\n  const arrayBuffer = new Uint8Array(key.length);\n  for (let i = 0, keyLen = key.length; i < keyLen; i++) {\n    arrayBuffer[i] = key.charCodeAt(i);\n  }\n\n  return arrayBuffer;\n}\n"],"names":[],"mappings":";;;;AAAM,SAAU,UAAU,CAAC,GAAW,EAAA;IACpC,MAAM,WAAW,GAAG,IAAI,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC;IAC9C,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,MAAM,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,CAAE;QACpD,WAAW,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;IACpC;IAEA,OAAO,WAAW;AACpB"}},
    {"offset": {"line": 2634, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/decode-session-token.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/session/decode-session-token.ts"],"sourcesContent":["import * as jose from 'jose';\n\nimport {ConfigInterface} from '../base-types';\nimport * as ShopifyErrors from '../error';\nimport {getHMACKey} from '../utils/get-hmac-key';\n\nimport {JwtPayload} from './types';\n\nconst JWT_PERMITTED_CLOCK_TOLERANCE = 10;\n\nexport interface DecodeSessionTokenOptions {\n  checkAudience?: boolean;\n}\n\nexport function decodeSessionToken(config: ConfigInterface) {\n  return async (\n    token: string,\n    {checkAudience = true}: DecodeSessionTokenOptions = {},\n  ): Promise<JwtPayload> => {\n    let payload: JwtPayload;\n    try {\n      payload = (\n        await jose.jwtVerify(token, getHMACKey(config.apiSecretKey), {\n          algorithms: ['HS256'],\n          clockTolerance: JWT_PERMITTED_CLOCK_TOLERANCE,\n        })\n      ).payload as unknown as JwtPayload;\n    } catch (error) {\n      throw new ShopifyErrors.InvalidJwtError(\n        `Failed to parse session token '${token}': ${error.message}`,\n      );\n    }\n\n    // The exp and nbf fields are validated by the JWT library\n\n    if (checkAudience && payload.aud !== config.apiKey) {\n      throw new ShopifyErrors.InvalidJwtError(\n        'Session token had invalid API key',\n      );\n    }\n\n    return payload;\n  };\n}\n"],"names":["ShopifyErrors.InvalidJwtError"],"mappings":";;;;;;;;;;AAQA,MAAM,6BAA6B,GAAG,EAAE;AAMlC,SAAU,kBAAkB,CAAC,MAAuB,EAAA;IACxD,OAAO,OACL,KAAa,EACb,EAAC,aAAa,GAAG,IAAI,EAAA,GAA+B,CAAA,CAAE,KAC/B;QACvB,IAAI,OAAmB;QACvB,IAAI;YACF,OAAO,GAAG,CACR,MAAM,IAAI,CAAC,sKAAS,CAAC,KAAK,MAAE,iNAAU,EAAC,MAAM,CAAC,YAAY,CAAC,EAAE;gBAC3D,UAAU,EAAE;oBAAC,OAAO;iBAAC;gBACrB,cAAc,EAAE,6BAA6B;aAC9C,CAAC,EACF,OAAgC;QACpC,EAAE,OAAO,KAAK,EAAE;YACd,MAAM,IAAIA,gMAA6B,CACrC,CAAA,+BAAA,EAAkC,KAAK,CAAA,GAAA,EAAM,KAAK,CAAC,OAAO,CAAA,CAAE,CAC7D;QACH;;QAIA,IAAI,aAAa,IAAI,OAAO,CAAC,GAAG,KAAK,MAAM,CAAC,MAAM,EAAE;YAClD,MAAM,IAAIA,gMAA6B,CACrC,mCAAmC,CACpC;QACH;QAEA,OAAO,OAAO;IAChB,CAAC;AACH"}},
    {"offset": {"line": 2671, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/utils.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/runtime/http/utils.ts"],"sourcesContent":["export function splitN(\n  str: string,\n  sep: string,\n  maxNumParts: number,\n): string[] {\n  const parts = str.split(sep);\n  const maxParts = Math.min(Math.abs(maxNumParts), parts.length);\n\n  return [...parts.slice(0, maxParts - 1), parts.slice(maxParts - 1).join(sep)];\n}\n"],"names":[],"mappings":";;;;SAAgB,MAAM,CACpB,GAAW,EACX,GAAW,EACX,WAAmB,EAAA;IAEnB,MAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC;IAC5B,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC;IAE9D,OAAO,CAAC;WAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,QAAQ,GAAG,CAAC,CAAC;QAAE,KAAK,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;KAAC;AAC/E"}},
    {"offset": {"line": 2689, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/cookies.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/runtime/http/cookies.ts"],"sourcesContent":["// import type {Headers} from \"./headers\";\nimport {createSHA256HMAC} from '../crypto/utils';\n\nimport {splitN} from './utils';\nimport {getHeader, getHeaders, removeHeader, addHeader} from './headers';\n\nimport type {NormalizedRequest, NormalizedResponse} from '.';\n\nexport interface CookieData {\n  name: string;\n  value: string;\n  /**\n   * a number representing the milliseconds from Date.now() for expiry\n   */\n  maxAge?: number;\n  /**\n   * a Date object indicating the cookie's expiration\n   * date (expires at the end of session by default).\n   */\n  expires?: Date;\n  /**\n   * a string indicating the path of the cookie (/ by default).\n   */\n  path?: string;\n  /**\n   * a string indicating the domain of the cookie (no default).\n   */\n  domain?: string;\n  /**\n   * a boolean indicating whether the cookie is only to be sent\n   * over HTTPS (false by default for HTTP, true by default for HTTPS).\n   */\n  secure?: boolean;\n  /**\n   * a boolean indicating whether the cookie is only to be sent over HTTP(S),\n   * and not made available to client JavaScript (true by default).\n   */\n  httpOnly?: boolean;\n  /**\n   * a boolean or string indicating whether the cookie is a \"same site\" cookie (false by default).\n   * This can be set to 'strict', 'lax', or true (which maps to 'strict').\n   */\n  sameSite?: 'strict' | 'lax' | 'none';\n}\n\nexport type CookieJar = Record<string, CookieData>;\ninterface CookiesOptions {\n  keys: string[];\n  // Ignored. Only for type-compatibility with the node package for now.\n  secure: boolean;\n}\nexport class Cookies {\n  static parseCookies(hdrs: string[]): CookieJar {\n    const entries = hdrs\n      .filter((hdr) => hdr.trim().length > 0)\n      .map((cookieDef) => {\n        const [keyval, ...opts] = cookieDef.split(';');\n        const [name, value] = splitN(keyval, '=', 2).map((value) =>\n          value.trim(),\n        );\n        return [\n          name,\n          {\n            name,\n            value,\n            ...Object.fromEntries(\n              opts.map((opt) =>\n                splitN(opt, '=', 2).map((value) => value.trim()),\n              ),\n            ),\n          },\n        ];\n      });\n    const jar = Object.fromEntries(entries) as CookieJar;\n    for (const cookie of Object.values(jar)) {\n      if (typeof cookie.expires === 'string') {\n        cookie.expires = new Date(cookie.expires);\n      }\n    }\n    return jar;\n  }\n\n  static encodeCookie(data: CookieData): string {\n    let result = '';\n    result += `${data.name}=${data.value};`;\n    result += Object.entries(data)\n      .filter(([key]) => !['name', 'value', 'expires'].includes(key))\n      .map(([key, value]) => `${key}=${value}`)\n      .join('; ');\n    if (data.expires) {\n      result += ';';\n      result += `expires=${data.expires.toUTCString()}`;\n    }\n    return result;\n  }\n\n  receivedCookieJar: CookieJar = {};\n  outgoingCookieJar: CookieJar = {};\n  private keys: string[] = [];\n\n  constructor(\n    request: NormalizedRequest,\n    public response: NormalizedResponse,\n    {keys = []}: Partial<CookiesOptions> = {},\n  ) {\n    if (keys) this.keys = keys;\n\n    const cookieReqHdr = getHeader(request.headers, 'Cookie') ?? '';\n    this.receivedCookieJar = Cookies.parseCookies(cookieReqHdr.split(';'));\n    const cookieResHdr = getHeaders(response.headers, 'Set-Cookie') ?? [];\n    this.outgoingCookieJar = Cookies.parseCookies(cookieResHdr);\n  }\n\n  toHeaders(): string[] {\n    return Object.values(this.outgoingCookieJar).map((cookie) =>\n      Cookies.encodeCookie(cookie),\n    );\n  }\n\n  updateHeader() {\n    if (!this.response.headers) {\n      this.response.headers = {};\n    }\n    removeHeader(this.response.headers, 'Set-Cookie');\n    this.toHeaders().map((hdr) =>\n      addHeader(this.response.headers!, 'Set-Cookie', hdr),\n    );\n  }\n\n  get(name: string): string | undefined {\n    return this.receivedCookieJar[name]?.value;\n  }\n\n  deleteCookie(name: string) {\n    this.set(name, '', {\n      path: '/',\n      expires: new Date(0),\n    });\n  }\n\n  async getAndVerify(name: string): Promise<string | undefined> {\n    const value = this.get(name);\n    if (!value) return undefined;\n    if (!(await this.isSignedCookieValid(name))) {\n      return undefined;\n    }\n    return value;\n  }\n\n  private get canSign() {\n    return this.keys?.length > 0;\n  }\n\n  set(name: string, value: string, opts: Partial<CookieData> = {}): void {\n    this.outgoingCookieJar[name] = {\n      ...opts,\n      name,\n      value,\n    };\n    this.updateHeader();\n  }\n\n  async setAndSign(\n    name: string,\n    value: string,\n    opts: Partial<CookieData> = {},\n  ): Promise<void> {\n    if (!this.canSign) {\n      throw Error('No keys provided for signing.');\n    }\n    this.set(name, value, opts);\n    const sigName = `${name}.sig`;\n    const signature = await createSHA256HMAC(this.keys[0], value);\n    this.set(sigName, signature, opts);\n    this.updateHeader();\n  }\n\n  async isSignedCookieValid(cookieName: string): Promise<boolean> {\n    const signedCookieName = `${cookieName}.sig`;\n    if (\n      !this.cookieExists(cookieName) ||\n      !this.cookieExists(signedCookieName)\n    ) {\n      this.deleteInvalidCookies(cookieName, signedCookieName);\n      return false;\n    }\n    const cookieValue = this.get(cookieName);\n    const signature = this.get(signedCookieName);\n\n    if (!cookieValue || !signature) {\n      this.deleteInvalidCookies(cookieName, signedCookieName);\n      return false;\n    }\n\n    const allCheckSignatures = await Promise.all(\n      this.keys.map((key) => createSHA256HMAC(key, cookieValue)),\n    );\n\n    if (!allCheckSignatures.includes(signature)) {\n      this.deleteInvalidCookies(cookieName, signedCookieName);\n      return false;\n    }\n\n    return true;\n  }\n\n  private cookieExists(cookieName: string) {\n    return Boolean(this.get(cookieName));\n  }\n\n  private deleteInvalidCookies(...cookieNames: string[]): void {\n    cookieNames.forEach((cookieName) => this.deleteCookie(cookieName));\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2828, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/session-utils.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/session/session-utils.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\nimport {SESSION_COOKIE_NAME} from '../auth/oauth/types';\nimport {\n  abstractConvertRequest,\n  Cookies,\n  NormalizedResponse,\n} from '../../runtime/http';\nimport {sanitizeShop} from '../utils/shop-validator';\nimport {logger} from '../logger';\nimport * as ShopifyErrors from '../error';\n\nimport {decodeSessionToken} from './decode-session-token';\nimport type {GetCurrentSessionIdParams} from './types';\nimport {Session} from './session';\n\nexport function getJwtSessionId(config: ConfigInterface) {\n  return (shop: string, userId: string): string => {\n    return `${sanitizeShop(config)(shop, true)}_${userId}`;\n  };\n}\n\nexport function getOfflineId(config: ConfigInterface) {\n  return (shop: string): string => {\n    return `offline_${sanitizeShop(config)(shop, true)}`;\n  };\n}\n\nexport function getCurrentSessionId(config: ConfigInterface) {\n  return async function getCurrentSessionId({\n    isOnline,\n    ...adapterArgs\n  }: GetCurrentSessionIdParams): Promise<string | undefined> {\n    const request = await abstractConvertRequest(adapterArgs);\n\n    const log = logger(config);\n\n    if (config.isEmbeddedApp) {\n      log.debug('App is embedded, looking for session id in JWT payload', {\n        isOnline,\n      });\n\n      const authHeader = request.headers.Authorization;\n      if (authHeader) {\n        const matches = (\n          typeof authHeader === 'string' ? authHeader : authHeader[0]\n        ).match(/^Bearer (.+)$/);\n        if (!matches) {\n          log.error('Missing Bearer token in authorization header', {isOnline});\n\n          throw new ShopifyErrors.MissingJwtTokenError(\n            'Missing Bearer token in authorization header',\n          );\n        }\n\n        const jwtPayload = await decodeSessionToken(config)(matches[1]);\n        const shop = jwtPayload.dest.replace(/^https:\\/\\//, '');\n\n        log.debug('Found valid JWT payload', {shop, isOnline});\n\n        if (isOnline) {\n          return getJwtSessionId(config)(shop, jwtPayload.sub);\n        } else {\n          return getOfflineId(config)(shop);\n        }\n      } else {\n        log.error(\n          'Missing Authorization header review App Bridge configuration',\n          {isOnline},\n        );\n      }\n    } else {\n      log.debug('App is not embedded, looking for session id in cookies', {\n        isOnline,\n      });\n\n      const cookies = new Cookies(request, {} as NormalizedResponse, {\n        keys: [config.apiSecretKey],\n      });\n      return cookies.getAndVerify(SESSION_COOKIE_NAME);\n    }\n\n    return undefined;\n  };\n}\n\nexport function customAppSession(config: ConfigInterface) {\n  return (shop: string): Session => {\n    return new Session({\n      id: '',\n      shop: `${sanitizeShop(config)(shop, true)}`,\n      state: '',\n      isOnline: false,\n    });\n  };\n}\n"],"names":["ShopifyErrors.MissingJwtTokenError"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAeM,SAAU,eAAe,CAAC,MAAuB,EAAA;IACrD,OAAO,CAAC,IAAY,EAAE,MAAc,KAAY;QAC9C,OAAO,CAAA,MAAG,kNAAY,EAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA,CAAA,EAAI,MAAM,EAAE;IACxD,CAAC;AACH;AAEM,SAAU,YAAY,CAAC,MAAuB,EAAA;IAClD,OAAO,CAAC,IAAY,KAAY;QAC9B,OAAO,CAAA,QAAA,MAAW,kNAAY,EAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA,CAAE;IACtD,CAAC;AACH;AAEM,SAAU,mBAAmB,CAAC,MAAuB,EAAA;IACzD,OAAO,eAAe,mBAAmB,CAAC,EACxC,QAAQ,EACR,GAAG,WAAW,EACY,EAAA;QAC1B,MAAM,OAAO,GAAG,UAAM,mNAAsB,EAAC,WAAW,CAAC;QAEzD,MAAM,GAAG,OAAG,iMAAM,EAAC,MAAM,CAAC;QAE1B,IAAI,MAAM,CAAC,aAAa,EAAE;YACxB,GAAG,CAAC,KAAK,CAAC,wDAAwD,EAAE;gBAClE,QAAQ;YACT,CAAA,CAAC;YAEF,MAAM,UAAU,GAAG,OAAO,CAAC,OAAO,CAAC,aAAa;YAChD,IAAI,UAAU,EAAE;gBACd,MAAM,OAAO,GAAG,CACd,OAAO,UAAU,KAAK,QAAQ,GAAG,UAAU,GAAG,UAAU,CAAC,CAAC,CAAC,EAC3D,KAAK,CAAC,eAAe,CAAC;gBACxB,IAAI,CAAC,OAAO,EAAE;oBACZ,GAAG,CAAC,KAAK,CAAC,8CAA8C,EAAE;wBAAC,QAAQ;oBAAA,CAAC,CAAC;oBAErE,MAAM,IAAIA,qMAAkC,CAC1C,8CAA8C,CAC/C;gBACH;gBAEA,MAAM,UAAU,GAAG,UAAM,mOAAkB,EAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;gBAC/D,MAAM,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;gBAEvD,GAAG,CAAC,KAAK,CAAC,yBAAyB,EAAE;oBAAC,IAAI;oBAAE,QAAQ;gBAAA,CAAC,CAAC;gBAEtD,IAAI,QAAQ,EAAE;oBACZ,OAAO,eAAe,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,UAAU,CAAC,GAAG,CAAC;gBACtD,OAAO;oBACL,OAAO,YAAY,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;gBACnC;YACF,OAAO;gBACL,GAAG,CAAC,KAAK,CACP,8DAA8D,EAC9D;oBAAC,QAAQ;gBAAA,CAAC,CACX;YACH;QACF,OAAO;YACL,GAAG,CAAC,KAAK,CAAC,wDAAwD,EAAE;gBAClE,QAAQ;YACT,CAAA,CAAC;YAEF,MAAM,OAAO,GAAG,IAAI,sMAAO,CAAC,OAAO,EAAE,CAAA,CAAwB,EAAE;gBAC7D,IAAI,EAAE;oBAAC,MAAM,CAAC,YAAY;iBAAC;YAC5B,CAAA,CAAC;YACF,OAAO,OAAO,CAAC,YAAY,CAAC,qNAAmB,CAAC;QAClD;QAEA,OAAO,SAAS;IAClB,CAAC;AACH;AAEM,SAAU,gBAAgB,CAAC,MAAuB,EAAA;IACtD,OAAO,CAAC,IAAY,KAAa;QAC/B,OAAO,IAAI,qMAAO,CAAC;YACjB,EAAE,EAAE,EAAE;YACN,IAAI,EAAE,CAAA,MAAG,kNAAY,EAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA,CAAE;YAC3C,KAAK,EAAE,EAAE;YACT,QAAQ,EAAE,KAAK;QAChB,CAAA,CAAC;IACJ,CAAC;AACH"}},
    {"offset": {"line": 2927, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/create-session.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/oauth/create-session.ts"],"sourcesContent":["import {Session} from '../../session/session';\nimport {ConfigInterface} from '../../base-types';\nimport {logger} from '../../logger';\nimport {getJwtSessionId, getOfflineId} from '../../session/session-utils';\n\nimport {\n  AccessTokenResponse,\n  OnlineAccessResponse,\n  OnlineAccessInfo,\n  OfflineAccessResponse,\n} from './types';\n\nexport function createSession({\n  config,\n  accessTokenResponse,\n  shop,\n  state,\n}: {\n  config: ConfigInterface;\n  accessTokenResponse: AccessTokenResponse;\n  shop: string;\n  state: string;\n}): Session {\n  const associatedUser = (accessTokenResponse as OnlineAccessResponse)\n    .associated_user;\n  const isOnline = Boolean(associatedUser);\n\n  logger(config).info('Creating new session', {shop, isOnline});\n\n  const getSessionExpiration = (expires_in: number) =>\n    new Date(Date.now() + expires_in * 1000);\n\n  const getOnlineSessionProperties = (responseBody: OnlineAccessResponse) => {\n    const {access_token, scope, ...rest} = responseBody;\n    const sessionId = config.isEmbeddedApp\n      ? getJwtSessionId(config)(\n          shop,\n          `${(rest as OnlineAccessInfo).associated_user.id}`,\n        )\n      : crypto.randomUUID();\n\n    return {\n      id: sessionId,\n      onlineAccessInfo: rest,\n      expires: getSessionExpiration(rest.expires_in),\n    };\n  };\n\n  const getOfflineSessionProperties = (responseBody: OfflineAccessResponse) => {\n    const {expires_in, refresh_token, refresh_token_expires_in} = responseBody;\n    return {\n      id: getOfflineId(config)(shop),\n      ...(expires_in && {expires: getSessionExpiration(expires_in)}),\n      ...(refresh_token &&\n        refresh_token_expires_in && {\n          refreshToken: refresh_token,\n          refreshTokenExpires: getSessionExpiration(refresh_token_expires_in),\n        }),\n    };\n  };\n\n  return new Session({\n    shop,\n    state,\n    isOnline,\n    accessToken: accessTokenResponse.access_token,\n    scope: accessTokenResponse.scope,\n    ...(isOnline\n      ? getOnlineSessionProperties(accessTokenResponse as OnlineAccessResponse)\n      : getOfflineSessionProperties(\n          accessTokenResponse as OfflineAccessResponse,\n        )),\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;AAYM,SAAU,aAAa,CAAC,EAC5B,MAAM,EACN,mBAAmB,EACnB,IAAI,EACJ,KAAK,EAMN,EAAA;IACC,MAAM,cAAc,GAAI,oBACrB,eAAe;IAClB,MAAM,QAAQ,GAAG,OAAO,CAAC,cAAc,CAAC;QAExC,iMAAM,EAAC,MAAM,CAAC,CAAC,IAAI,CAAC,sBAAsB,EAAE;QAAC,IAAI;QAAE,QAAQ;IAAA,CAAC,CAAC;IAE7D,MAAM,oBAAoB,GAAG,CAAC,UAAkB,GAC9C,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,UAAU,GAAG,IAAI,CAAC;IAE1C,MAAM,0BAA0B,GAAG,CAAC,YAAkC,KAAI;QACxE,MAAM,EAAC,YAAY,EAAE,KAAK,EAAE,GAAG,IAAI,EAAC,GAAG,YAAY;QACnD,MAAM,SAAS,GAAG,MAAM,CAAC,aAAA,OACrB,sNAAe,EAAC,MAAM,CAAC,CACrB,IAAI,EACJ,CAAA,EAAI,IAAyB,CAAC,eAAe,CAAC,EAAE,EAAE,IAEpD,MAAM,CAAC,UAAU,EAAE;QAEvB,OAAO;YACL,EAAE,EAAE,SAAS;YACb,gBAAgB,EAAE,IAAI;YACtB,OAAO,EAAE,oBAAoB,CAAC,IAAI,CAAC,UAAU,CAAC;SAC/C;IACH,CAAC;IAED,MAAM,2BAA2B,GAAG,CAAC,YAAmC,KAAI;QAC1E,MAAM,EAAC,UAAU,EAAE,aAAa,EAAE,wBAAwB,EAAC,GAAG,YAAY;QAC1E,OAAO;YACL,EAAE,MAAE,mNAAY,EAAC,MAAM,CAAC,CAAC,IAAI,CAAC;YAC9B,GAAI,UAAU,IAAI;gBAAC,OAAO,EAAE,oBAAoB,CAAC,UAAU,CAAC;YAAA,CAAC,CAAC;YAC9D,GAAI,aAAa,IACf,wBAAwB,IAAI;gBAC1B,YAAY,EAAE,aAAa;gBAC3B,mBAAmB,EAAE,oBAAoB,CAAC,wBAAwB,CAAC;aACpE,CAAC;SACL;IACH,CAAC;IAED,OAAO,IAAI,qMAAO,CAAC;QACjB,IAAI;QACJ,KAAK;QACL,QAAQ;QACR,WAAW,EAAE,mBAAmB,CAAC,YAAY;QAC7C,KAAK,EAAE,mBAAmB,CAAC,KAAK;QAChC,GAAI,WACA,0BAA0B,CAAC,mBAA2C,IACtE,2BAA2B,CACzB,mBAA4C,CAC7C,CAAC;IACP,CAAA,CAAC;AACJ"}},
    {"offset": {"line": 2982, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/oauth.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/oauth/oauth.ts"],"sourcesContent":["import {isbot} from 'isbot';\n\nimport {throwFailedRequest} from '../../clients/common';\nimport ProcessedQuery from '../../utils/processed-query';\nimport {ConfigInterface} from '../../base-types';\nimport * as ShopifyErrors from '../../error';\nimport {validateHmac} from '../../utils/hmac-validator';\nimport {sanitizeShop} from '../../utils/shop-validator';\nimport {Session} from '../../session/session';\nimport {\n  abstractConvertRequest,\n  abstractConvertIncomingResponse,\n  abstractConvertResponse,\n  abstractConvertHeaders,\n  AdapterResponse,\n  AdapterHeaders,\n  Cookies,\n  NormalizedResponse,\n  NormalizedRequest,\n} from '../../../runtime/http';\nimport {logger, ShopifyLogger} from '../../logger';\nimport {DataType} from '../../clients/types';\nimport {fetchRequestFactory} from '../../utils/fetch-request';\n\nimport {\n  SESSION_COOKIE_NAME,\n  STATE_COOKIE_NAME,\n  BeginParams,\n  CallbackParams,\n  AuthQuery,\n  AccessTokenResponse,\n} from './types';\nimport {nonce} from './nonce';\nimport {safeCompare} from './safe-compare';\nimport {createSession} from './create-session';\n\nexport type OAuthBegin = (beginParams: BeginParams) => Promise<AdapterResponse>;\n\nexport interface CallbackResponse<T = AdapterHeaders> {\n  headers: T;\n  session: Session;\n}\n\nexport type OAuthCallback = <T = AdapterHeaders>(\n  callbackParams: CallbackParams,\n) => Promise<CallbackResponse<T>>;\n\ninterface BotLog {\n  request: NormalizedRequest;\n  log: ShopifyLogger;\n  func: string;\n}\n\nconst logForBot = ({request, log, func}: BotLog) => {\n  log.debug(`Possible bot request to auth ${func}: `, {\n    userAgent: request.headers['User-Agent'],\n  });\n};\n\nexport function begin(config: ConfigInterface): OAuthBegin {\n  return async ({\n    shop,\n    callbackPath,\n    isOnline,\n    ...adapterArgs\n  }: BeginParams): Promise<AdapterResponse> => {\n    throwIfCustomStoreApp(\n      config.isCustomStoreApp,\n      'Cannot perform OAuth for private apps',\n    );\n\n    const log = logger(config);\n    log.info('Beginning OAuth', {shop, isOnline, callbackPath});\n\n    const request = await abstractConvertRequest(adapterArgs);\n    const response = await abstractConvertIncomingResponse(adapterArgs);\n\n    let userAgent = request.headers['User-Agent'];\n    if (Array.isArray(userAgent)) {\n      userAgent = userAgent[0];\n    }\n    if (isbot(userAgent)) {\n      logForBot({request, log, func: 'begin'});\n      response.statusCode = 410;\n      return abstractConvertResponse(response, adapterArgs);\n    }\n\n    const cookies = new Cookies(request, response, {\n      keys: [config.apiSecretKey],\n      secure: true,\n    });\n\n    const state = nonce();\n\n    await cookies.setAndSign(STATE_COOKIE_NAME, state, {\n      expires: new Date(Date.now() + 60000),\n      sameSite: 'lax',\n      secure: true,\n      path: callbackPath,\n    });\n\n    const scopes = config.scopes ? config.scopes.toString() : '';\n    const query = {\n      client_id: config.apiKey,\n      scope: scopes,\n      redirect_uri: `${config.hostScheme}://${config.hostName}${callbackPath}`,\n      state,\n      'grant_options[]': isOnline ? 'per-user' : '',\n    };\n    const processedQuery = new ProcessedQuery();\n    processedQuery.putAll(query);\n\n    const cleanShop = sanitizeShop(config)(shop, true)!;\n    const redirectUrl = `https://${cleanShop}/admin/oauth/authorize${processedQuery.stringify()}`;\n    response.statusCode = 302;\n    response.statusText = 'Found';\n    response.headers = {\n      ...response.headers,\n      ...cookies.response.headers!,\n      Location: redirectUrl,\n    };\n\n    log.debug(`OAuth started, redirecting to ${redirectUrl}`, {shop, isOnline});\n\n    return abstractConvertResponse(response, adapterArgs);\n  };\n}\n\nexport function callback(config: ConfigInterface): OAuthCallback {\n  return async function callback<T = AdapterHeaders>({\n    expiring,\n    ...adapterArgs\n  }: CallbackParams): Promise<CallbackResponse<T>> {\n    throwIfCustomStoreApp(\n      config.isCustomStoreApp,\n      'Cannot perform OAuth for private apps',\n    );\n\n    const log = logger(config);\n\n    const request = await abstractConvertRequest(adapterArgs);\n\n    const query = new URL(\n      request.url,\n      `${config.hostScheme}://${config.hostName}`,\n    ).searchParams;\n    const shop = query.get('shop')!;\n\n    const response = {} as NormalizedResponse;\n    let userAgent = request.headers['User-Agent'];\n    if (Array.isArray(userAgent)) {\n      userAgent = userAgent[0];\n    }\n    if (isbot(userAgent)) {\n      logForBot({request, log, func: 'callback'});\n      throw new ShopifyErrors.BotActivityDetected(\n        'Invalid OAuth callback initiated by bot',\n      );\n    }\n\n    log.info('Completing OAuth', {shop});\n\n    const cookies = new Cookies(request, response, {\n      keys: [config.apiSecretKey],\n      secure: true,\n    });\n\n    const stateFromCookie = await cookies.getAndVerify(STATE_COOKIE_NAME);\n    cookies.deleteCookie(STATE_COOKIE_NAME);\n    if (!stateFromCookie) {\n      log.error('Could not find OAuth cookie', {shop});\n\n      throw new ShopifyErrors.CookieNotFound(\n        `Cannot complete OAuth process. Could not find an OAuth cookie for shop url: ${shop}`,\n      );\n    }\n\n    const authQuery: AuthQuery = Object.fromEntries(query.entries());\n    if (!(await validQuery({config, query: authQuery, stateFromCookie}))) {\n      log.error('Invalid OAuth callback', {shop, stateFromCookie});\n\n      throw new ShopifyErrors.InvalidOAuthError('Invalid OAuth callback.');\n    }\n\n    log.debug('OAuth request is valid, requesting access token', {shop});\n\n    const body = {\n      client_id: config.apiKey,\n      client_secret: config.apiSecretKey,\n      code: query.get('code'),\n      expiring: expiring ? '1' : '0',\n    };\n\n    const cleanShop = sanitizeShop(config)(query.get('shop')!, true)!;\n\n    const postResponse = await fetchRequestFactory(config)(\n      `https://${cleanShop}/admin/oauth/access_token`,\n      {\n        method: 'POST',\n        body: JSON.stringify(body),\n        headers: {\n          'Content-Type': DataType.JSON,\n          Accept: DataType.JSON,\n        },\n      },\n    );\n\n    if (!postResponse.ok) {\n      throwFailedRequest(await postResponse.json(), false, postResponse);\n    }\n\n    const session: Session = createSession({\n      accessTokenResponse: await postResponse.json<AccessTokenResponse>(),\n      shop: cleanShop,\n      state: stateFromCookie,\n      config,\n    });\n\n    if (!config.isEmbeddedApp) {\n      await cookies.setAndSign(SESSION_COOKIE_NAME, session.id, {\n        expires: session.expires,\n        sameSite: 'lax',\n        secure: true,\n        path: '/',\n      });\n    }\n\n    return {\n      headers: (await abstractConvertHeaders(\n        cookies.response.headers!,\n        adapterArgs,\n      )) as T,\n      session,\n    };\n  };\n}\n\nasync function validQuery({\n  config,\n  query,\n  stateFromCookie,\n}: {\n  config: ConfigInterface;\n  query: AuthQuery;\n  stateFromCookie: string;\n}): Promise<boolean> {\n  return (\n    (await validateHmac(config)(query)) &&\n    safeCompare(query.state!, stateFromCookie)\n  );\n}\n\nfunction throwIfCustomStoreApp(\n  isCustomStoreApp: boolean,\n  message: string,\n): void {\n  if (isCustomStoreApp) {\n    throw new ShopifyErrors.PrivateAppError(message);\n  }\n}\n"],"names":["ShopifyErrors.BotActivityDetected","ShopifyErrors.CookieNotFound","ShopifyErrors.InvalidOAuthError","ShopifyErrors.PrivateAppError"],"mappings":"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"}},
    {"offset": {"line": 3190, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/get-embedded-app-url.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/get-embedded-app-url.ts"],"sourcesContent":["import * as ShopifyErrors from '../error';\nimport {ConfigInterface} from '../base-types';\nimport {abstractConvertRequest} from '../../runtime/http';\nimport {sanitizeHost} from '../utils/shop-validator';\n\nimport {decodeHost} from './decode-host';\nimport {GetEmbeddedAppUrlParams} from './types';\n\nexport type GetEmbeddedAppUrl = (\n  params: GetEmbeddedAppUrlParams,\n) => Promise<string>;\n\nexport type BuildEmbeddedAppUrl = (host: string) => string;\n\nexport function getEmbeddedAppUrl(config: ConfigInterface): GetEmbeddedAppUrl {\n  return async ({...adapterArgs}: GetEmbeddedAppUrlParams): Promise<string> => {\n    const request = await abstractConvertRequest(adapterArgs);\n\n    if (!request) {\n      throw new ShopifyErrors.MissingRequiredArgument(\n        'getEmbeddedAppUrl requires a request object argument',\n      );\n    }\n\n    if (!request.url) {\n      throw new ShopifyErrors.InvalidRequestError(\n        'Request does not contain a URL',\n      );\n    }\n\n    const url = new URL(request.url, `https://${request.headers.host}`);\n    const host = url.searchParams.get('host');\n\n    if (typeof host !== 'string') {\n      throw new ShopifyErrors.InvalidRequestError(\n        'Request does not contain a host query parameter',\n      );\n    }\n\n    return buildEmbeddedAppUrl(config)(host);\n  };\n}\n\nexport function buildEmbeddedAppUrl(\n  config: ConfigInterface,\n): BuildEmbeddedAppUrl {\n  return (host: string): string => {\n    sanitizeHost()(host, true);\n    const decodedHost = decodeHost(host);\n\n    return `https://${decodedHost}/apps/${config.apiKey}`;\n  };\n}\n"],"names":["ShopifyErrors.MissingRequiredArgument","ShopifyErrors.InvalidRequestError"],"mappings":";;;;;;;;;;;;;;AAcM,SAAU,iBAAiB,CAAC,MAAuB,EAAA;IACvD,OAAO,OAAO,EAAC,GAAG,WAAW,EAA0B,KAAqB;QAC1E,MAAM,OAAO,GAAG,UAAM,mNAAsB,EAAC,WAAW,CAAC;QAEzD,IAAI,CAAC,OAAO,EAAE;YACZ,MAAM,IAAIA,wMAAqC,CAC7C,sDAAsD,CACvD;QACH;QAEA,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE;YAChB,MAAM,IAAIC,oMAAiC,CACzC,gCAAgC,CACjC;QACH;QAEA,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,CAAA,QAAA,EAAW,OAAO,CAAC,OAAO,CAAC,IAAI,CAAA,CAAE,CAAC;QACnE,MAAM,IAAI,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC;QAEzC,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;YAC5B,MAAM,IAAIA,oMAAiC,CACzC,iDAAiD,CAClD;QACH;QAEA,OAAO,mBAAmB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;IAC1C,CAAC;AACH;AAEM,SAAU,mBAAmB,CACjC,MAAuB,EAAA;IAEvB,OAAO,CAAC,IAAY,KAAY;YAC9B,kNAAY,EAAE,EAAC,IAAI,EAAE,IAAI,CAAC;QAC1B,MAAM,WAAW,OAAG,4MAAU,EAAC,IAAI,CAAC;QAEpC,OAAO,CAAA,QAAA,EAAW,WAAW,CAAA,MAAA,EAAS,MAAM,CAAC,MAAM,EAAE;IACvD,CAAC;AACH"}},
    {"offset": {"line": 3234, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/token-exchange.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/oauth/token-exchange.ts"],"sourcesContent":["import {throwFailedRequest} from '../../clients/common';\nimport {decodeSessionToken} from '../../session/decode-session-token';\nimport {sanitizeShop} from '../../utils/shop-validator';\nimport {ConfigInterface} from '../../base-types';\nimport {Session} from '../../session/session';\nimport {DataType} from '../../clients/types';\nimport {fetchRequestFactory} from '../../utils/fetch-request';\n\nimport {createSession} from './create-session';\nimport {AccessTokenResponse} from './types';\n\nexport enum RequestedTokenType {\n  OnlineAccessToken = 'urn:shopify:params:oauth:token-type:online-access-token',\n  OfflineAccessToken = 'urn:shopify:params:oauth:token-type:offline-access-token',\n}\n\nconst TokenExchangeGrantType =\n  'urn:ietf:params:oauth:grant-type:token-exchange';\nconst IdTokenType = 'urn:ietf:params:oauth:token-type:id_token';\n\nexport interface TokenExchangeParams {\n  shop: string;\n  sessionToken: string;\n  requestedTokenType: RequestedTokenType;\n  expiring?: boolean;\n}\n\nexport type TokenExchange = (\n  params: TokenExchangeParams,\n) => Promise<{session: Session}>;\n\nexport function tokenExchange(config: ConfigInterface): TokenExchange {\n  return async ({\n    shop,\n    sessionToken,\n    requestedTokenType,\n    expiring,\n  }: TokenExchangeParams) => {\n    await decodeSessionToken(config)(sessionToken);\n\n    const body = {\n      client_id: config.apiKey,\n      client_secret: config.apiSecretKey,\n      grant_type: TokenExchangeGrantType,\n      subject_token: sessionToken,\n      subject_token_type: IdTokenType,\n      requested_token_type: requestedTokenType,\n      expiring: expiring ? '1' : '0',\n    };\n\n    const cleanShop = sanitizeShop(config)(shop, true)!;\n\n    const postResponse = await fetchRequestFactory(config)(\n      `https://${cleanShop}/admin/oauth/access_token`,\n      {\n        method: 'POST',\n        body: JSON.stringify(body),\n        headers: {\n          'Content-Type': DataType.JSON,\n          Accept: DataType.JSON,\n        },\n      },\n    );\n\n    if (!postResponse.ok) {\n      throwFailedRequest(await postResponse.json(), false, postResponse);\n    }\n\n    return {\n      session: createSession({\n        accessTokenResponse: await postResponse.json<AccessTokenResponse>(),\n        shop: cleanShop,\n        // We need to keep this as an empty string as our template DB schemas have this required\n        state: '',\n        config,\n      }),\n    };\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;IAWY;AAAZ,CAAA,SAAY,kBAAkB,EAAA;IAC5B,kBAAA,CAAA,mBAAA,CAAA,GAAA,yDAA6E;IAC7E,kBAAA,CAAA,oBAAA,CAAA,GAAA,0DAA+E;AACjF,CAAC,EAHW,kBAAkB,IAAA,CAAlB,kBAAkB,GAAA,CAAA,CAAA,CAAA,CAAA;AAK9B,MAAM,sBAAsB,GAC1B,iDAAiD;AACnD,MAAM,WAAW,GAAG,2CAA2C;AAazD,SAAU,aAAa,CAAC,MAAuB,EAAA;IACnD,OAAO,OAAO,EACZ,IAAI,EACJ,YAAY,EACZ,kBAAkB,EAClB,QAAQ,EACY,KAAI;QACxB,UAAM,mOAAkB,EAAC,MAAM,CAAC,CAAC,YAAY,CAAC;QAE9C,MAAM,IAAI,GAAG;YACX,SAAS,EAAE,MAAM,CAAC,MAAM;YACxB,aAAa,EAAE,MAAM,CAAC,YAAY;YAClC,UAAU,EAAE,sBAAsB;YAClC,aAAa,EAAE,YAAY;YAC3B,kBAAkB,EAAE,WAAW;YAC/B,oBAAoB,EAAE,kBAAkB;YACxC,QAAQ,EAAE,QAAQ,GAAG,GAAG,GAAG,GAAG;SAC/B;QAED,MAAM,SAAS,OAAG,kNAAY,EAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAE;QAEnD,MAAM,YAAY,GAAG,UAAM,wNAAmB,EAAC,MAAM,CAAC,CACpD,CAAA,QAAA,EAAW,SAAS,CAAA,yBAAA,CAA2B,EAC/C;YACE,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE;gBACP,cAAc,EAAE,oMAAQ,CAAC,IAAI;gBAC7B,MAAM,EAAE,oMAAQ,CAAC,IAAI;YACtB,CAAA;QACF,CAAA,CACF;QAED,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE;gBACpB,+MAAkB,EAAC,MAAM,YAAY,CAAC,IAAI,EAAE,EAAE,KAAK,EAAE,YAAY,CAAC;QACpE;QAEA,OAAO;YACL,OAAO,MAAE,2NAAa,EAAC;gBACrB,mBAAmB,EAAE,MAAM,YAAY,CAAC,IAAI,EAAuB;gBACnE,IAAI,EAAE,SAAS;;gBAEf,KAAK,EAAE,EAAE;gBACT,MAAM;aACP,CAAC;SACH;IACH,CAAC;AACH"}},
    {"offset": {"line": 3300, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/client-credentials.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/oauth/client-credentials.ts"],"sourcesContent":["import {ConfigInterface} from '../../base-types';\nimport {throwFailedRequest} from '../../clients/common';\nimport {DataType} from '../../clients/types';\nimport {Session} from '../../session/session';\nimport {fetchRequestFactory} from '../../utils/fetch-request';\nimport {sanitizeShop} from '../../utils/shop-validator';\n\nimport {createSession} from './create-session';\nimport {AccessTokenResponse} from './types';\n\nexport interface ClientCredentialsParams {\n  shop: string;\n}\n\nconst ClientCredentialsGrantType = 'client_credentials';\n\nexport type ClientCredentials = (\n  params: ClientCredentialsParams,\n) => Promise<{session: Session}>;\n\nexport function clientCredentials(config: ConfigInterface): ClientCredentials {\n  return async ({shop}: ClientCredentialsParams) => {\n    const cleanShop = sanitizeShop(config)(shop, true)!;\n\n    const requestConfig = {\n      method: 'POST',\n      body: JSON.stringify({\n        client_id: config.apiKey,\n        client_secret: config.apiSecretKey,\n        grant_type: ClientCredentialsGrantType,\n      }),\n      headers: {\n        'Content-Type': DataType.JSON,\n        Accept: DataType.JSON,\n      },\n    };\n\n    const postResponse = await fetchRequestFactory(config)(\n      `https://${cleanShop}/admin/oauth/access_token`,\n      requestConfig,\n    );\n\n    const responseData = (await postResponse.json()) as AccessTokenResponse;\n\n    if (!postResponse.ok) {\n      throwFailedRequest(responseData, false, postResponse);\n    }\n\n    return {\n      session: createSession({\n        accessTokenResponse: responseData,\n        shop: cleanShop,\n        // We need to keep this as an empty string as our template DB schemas have this required\n        state: '',\n        config,\n      }),\n    };\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA,MAAM,0BAA0B,GAAG,oBAAoB;AAMjD,SAAU,iBAAiB,CAAC,MAAuB,EAAA;IACvD,OAAO,OAAO,EAAC,IAAI,EAA0B,KAAI;QAC/C,MAAM,SAAS,OAAG,kNAAY,EAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAE;QAEnD,MAAM,aAAa,GAAG;YACpB,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;gBACnB,SAAS,EAAE,MAAM,CAAC,MAAM;gBACxB,aAAa,EAAE,MAAM,CAAC,YAAY;gBAClC,UAAU,EAAE,0BAA0B;aACvC,CAAC;YACF,OAAO,EAAE;gBACP,cAAc,EAAE,oMAAQ,CAAC,IAAI;gBAC7B,MAAM,EAAE,oMAAQ,CAAC,IAAI;YACtB,CAAA;SACF;QAED,MAAM,YAAY,GAAG,UAAM,wNAAmB,EAAC,MAAM,CAAC,CACpD,CAAA,QAAA,EAAW,SAAS,CAAA,yBAAA,CAA2B,EAC/C,aAAa,CACd;QAED,MAAM,YAAY,GAAI,MAAM,YAAY,CAAC,IAAI,EAAE,CAAwB;QAEvE,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE;gBACpB,+MAAkB,EAAC,YAAY,EAAE,KAAK,EAAE,YAAY,CAAC;QACvD;QAEA,OAAO;YACL,OAAO,MAAE,2NAAa,EAAC;gBACrB,mBAAmB,EAAE,YAAY;gBACjC,IAAI,EAAE,SAAS;;gBAEf,KAAK,EAAE,EAAE;gBACT,MAAM;aACP,CAAC;SACH;IACH,CAAC;AACH"}},
    {"offset": {"line": 3352, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/refresh-token.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/oauth/refresh-token.ts"],"sourcesContent":["import {ConfigInterface} from '../../base-types';\nimport {throwFailedRequest} from '../../clients/common';\nimport {DataType} from '../../clients/types';\nimport {Session} from '../../session/session';\nimport {fetchRequestFactory} from '../../utils/fetch-request';\nimport {sanitizeShop} from '../../utils/shop-validator';\n\nimport {createSession} from './create-session';\nimport {AccessTokenResponse} from './types';\n\nexport interface RefreshTokenParams {\n  shop: string;\n  refreshToken: string;\n}\n\nexport type RefreshToken = (\n  params: RefreshTokenParams,\n) => Promise<{session: Session}>;\n\nconst RefreshTokenGrantType = 'refresh_token';\n\nexport function refreshToken(config: ConfigInterface): RefreshToken {\n  return async ({shop, refreshToken}: RefreshTokenParams) => {\n    const body = {\n      client_id: config.apiKey,\n      client_secret: config.apiSecretKey,\n      refresh_token: refreshToken,\n      grant_type: RefreshTokenGrantType,\n    };\n\n    const cleanShop = sanitizeShop(config)(shop, true)!;\n\n    const postResponse = await fetchRequestFactory(config)(\n      `https://${cleanShop}/admin/oauth/access_token`,\n      {\n        method: 'POST',\n        body: JSON.stringify(body),\n        headers: {\n          'Content-Type': DataType.JSON,\n          Accept: DataType.JSON,\n        },\n      },\n    );\n\n    if (!postResponse.ok) {\n      throwFailedRequest(await postResponse.json(), false, postResponse);\n    }\n\n    return {\n      session: createSession({\n        accessTokenResponse: await postResponse.json<AccessTokenResponse>(),\n        shop: cleanShop,\n        // We need to keep this as an empty string as our template DB schemas have this required\n        state: '',\n        config,\n      }),\n    };\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAmBA,MAAM,qBAAqB,GAAG,eAAe;AAEvC,SAAU,YAAY,CAAC,MAAuB,EAAA;IAClD,OAAO,OAAO,EAAC,IAAI,EAAE,YAAY,EAAqB,KAAI;QACxD,MAAM,IAAI,GAAG;YACX,SAAS,EAAE,MAAM,CAAC,MAAM;YACxB,aAAa,EAAE,MAAM,CAAC,YAAY;YAClC,aAAa,EAAE,YAAY;YAC3B,UAAU,EAAE,qBAAqB;SAClC;QAED,MAAM,SAAS,OAAG,kNAAY,EAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAE;QAEnD,MAAM,YAAY,GAAG,UAAM,wNAAmB,EAAC,MAAM,CAAC,CACpD,CAAA,QAAA,EAAW,SAAS,CAAA,yBAAA,CAA2B,EAC/C;YACE,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE;gBACP,cAAc,EAAE,oMAAQ,CAAC,IAAI;gBAC7B,MAAM,EAAE,oMAAQ,CAAC,IAAI;YACtB,CAAA;QACF,CAAA,CACF;QAED,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE;gBACpB,+MAAkB,EAAC,MAAM,YAAY,CAAC,IAAI,EAAE,EAAE,KAAK,EAAE,YAAY,CAAC;QACpE;QAEA,OAAO;YACL,OAAO,MAAE,2NAAa,EAAC;gBACrB,mBAAmB,EAAE,MAAM,YAAY,CAAC,IAAI,EAAuB;gBACnE,IAAI,EAAE,SAAS;;gBAEf,KAAK,EAAE,EAAE;gBACT,MAAM;aACP,CAAC;SACH;IACH,CAAC;AACH"}},
    {"offset": {"line": 3404, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/migrate-to-expiring-token.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/oauth/migrate-to-expiring-token.ts"],"sourcesContent":["import {ConfigInterface} from '../../base-types';\nimport {throwFailedRequest} from '../../clients/common';\nimport {DataType} from '../../clients/types';\nimport {Session} from '../../session/session';\nimport {fetchRequestFactory} from '../../utils/fetch-request';\nimport {sanitizeShop} from '../../utils/shop-validator';\n\nimport {createSession} from './create-session';\nimport {RequestedTokenType} from './token-exchange';\nimport {AccessTokenResponse} from './types';\n\nconst TokenExchangeGrantType =\n  'urn:ietf:params:oauth:grant-type:token-exchange';\n\nexport interface MigrateToExpiringTokenParams {\n  shop: string;\n  nonExpiringOfflineAccessToken: string;\n}\n\nexport type MigrateToExpiringToken = (\n  params: MigrateToExpiringTokenParams,\n) => Promise<{session: Session}>;\n\nexport function migrateToExpiringToken(\n  config: ConfigInterface,\n): MigrateToExpiringToken {\n  return async ({\n    shop,\n    nonExpiringOfflineAccessToken,\n  }: MigrateToExpiringTokenParams) => {\n    const body = {\n      client_id: config.apiKey,\n      client_secret: config.apiSecretKey,\n      grant_type: TokenExchangeGrantType,\n      subject_token: nonExpiringOfflineAccessToken,\n      subject_token_type: RequestedTokenType.OfflineAccessToken,\n      requested_token_type: RequestedTokenType.OfflineAccessToken,\n      expiring: '1',\n    };\n\n    const cleanShop = sanitizeShop(config)(shop, true)!;\n\n    const postResponse = await fetchRequestFactory(config)(\n      `https://${cleanShop}/admin/oauth/access_token`,\n      {\n        method: 'POST',\n        body: JSON.stringify(body),\n        headers: {\n          'Content-Type': DataType.JSON,\n          Accept: DataType.JSON,\n        },\n      },\n    );\n\n    if (!postResponse.ok) {\n      throwFailedRequest(await postResponse.json(), false, postResponse);\n    }\n\n    return {\n      session: createSession({\n        accessTokenResponse: await postResponse.json<AccessTokenResponse>(),\n        shop: cleanShop,\n        // We need to keep this as an empty string as our template DB schemas have this required\n        state: '',\n        config,\n      }),\n    };\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAWA,MAAM,sBAAsB,GAC1B,iDAAiD;AAW7C,SAAU,sBAAsB,CACpC,MAAuB,EAAA;IAEvB,OAAO,OAAO,EACZ,IAAI,EACJ,6BAA6B,EACA,KAAI;QACjC,MAAM,IAAI,GAAG;YACX,SAAS,EAAE,MAAM,CAAC,MAAM;YACxB,aAAa,EAAE,MAAM,CAAC,YAAY;YAClC,UAAU,EAAE,sBAAsB;YAClC,aAAa,EAAE,6BAA6B;YAC5C,kBAAkB,EAAE,gOAAkB,CAAC,kBAAkB;YACzD,oBAAoB,EAAE,gOAAkB,CAAC,kBAAkB;YAC3D,QAAQ,EAAE,GAAG;SACd;QAED,MAAM,SAAS,OAAG,kNAAY,EAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAE;QAEnD,MAAM,YAAY,GAAG,UAAM,wNAAmB,EAAC,MAAM,CAAC,CACpD,CAAA,QAAA,EAAW,SAAS,CAAA,yBAAA,CAA2B,EAC/C;YACE,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE;gBACP,cAAc,EAAE,oMAAQ,CAAC,IAAI;gBAC7B,MAAM,EAAE,oMAAQ,CAAC,IAAI;YACtB,CAAA;QACF,CAAA,CACF;QAED,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE;gBACpB,+MAAkB,EAAC,MAAM,YAAY,CAAC,IAAI,EAAE,EAAE,KAAK,EAAE,YAAY,CAAC;QACpE;QAEA,OAAO;YACL,OAAO,MAAE,2NAAa,EAAC;gBACrB,mBAAmB,EAAE,MAAM,YAAY,CAAC,IAAI,EAAuB;gBACnE,IAAI,EAAE,SAAS;;gBAEf,KAAK,EAAE,EAAE;gBACT,MAAM;aACP,CAAC;SACH;IACH,CAAC;AACH"}},
    {"offset": {"line": 3461, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/auth/index.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\n\nimport {OAuthBegin, OAuthCallback, begin, callback} from './oauth/oauth';\nimport {Nonce, nonce} from './oauth/nonce';\nimport {SafeCompare, safeCompare} from './oauth/safe-compare';\nimport {\n  getEmbeddedAppUrl,\n  buildEmbeddedAppUrl,\n  GetEmbeddedAppUrl,\n  BuildEmbeddedAppUrl,\n} from './get-embedded-app-url';\nimport {TokenExchange, tokenExchange} from './oauth/token-exchange';\nimport {ClientCredentials, clientCredentials} from './oauth/client-credentials';\nimport {RefreshToken, refreshToken} from './oauth/refresh-token';\nimport {\n  migrateToExpiringToken,\n  MigrateToExpiringToken,\n} from './oauth/migrate-to-expiring-token';\n\nexport {AuthScopes} from './scopes';\n\nexport function shopifyAuth<Config extends ConfigInterface>(\n  config: Config,\n): ShopifyAuth {\n  const shopify = {\n    begin: begin(config),\n    callback: callback(config),\n    nonce,\n    safeCompare,\n    getEmbeddedAppUrl: getEmbeddedAppUrl(config),\n    buildEmbeddedAppUrl: buildEmbeddedAppUrl(config),\n    tokenExchange: tokenExchange(config),\n    migrateToExpiringToken: migrateToExpiringToken(config),\n    refreshToken: refreshToken(config),\n    clientCredentials: clientCredentials(config),\n  } as ShopifyAuth;\n\n  return shopify;\n}\n\nexport interface ShopifyAuth {\n  begin: OAuthBegin;\n  callback: OAuthCallback;\n  nonce: Nonce;\n  safeCompare: SafeCompare;\n  getEmbeddedAppUrl: GetEmbeddedAppUrl;\n  buildEmbeddedAppUrl: BuildEmbeddedAppUrl;\n  tokenExchange: TokenExchange;\n  migrateToExpiringToken: MigrateToExpiringToken;\n  refreshToken: RefreshToken;\n  clientCredentials: ClientCredentials;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAqBM,SAAU,WAAW,CACzB,MAAc,EAAA;IAEd,MAAM,OAAO,GAAG;QACd,KAAK,MAAE,uMAAK,EAAC,MAAM,CAAC;QACpB,QAAQ,MAAE,0MAAQ,EAAC,MAAM,CAAC;eAC1B,uMAAK;qBACL,uNAAW;QACX,iBAAiB,MAAE,kOAAiB,EAAC,MAAM,CAAC;QAC5C,mBAAmB,MAAE,oOAAmB,EAAC,MAAM,CAAC;QAChD,aAAa,MAAE,2NAAa,EAAC,MAAM,CAAC;QACpC,sBAAsB,MAAE,qPAAsB,EAAC,MAAM,CAAC;QACtD,YAAY,MAAE,yNAAY,EAAC,MAAM,CAAC;QAClC,iBAAiB,MAAE,mOAAiB,EAAC,MAAM,CAAC;KAC9B;IAEhB,OAAO,OAAO;AAChB"}},
    {"offset": {"line": 3502, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/session/index.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\n\nimport {decodeSessionToken} from './decode-session-token';\nimport {\n  customAppSession,\n  getCurrentSessionId,\n  getJwtSessionId,\n  getOfflineId,\n} from './session-utils';\n\nexport function shopifySession(config: ConfigInterface) {\n  return {\n    customAppSession: customAppSession(config),\n    getCurrentId: getCurrentSessionId(config),\n    getOfflineId: getOfflineId(config),\n    getJwtSessionId: getJwtSessionId(config),\n    decodeSessionToken: decodeSessionToken(config),\n  };\n}\n\nexport type ShopifySession = ReturnType<typeof shopifySession>;\n"],"names":[],"mappings":";;;;;;;;AAUM,SAAU,cAAc,CAAC,MAAuB,EAAA;IACpD,OAAO;QACL,gBAAgB,MAAE,uNAAgB,EAAC,MAAM,CAAC;QAC1C,YAAY,MAAE,0NAAmB,EAAC,MAAM,CAAC;QACzC,YAAY,MAAE,mNAAY,EAAC,MAAM,CAAC;QAClC,eAAe,MAAE,sNAAe,EAAC,MAAM,CAAC;QACxC,kBAAkB,MAAE,mOAAkB,EAAC,MAAM,CAAC;KAC/C;AACH"}},
    {"offset": {"line": 3525, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/version-compatible.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/utils/version-compatible.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\nimport {ApiVersion} from '../types';\n\nexport function versionCompatible(config: ConfigInterface) {\n  return (\n    referenceVersion: ApiVersion,\n    currentVersion: ApiVersion = config.apiVersion,\n  ): boolean => {\n    // Return true if not using a dated version\n    if (currentVersion === ApiVersion.Unstable) {\n      return true;\n    }\n    const numericVersion = (version: string) =>\n      parseInt(version.replace('-', ''), 10);\n    const current = numericVersion(currentVersion);\n    const reference = numericVersion(referenceVersion);\n    return current >= reference;\n  };\n}\n\nexport function versionPriorTo(config: ConfigInterface) {\n  return (\n    referenceVersion: ApiVersion,\n    currentVersion: ApiVersion = config.apiVersion,\n  ): boolean => {\n    return !versionCompatible(config)(referenceVersion, currentVersion);\n  };\n}\n"],"names":[],"mappings":";;;;;;;;AAGM,SAAU,iBAAiB,CAAC,MAAuB,EAAA;IACvD,OAAO,CACL,gBAA4B,EAC5B,cAAA,GAA6B,MAAM,CAAC,UAAU,KACnC;;QAEX,IAAI,cAAc,KAAK,2LAAU,CAAC,QAAQ,EAAE;YAC1C,OAAO,IAAI;QACb;QACA,MAAM,cAAc,GAAG,CAAC,OAAe,GACrC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;QACxC,MAAM,OAAO,GAAG,cAAc,CAAC,cAAc,CAAC;QAC9C,MAAM,SAAS,GAAG,cAAc,CAAC,gBAAgB,CAAC;QAClD,OAAO,OAAO,IAAI,SAAS;IAC7B,CAAC;AACH;AAEM,SAAU,cAAc,CAAC,MAAuB,EAAA;IACpD,OAAO,CACL,gBAA4B,EAC5B,cAAA,GAA6B,MAAM,CAAC,UAAU,KACnC;QACX,OAAO,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,gBAAgB,EAAE,cAAc,CAAC;IACrE,CAAC;AACH"}},
    {"offset": {"line": 3556, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/utils/index.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\n\nimport {sanitizeShop, sanitizeHost} from './shop-validator';\nimport {validateHmac} from './hmac-validator';\nimport {versionCompatible, versionPriorTo} from './version-compatible';\nimport {\n  shopAdminUrlToLegacyUrl,\n  legacyUrlToShopAdminUrl,\n} from './shop-admin-url-helper';\n\nexport function shopifyUtils(config: ConfigInterface) {\n  return {\n    sanitizeShop: sanitizeShop(config),\n    sanitizeHost: sanitizeHost(),\n    validateHmac: validateHmac(config),\n    versionCompatible: versionCompatible(config),\n    versionPriorTo: versionPriorTo(config),\n    shopAdminUrlToLegacyUrl,\n    legacyUrlToShopAdminUrl,\n  };\n}\n\nexport type ShopifyUtils = ReturnType<typeof shopifyUtils>;\n"],"names":[],"mappings":";;;;;;;;;;;;AAUM,SAAU,YAAY,CAAC,MAAuB,EAAA;IAClD,OAAO;QACL,YAAY,MAAE,kNAAY,EAAC,MAAM,CAAC;QAClC,YAAY,MAAE,kNAAY,EAAE;QAC5B,YAAY,MAAE,kNAAY,EAAC,MAAM,CAAC;QAClC,iBAAiB,MAAE,2NAAiB,EAAC,MAAM,CAAC;QAC5C,cAAc,MAAE,wNAAc,EAAC,MAAM,CAAC;iCACtC,0OAAuB;iCACvB,0OAAuB;KACxB;AACH"}},
    {"offset": {"line": 3585, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/types.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/webhooks/types.ts"],"sourcesContent":["import {ValidationErrorReason, ValidationInvalid} from '../utils/types';\nimport {AdapterArgs} from '../../runtime/types';\nimport {Session} from '../session/session';\n\nexport enum DeliveryMethod {\n  Http = 'http',\n  EventBridge = 'eventbridge',\n  PubSub = 'pubsub',\n}\n\nexport type WebhookHandlerFunction = (\n  topic: string,\n  shop_domain: string,\n  body: string,\n  webhookId: string,\n  apiVersion?: string,\n  subTopic?: string,\n  context?: any,\n) => Promise<void>;\n\ninterface BaseWebhookHandler {\n  id?: string;\n  includeFields?: string[];\n  metafieldNamespaces?: string[];\n  subTopic?: string;\n  context?: any;\n}\n\nexport interface HttpWebhookHandler extends BaseWebhookHandler {\n  deliveryMethod: DeliveryMethod.Http;\n  callbackUrl: string;\n}\n\nexport interface HttpWebhookHandlerWithCallback extends HttpWebhookHandler {\n  callback: WebhookHandlerFunction;\n}\n\nexport interface EventBridgeWebhookHandler extends BaseWebhookHandler {\n  deliveryMethod: DeliveryMethod.EventBridge;\n  arn: string;\n}\n\nexport interface PubSubWebhookHandler extends BaseWebhookHandler {\n  deliveryMethod: DeliveryMethod.PubSub;\n  pubSubProject: string;\n  pubSubTopic: string;\n}\n\nexport type WebhookHandler =\n  | HttpWebhookHandler\n  | HttpWebhookHandlerWithCallback\n  | EventBridgeWebhookHandler\n  | PubSubWebhookHandler;\n\n// See https://shopify.dev/docs/api/admin-graphql/latest/enums/webhooksubscriptiontopic for available topics\nexport type WebhookRegistry<Handler extends WebhookHandler = WebhookHandler> =\n  Record<string, Handler[]>;\n\n// eslint-disable-next-line no-warning-comments\n// TODO Rethink the wording for this enum - the operations we're doing are actually \"subscribing\" and \"unsubscribing\"\n// Consider changing the values when releasing v12.0.0 when it can be safely deprecated\nexport enum WebhookOperation {\n  Create = 'create',\n  Update = 'update',\n  Delete = 'delete',\n}\n\nexport interface RegisterParams {\n  session: Session;\n}\n\nexport interface RegisterResult {\n  success: boolean;\n  deliveryMethod: DeliveryMethod;\n  result: unknown;\n  operation: WebhookOperation;\n}\n\nexport type RegisterReturn = Record<string, RegisterResult[]>;\n\ninterface WebhookHttpEndpoint {\n  __typename: 'WebhookHttpEndpoint';\n  callbackUrl: string;\n}\ninterface WebhookEventBridgeEndpoint {\n  __typename: 'WebhookEventBridgeEndpoint';\n  arn: string;\n}\ninterface WebhookPubSubEndpoint {\n  __typename: 'WebhookPubSubEndpoint';\n  pubSubProject: string;\n  pubSubTopic: string;\n}\n\ntype WebhookEndpoint =\n  | WebhookHttpEndpoint\n  | WebhookEventBridgeEndpoint\n  | WebhookPubSubEndpoint;\n\nexport interface WebhookCheckResponseNode<\n  T = {\n    endpoint: WebhookEndpoint;\n  },\n> {\n  node: {\n    id: string;\n    topic: string;\n    includeFields: string[];\n    metafieldNamespaces: string[];\n  } & T;\n}\n\nexport interface WebhookCheckResponse<T = WebhookCheckResponseNode> {\n  webhookSubscriptions: {\n    edges: T[];\n    pageInfo: {\n      endCursor: string;\n      hasNextPage: boolean;\n    };\n  };\n}\n\nexport type AddHandlersParams = Record<\n  string,\n  WebhookHandler | WebhookHandler[]\n>;\n\nexport interface WebhookProcessParams extends AdapterArgs {\n  rawBody: string;\n  context?: any;\n}\n\nexport interface WebhookValidateParams extends WebhookProcessParams {}\n\nexport const WebhookValidationErrorReason = {\n  ...ValidationErrorReason,\n  MissingHeaders: 'missing_headers',\n} as const;\n\nexport type WebhookValidationErrorReasonType =\n  (typeof WebhookValidationErrorReason)[keyof typeof WebhookValidationErrorReason];\n\nexport interface WebhookFields {\n  webhookId: string;\n  apiVersion: string;\n  domain: string;\n  hmac: string;\n  topic: string;\n  subTopic?: string;\n}\n\nexport interface WebhookValidationInvalid\n  extends Omit<ValidationInvalid, 'reason'> {\n  valid: false;\n  reason: WebhookValidationErrorReasonType;\n}\n\nexport interface WebhookValidationMissingHeaders\n  extends WebhookValidationInvalid {\n  reason: typeof WebhookValidationErrorReason.MissingHeaders;\n  missingHeaders: string[];\n}\n\nexport interface WebhookValidationValid extends WebhookFields {\n  valid: true;\n}\n\nexport type WebhookValidation =\n  | WebhookValidationValid\n  | WebhookValidationInvalid\n  | WebhookValidationMissingHeaders;\n"],"names":[],"mappings":";;;;;;;;;;IAIY;AAAZ,CAAA,SAAY,cAAc,EAAA;IACxB,cAAA,CAAA,MAAA,CAAA,GAAA,MAAa;IACb,cAAA,CAAA,aAAA,CAAA,GAAA,aAA2B;IAC3B,cAAA,CAAA,QAAA,CAAA,GAAA,QAAiB;AACnB,CAAC,EAJW,cAAc,IAAA,CAAd,cAAc,GAAA,CAAA,CAAA,CAAA,CAAA;AAsD1B,+CAAA;AACA,qHAAA;AACA,uFAAA;IACY;AAAZ,CAAA,SAAY,gBAAgB,EAAA;IAC1B,gBAAA,CAAA,QAAA,CAAA,GAAA,QAAiB;IACjB,gBAAA,CAAA,QAAA,CAAA,GAAA,QAAiB;IACjB,gBAAA,CAAA,QAAA,CAAA,GAAA,QAAiB;AACnB,CAAC,EAJW,gBAAgB,IAAA,CAAhB,gBAAgB,GAAA,CAAA,CAAA,CAAA,CAAA;AAyErB,MAAM,4BAA4B,GAAG;IAC1C,GAAG,+MAAqB;IACxB,cAAc,EAAE,iBAAiB"}},
    {"offset": {"line": 3620, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/registry.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/webhooks/registry.ts"],"sourcesContent":["import {InvalidDeliveryMethodError} from '../error';\nimport {ConfigInterface} from '../base-types';\nimport {logger} from '../logger';\n\nimport {\n  AddHandlersParams,\n  DeliveryMethod,\n  WebhookHandler,\n  WebhookRegistry,\n} from './types';\n\nexport function registry(): WebhookRegistry {\n  return {};\n}\n\nexport function topicForStorage(topic: string): string {\n  return topic.toUpperCase().replace(/\\/|\\./g, '_');\n}\n\nexport function addHandlers(\n  config: ConfigInterface,\n  webhookRegistry: WebhookRegistry,\n) {\n  return function addHandlers(handlersToAdd: AddHandlersParams) {\n    for (const [topic, handlers] of Object.entries(handlersToAdd)) {\n      const topicKey = topicForStorage(topic);\n\n      if (Array.isArray(handlers)) {\n        for (const handler of handlers) {\n          mergeOrAddHandler(config, webhookRegistry, topicKey, handler);\n        }\n      } else {\n        mergeOrAddHandler(config, webhookRegistry, topicKey, handlers);\n      }\n    }\n  };\n}\n\nexport function getTopicsAdded(webhookRegistry: WebhookRegistry) {\n  return function getTopicsAdded(): string[] {\n    return Object.keys(webhookRegistry);\n  };\n}\n\nexport function getHandlers(webhookRegistry: WebhookRegistry) {\n  return function getHandlers(topic: string): WebhookHandler[] {\n    return webhookRegistry[topicForStorage(topic)] || [];\n  };\n}\n\nexport function handlerIdentifier(\n  config: ConfigInterface,\n  handler: WebhookHandler,\n): string {\n  const prefix = handler.deliveryMethod;\n\n  switch (handler.deliveryMethod) {\n    case DeliveryMethod.Http:\n      return `${prefix}_${addHostToCallbackUrl(config, handler.callbackUrl)}`;\n    case DeliveryMethod.EventBridge:\n      return `${prefix}_${handler.arn}`;\n    case DeliveryMethod.PubSub:\n      return `${prefix}_${handler.pubSubProject}:${handler.pubSubTopic}`;\n    default:\n      throw new InvalidDeliveryMethodError(\n        `Unrecognized delivery method '${(handler as any).deliveryMethod}'`,\n      );\n  }\n}\n\nexport function addHostToCallbackUrl(\n  config: ConfigInterface,\n  callbackUrl: string,\n): string {\n  if (callbackUrl.startsWith('/')) {\n    return `${config.hostScheme}://${config.hostName}${callbackUrl}`;\n  } else {\n    return callbackUrl;\n  }\n}\n\nfunction mergeOrAddHandler(\n  config: ConfigInterface,\n  webhookRegistry: WebhookRegistry,\n  topic: string,\n  handler: WebhookHandler,\n) {\n  const log = logger(config);\n\n  handler.includeFields?.sort();\n  handler.metafieldNamespaces?.sort();\n\n  if (!(topic in webhookRegistry)) {\n    webhookRegistry[topic] = [handler];\n    return;\n  }\n\n  const identifier = handlerIdentifier(config, handler);\n\n  for (const index in webhookRegistry[topic]) {\n    if (!Object.prototype.hasOwnProperty.call(webhookRegistry[topic], index)) {\n      continue;\n    }\n\n    const existingHandler = webhookRegistry[topic][index];\n    const existingIdentifier = handlerIdentifier(config, existingHandler);\n\n    if (identifier !== existingIdentifier) {\n      continue;\n    }\n\n    if (handler.deliveryMethod === DeliveryMethod.Http) {\n      log.info(\n        `Detected multiple handlers for '${topic}', webhooks.process will call them sequentially`,\n      );\n      break;\n    } else {\n      throw new InvalidDeliveryMethodError(\n        `Can only add multiple handlers for a topic when deliveryMethod is Http. Please be sure that you used addHandler method once after creating ShopifyApi instance in your app.  Invalid handler: ${JSON.stringify(\n          handler,\n        )}`,\n      );\n    }\n  }\n\n  webhookRegistry[topic].push(handler);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3727, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/query-template.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/webhooks/query-template.ts"],"sourcesContent":["export function queryTemplate(template: string, params: Record<string, any>) {\n  let query = template;\n\n  Object.entries(params).forEach(([key, value]) => {\n    query = query.replace(`{{${key}}}`, value);\n  });\n\n  return query;\n}\n"],"names":[],"mappings":";;;;AAAM,SAAU,aAAa,CAAC,QAAgB,EAAE,MAA2B,EAAA;IACzE,IAAI,KAAK,GAAG,QAAQ;IAEpB,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,KAAI;QAC9C,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,CAAA,EAAA,EAAK,GAAG,CAAA,EAAA,CAAI,EAAE,KAAK,CAAC;IAC5C,CAAC,CAAC;IAEF,OAAO,KAAK;AACd"}},
    {"offset": {"line": 3744, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/register.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/webhooks/register.ts"],"sourcesContent":["import {graphqlClientClass, GraphqlClient} from '../clients/admin';\nimport {InvalidDeliveryMethodError, ShopifyError} from '../error';\nimport {logger} from '../logger';\nimport {privacyTopics} from '../types';\nimport {ConfigInterface} from '../base-types';\nimport {Session} from '../session/session';\n\nimport {addHostToCallbackUrl, getHandlers, handlerIdentifier} from './registry';\nimport {queryTemplate} from './query-template';\nimport {\n  WebhookRegistry,\n  RegisterReturn,\n  WebhookHandler,\n  WebhookCheckResponse,\n  DeliveryMethod,\n  WebhookCheckResponseNode,\n  WebhookOperation,\n  RegisterResult,\n  RegisterParams,\n} from './types';\n\ninterface RegisterTopicParams {\n  config: ConfigInterface;\n  session: Session;\n  topic: string;\n  existingHandlers: WebhookHandler[];\n  handlers: WebhookHandler[];\n}\n\ninterface RunMutationsParams {\n  config: ConfigInterface;\n  client: GraphqlClient;\n  topic: string;\n  handlers: WebhookHandler[];\n  operation: WebhookOperation;\n}\n\ninterface RunMutationParams {\n  config: ConfigInterface;\n  client: GraphqlClient;\n  topic: string;\n  handler: WebhookHandler;\n  operation: WebhookOperation;\n}\n\nexport function register(\n  config: ConfigInterface,\n  webhookRegistry: WebhookRegistry,\n) {\n  return async function register({\n    session,\n  }: RegisterParams): Promise<RegisterReturn> {\n    const log = logger(config);\n    log.info('Registering webhooks', {shop: session.shop});\n\n    const registerReturn: RegisterReturn = Object.keys(webhookRegistry).reduce(\n      (acc: RegisterReturn, topic) => {\n        acc[topic] = [];\n        return acc;\n      },\n      {},\n    );\n\n    const existingHandlers = await getExistingHandlers(config, session);\n\n    log.debug(\n      `Existing topics: [${Object.keys(existingHandlers).join(', ')}]`,\n      {shop: session.shop},\n    );\n\n    for (const topic in webhookRegistry) {\n      if (!Object.prototype.hasOwnProperty.call(webhookRegistry, topic)) {\n        continue;\n      }\n\n      if (privacyTopics.includes(topic)) {\n        continue;\n      }\n\n      registerReturn[topic] = await registerTopic({\n        config,\n        session,\n        topic,\n        existingHandlers: existingHandlers[topic] || [],\n        handlers: getHandlers(webhookRegistry)(topic),\n      });\n\n      // Remove this topic from the list of existing handlers so we have a list of leftovers\n      delete existingHandlers[topic];\n    }\n\n    // Delete any leftover handlers\n    for (const topic in existingHandlers) {\n      if (!Object.prototype.hasOwnProperty.call(existingHandlers, topic)) {\n        continue;\n      }\n\n      const GraphqlClient = graphqlClientClass({config});\n      const client = new GraphqlClient({session});\n\n      registerReturn[topic] = await runMutations({\n        config,\n        client,\n        topic,\n        handlers: existingHandlers[topic],\n        operation: WebhookOperation.Delete,\n      });\n    }\n\n    return registerReturn;\n  };\n}\n\nasync function getExistingHandlers(\n  config: ConfigInterface,\n  session: Session,\n): Promise<WebhookRegistry> {\n  const GraphqlClient = graphqlClientClass({config});\n  const client = new GraphqlClient({session});\n\n  const existingHandlers: WebhookRegistry = {};\n\n  let hasNextPage: boolean;\n  let endCursor: string | null = null;\n  do {\n    const query = buildCheckQuery(endCursor);\n\n    const response = await client.request<WebhookCheckResponse>(query);\n\n    response.data?.webhookSubscriptions?.edges.forEach(\n      (edge: WebhookCheckResponseNode) => {\n        const handler = buildHandlerFromNode(edge);\n\n        if (!existingHandlers[edge.node.topic]) {\n          existingHandlers[edge.node.topic] = [];\n        }\n\n        existingHandlers[edge.node.topic].push(handler);\n      },\n    );\n\n    endCursor = response.data?.webhookSubscriptions?.pageInfo.endCursor!;\n    hasNextPage = response.data?.webhookSubscriptions?.pageInfo.hasNextPage!;\n  } while (hasNextPage);\n\n  return existingHandlers;\n}\n\nfunction buildCheckQuery(endCursor: string | null) {\n  return queryTemplate(TEMPLATE_GET_HANDLERS, {\n    END_CURSOR: JSON.stringify(endCursor),\n  });\n}\n\nfunction buildHandlerFromNode(edge: WebhookCheckResponseNode): WebhookHandler {\n  const endpoint = edge.node.endpoint;\n\n  let handler: WebhookHandler;\n\n  switch (endpoint.__typename) {\n    case 'WebhookHttpEndpoint':\n      handler = {\n        deliveryMethod: DeliveryMethod.Http,\n        callbackUrl: endpoint.callbackUrl,\n        // This is a dummy for now because we don't really care about it\n        callback: async () => {},\n      };\n      break;\n    case 'WebhookEventBridgeEndpoint':\n      handler = {\n        deliveryMethod: DeliveryMethod.EventBridge,\n        arn: endpoint.arn,\n      };\n      break;\n    case 'WebhookPubSubEndpoint':\n      handler = {\n        deliveryMethod: DeliveryMethod.PubSub,\n        pubSubProject: endpoint.pubSubProject,\n        pubSubTopic: endpoint.pubSubTopic,\n      };\n      break;\n  }\n\n  // Set common fields\n  handler.id = edge.node.id;\n  handler.includeFields = edge.node.includeFields;\n  handler.metafieldNamespaces = edge.node.metafieldNamespaces;\n\n  // Sort the array fields to make them cheaper to compare later on\n  handler.includeFields?.sort();\n  handler.metafieldNamespaces?.sort();\n\n  return handler;\n}\n\nasync function registerTopic({\n  config,\n  session,\n  topic,\n  existingHandlers,\n  handlers,\n}: RegisterTopicParams): Promise<RegisterResult[]> {\n  let registerResults: RegisterResult[] = [];\n\n  const {toCreate, toUpdate, toDelete} = categorizeHandlers(\n    config,\n    existingHandlers,\n    handlers,\n  );\n\n  const GraphqlClient = graphqlClientClass({config});\n  const client = new GraphqlClient({session});\n\n  let operation = WebhookOperation.Create;\n  registerResults = registerResults.concat(\n    await runMutations({config, client, topic, operation, handlers: toCreate}),\n  );\n\n  operation = WebhookOperation.Update;\n  registerResults = registerResults.concat(\n    await runMutations({config, client, topic, operation, handlers: toUpdate}),\n  );\n\n  operation = WebhookOperation.Delete;\n  registerResults = registerResults.concat(\n    await runMutations({config, client, topic, operation, handlers: toDelete}),\n  );\n\n  return registerResults;\n}\n\ntype HandlersByKey = Record<string, WebhookHandler>;\n\nfunction categorizeHandlers(\n  config: ConfigInterface,\n  existingHandlers: WebhookHandler[],\n  handlers: WebhookHandler[],\n) {\n  const handlersByKey = handlers.reduce((acc: HandlersByKey, value) => {\n    acc[handlerIdentifier(config, value)] = value;\n    return acc;\n  }, {});\n  const existingHandlersByKey = existingHandlers.reduce(\n    (acc: HandlersByKey, value) => {\n      acc[handlerIdentifier(config, value)] = value;\n      return acc;\n    },\n    {},\n  );\n\n  const toCreate: HandlersByKey = {...handlersByKey};\n  const toUpdate: HandlersByKey = {};\n  const toDelete: HandlersByKey = {};\n  for (const existingKey in existingHandlersByKey) {\n    if (\n      !Object.prototype.hasOwnProperty.call(existingHandlersByKey, existingKey)\n    ) {\n      continue;\n    }\n\n    const existingHandler = existingHandlersByKey[existingKey];\n    const handler = handlersByKey[existingKey];\n\n    if (existingKey in handlersByKey) {\n      delete toCreate[existingKey];\n\n      if (!areHandlerFieldsEqual(existingHandler, handler)) {\n        toUpdate[existingKey] = handler;\n        toUpdate[existingKey].id = existingHandler.id;\n      }\n    } else {\n      toDelete[existingKey] = existingHandler;\n    }\n  }\n\n  return {\n    toCreate: Object.values(toCreate),\n    toUpdate: Object.values(toUpdate),\n    toDelete: Object.values(toDelete),\n  };\n}\nfunction areHandlerFieldsEqual(\n  arr1: WebhookHandler,\n  arr2: WebhookHandler,\n): boolean {\n  const includeFieldsEqual = arraysEqual(\n    arr1.includeFields || [],\n    arr2.includeFields || [],\n  );\n  const metafieldNamespacesEqual = arraysEqual(\n    arr1.metafieldNamespaces || [],\n    arr2.metafieldNamespaces || [],\n  );\n\n  return includeFieldsEqual && metafieldNamespacesEqual;\n}\n\nfunction arraysEqual(arr1: any[], arr2: any[]): boolean {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nasync function runMutations({\n  config,\n  client,\n  topic,\n  handlers,\n  operation,\n}: RunMutationsParams): Promise<RegisterResult[]> {\n  const registerResults: RegisterResult[] = [];\n\n  for (const handler of handlers) {\n    registerResults.push(\n      await runMutation({config, client, topic, handler, operation}),\n    );\n  }\n\n  return registerResults;\n}\n\nasync function runMutation({\n  config,\n  client,\n  topic,\n  handler,\n  operation,\n}: RunMutationParams): Promise<RegisterResult> {\n  let registerResult: RegisterResult;\n\n  logger(config).debug(`Running webhook mutation`, {topic, operation});\n\n  try {\n    const query = buildMutation(config, topic, handler, operation);\n\n    const result = await client.request(query);\n\n    registerResult = {\n      deliveryMethod: handler.deliveryMethod,\n      success: isSuccess(result, handler, operation),\n      result,\n      operation,\n    };\n  } catch (error) {\n    if (error instanceof InvalidDeliveryMethodError) {\n      registerResult = {\n        deliveryMethod: handler.deliveryMethod,\n        success: false,\n        result: {message: error.message},\n        operation,\n      };\n    } else {\n      throw error;\n    }\n  }\n\n  return registerResult;\n}\n\nfunction buildMutation(\n  config: ConfigInterface,\n  topic: string,\n  handler: WebhookHandler,\n  operation: WebhookOperation,\n): string {\n  const params: Record<string, string> = {};\n\n  let identifier: string;\n  if (handler.id) {\n    identifier = `id: \"${handler.id}\"`;\n  } else {\n    identifier = `topic: ${topic}`;\n  }\n\n  const mutationArguments = {\n    MUTATION_NAME: getMutationName(handler, operation),\n    IDENTIFIER: identifier,\n    MUTATION_PARAMS: '',\n  };\n\n  if (operation !== WebhookOperation.Delete) {\n    switch (handler.deliveryMethod) {\n      case DeliveryMethod.Http:\n        params.callbackUrl = `\"${addHostToCallbackUrl(\n          config,\n          handler.callbackUrl,\n        )}\"`;\n        break;\n      case DeliveryMethod.EventBridge:\n        params.arn = `\"${handler.arn}\"`;\n        break;\n      case DeliveryMethod.PubSub:\n        params.pubSubProject = `\"${handler.pubSubProject}\"`;\n        params.pubSubTopic = `\"${handler.pubSubTopic}\"`;\n        break;\n      default:\n        throw new InvalidDeliveryMethodError(\n          `Unrecognized delivery method '${(handler as any).deliveryMethod}'`,\n        );\n    }\n\n    if (handler.includeFields) {\n      params.includeFields = JSON.stringify(handler.includeFields);\n    }\n    if (handler.metafieldNamespaces) {\n      params.metafieldNamespaces = JSON.stringify(handler.metafieldNamespaces);\n    }\n\n    if (handler.subTopic) {\n      const subTopicString = `subTopic: \"${handler.subTopic}\",`;\n      mutationArguments.MUTATION_PARAMS = subTopicString;\n    }\n\n    const paramsString = Object.entries(params)\n      .map(([key, value]) => `${key}: ${value}`)\n      .join(', ');\n\n    mutationArguments.MUTATION_PARAMS += `webhookSubscription: {${paramsString}}`;\n  }\n\n  return queryTemplate(TEMPLATE_MUTATION, mutationArguments);\n}\n\nfunction getMutationName(\n  handler: WebhookHandler,\n  operation: WebhookOperation,\n): string {\n  switch (operation) {\n    case WebhookOperation.Create:\n      return `${getEndpoint(handler)}Create`;\n    case WebhookOperation.Update:\n      return `${getEndpoint(handler)}Update`;\n    case WebhookOperation.Delete:\n      return 'webhookSubscriptionDelete';\n    default:\n      throw new ShopifyError(`Unrecognized operation '${operation}'`);\n  }\n}\n\nfunction getEndpoint(handler: WebhookHandler): string {\n  switch (handler.deliveryMethod) {\n    case DeliveryMethod.Http:\n      return 'webhookSubscription';\n    case DeliveryMethod.EventBridge:\n      return 'eventBridgeWebhookSubscription';\n    case DeliveryMethod.PubSub:\n      return 'pubSubWebhookSubscription';\n    default:\n      throw new ShopifyError(\n        `Unrecognized delivery method '${(handler as any).deliveryMethod}'`,\n      );\n  }\n}\n\nfunction isSuccess(\n  result: any,\n  handler: WebhookHandler,\n  operation: WebhookOperation,\n): boolean {\n  const mutationName = getMutationName(handler, operation);\n\n  return Boolean(\n    result.data &&\n      result.data[mutationName] &&\n      result.data[mutationName].userErrors.length === 0,\n  );\n}\n\nexport const TEMPLATE_GET_HANDLERS = `query shopifyApiReadWebhookSubscriptions {\n  webhookSubscriptions(\n    first: 250,\n    after: {{END_CURSOR}},\n  ) {\n    edges {\n      node {\n        id\n        topic\n        includeFields\n        metafieldNamespaces\n        endpoint {\n          __typename\n          ... on WebhookHttpEndpoint {\n            callbackUrl\n          }\n          ... on WebhookEventBridgeEndpoint {\n            arn\n          }\n          ... on WebhookPubSubEndpoint {\n            pubSubProject\n            pubSubTopic\n          }\n        }\n      }\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}`;\n\nexport const TEMPLATE_MUTATION = `\n  mutation shopifyApiCreateWebhookSubscription {\n    {{MUTATION_NAME}}(\n      {{IDENTIFIER}},\n      {{MUTATION_PARAMS}}\n    ) {\n      userErrors {\n        field\n        message\n      }\n    }\n  }\n`;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4141, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/validate.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/webhooks/validate.ts"],"sourcesContent":["import {logger} from '../logger';\nimport {validateHmacFromRequestFactory} from '../utils/hmac-validator';\nimport {HmacValidationType, ValidationErrorReason} from '../utils/types';\nimport {\n  abstractConvertRequest,\n  getHeader,\n  Headers,\n  NormalizedRequest,\n} from '../../runtime/http';\nimport {ShopifyHeader} from '../types';\nimport {ConfigInterface} from '../base-types';\n\nimport {\n  WebhookFields,\n  WebhookValidateParams,\n  WebhookValidation,\n  WebhookValidationErrorReason,\n  WebhookValidationMissingHeaders,\n  WebhookValidationValid,\n} from './types';\nimport {topicForStorage} from './registry';\n\nconst OPTIONAL_HANDLER_PROPERTIES = {\n  subTopic: ShopifyHeader.SubTopic,\n};\n\nconst HANDLER_PROPERTIES = {\n  apiVersion: ShopifyHeader.ApiVersion,\n  domain: ShopifyHeader.Domain,\n  hmac: ShopifyHeader.Hmac,\n  topic: ShopifyHeader.Topic,\n  webhookId: ShopifyHeader.WebhookId,\n  ...OPTIONAL_HANDLER_PROPERTIES,\n};\n\nexport function validateFactory(config: ConfigInterface) {\n  return async function validate({\n    rawBody,\n    ...adapterArgs\n  }: WebhookValidateParams): Promise<WebhookValidation> {\n    const request: NormalizedRequest =\n      await abstractConvertRequest(adapterArgs);\n\n    const validHmacResult = await validateHmacFromRequestFactory(config)({\n      type: HmacValidationType.Webhook,\n      rawBody,\n      ...adapterArgs,\n    });\n\n    if (!validHmacResult.valid) {\n      if (validHmacResult.reason === ValidationErrorReason.InvalidHmac) {\n        const log = logger(config);\n        await log.debug(\n          \"Webhook HMAC validation failed. Please note that events manually triggered from a store's Notifications settings will fail this validation. To test this, please use the CLI or trigger the actual event in a development store.\",\n        );\n      }\n      return validHmacResult;\n    }\n\n    return checkWebhookHeaders(request.headers);\n  };\n}\n\nfunction checkWebhookHeaders(\n  headers: Headers,\n): WebhookValidationMissingHeaders | WebhookValidationValid {\n  const missingHeaders: ShopifyHeader[] = [];\n  const entries = Object.entries(HANDLER_PROPERTIES) as [\n    keyof WebhookFields,\n    ShopifyHeader,\n  ][];\n  const headerValues = entries.reduce((acc, [property, headerName]) => {\n    const headerValue = getHeader(headers, headerName);\n    if (headerValue) {\n      acc[property] = headerValue;\n    } else if (!(property in OPTIONAL_HANDLER_PROPERTIES)) {\n      missingHeaders.push(headerName);\n    }\n\n    return acc;\n  }, {} as WebhookFields);\n\n  if (missingHeaders.length) {\n    return {\n      valid: false,\n      reason: WebhookValidationErrorReason.MissingHeaders,\n      missingHeaders,\n    };\n  } else {\n    return {\n      valid: true,\n      ...headerValues,\n      ...(headerValues.subTopic ? {subTopic: headerValues.subTopic} : {}),\n      topic: topicForStorage(headerValues.topic),\n    };\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAsBA,MAAM,2BAA2B,GAAG;IAClC,QAAQ,EAAE,8LAAa,CAAC,QAAQ;CACjC;AAED,MAAM,kBAAkB,GAAG;IACzB,UAAU,EAAE,8LAAa,CAAC,UAAU;IACpC,MAAM,EAAE,8LAAa,CAAC,MAAM;IAC5B,IAAI,EAAE,8LAAa,CAAC,IAAI;IACxB,KAAK,EAAE,8LAAa,CAAC,KAAK;IAC1B,SAAS,EAAE,8LAAa,CAAC,SAAS;IAClC,GAAG,2BAA2B;CAC/B;AAEK,SAAU,eAAe,CAAC,MAAuB,EAAA;IACrD,OAAO,eAAe,QAAQ,CAAC,EAC7B,OAAO,EACP,GAAG,WAAW,EACQ,EAAA;QACtB,MAAM,OAAO,GACX,UAAM,mNAAsB,EAAC,WAAW,CAAC;QAE3C,MAAM,eAAe,GAAG,UAAM,oOAA8B,EAAC,MAAM,CAAC,CAAC;YACnE,IAAI,EAAE,4MAAkB,CAAC,OAAO;YAChC,OAAO;YACP,GAAG,WAAW;QACf,CAAA,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE;YAC1B,IAAI,eAAe,CAAC,MAAM,KAAK,+MAAqB,CAAC,WAAW,EAAE;gBAChE,MAAM,GAAG,OAAG,iMAAM,EAAC,MAAM,CAAC;gBAC1B,MAAM,GAAG,CAAC,KAAK,CACb,kOAAkO,CACnO;YACH;YACA,OAAO,eAAe;QACxB;QAEA,OAAO,mBAAmB,CAAC,OAAO,CAAC,OAAO,CAAC;IAC7C,CAAC;AACH;AAEA,SAAS,mBAAmB,CAC1B,OAAgB,EAAA;IAEhB,MAAM,cAAc,GAAoB,EAAE;IAC1C,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAG9C;IACH,MAAM,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC,KAAI;QAClE,MAAM,WAAW,OAAG,wMAAS,EAAC,OAAO,EAAE,UAAU,CAAC;QAClD,IAAI,WAAW,EAAE;YACf,GAAG,CAAC,QAAQ,CAAC,GAAG,WAAW;QAC7B,OAAO,IAAI,CAAA,CAAE,QAAQ,IAAI,2BAA2B,CAAC,EAAE;YACrD,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC;QACjC;QAEA,OAAO,GAAG;IACZ,CAAC,EAAE,CAAA,CAAmB,CAAC;IAEvB,IAAI,cAAc,CAAC,MAAM,EAAE;QACzB,OAAO;YACL,KAAK,EAAE,KAAK;YACZ,MAAM,EAAE,yNAA4B,CAAC,cAAc;YACnD,cAAc;SACf;IACH,OAAO;QACL,OAAO;YACL,KAAK,EAAE,IAAI;YACX,GAAG,YAAY;YACf,GAAI,YAAY,CAAC,QAAQ,GAAG;gBAAC,QAAQ,EAAE,YAAY,CAAC,QAAQ;YAAA,CAAC,GAAG,CAAA,CAAE,CAAC;YACnE,KAAK,MAAE,+MAAe,EAAC,YAAY,CAAC,KAAK,CAAC;SAC3C;IACH;AACF"}},
    {"offset": {"line": 4225, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/process.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/webhooks/process.ts"],"sourcesContent":["import {StatusCode} from '../types';\nimport {\n  abstractConvertResponse,\n  AdapterResponse,\n  isOK,\n  NormalizedResponse,\n} from '../../runtime/http';\nimport {ConfigInterface} from '../base-types';\nimport * as ShopifyErrors from '../error';\nimport {logger} from '../logger';\n\nimport {\n  DeliveryMethod,\n  HttpWebhookHandlerWithCallback,\n  WebhookProcessParams,\n  WebhookRegistry,\n  WebhookValidationErrorReason,\n  WebhookValidationInvalid,\n  WebhookValidationMissingHeaders,\n  WebhookValidationValid,\n} from './types';\nimport {validateFactory} from './validate';\n\ninterface HandlerCallResult {\n  statusCode: StatusCode;\n  errorMessage?: string;\n}\n\ninterface ErrorCallResult {\n  statusCode: StatusCode;\n  errorMessage: string;\n}\n\nconst STATUS_TEXT_LOOKUP: Record<string, string> = {\n  [StatusCode.Ok]: 'OK',\n  [StatusCode.BadRequest]: 'Bad Request',\n  [StatusCode.Unauthorized]: 'Unauthorized',\n  [StatusCode.NotFound]: 'Not Found',\n  [StatusCode.InternalServerError]: 'Internal Server Error',\n};\n\nexport function process(\n  config: ConfigInterface,\n  webhookRegistry: WebhookRegistry<HttpWebhookHandlerWithCallback>,\n) {\n  return async function process({\n    context,\n    rawBody,\n    ...adapterArgs\n  }: WebhookProcessParams): Promise<AdapterResponse> {\n    const response: NormalizedResponse = {\n      statusCode: StatusCode.Ok,\n      statusText: STATUS_TEXT_LOOKUP[StatusCode.Ok],\n      headers: {},\n    };\n\n    await logger(config).info('Receiving webhook request');\n\n    const webhookCheck = await validateFactory(config)({\n      rawBody,\n      ...adapterArgs,\n    });\n\n    let errorMessage = 'Unknown error while handling webhook';\n    if (webhookCheck.valid) {\n      const handlerResult = await callWebhookHandlers(\n        config,\n        webhookRegistry,\n        webhookCheck,\n        rawBody,\n        context,\n      );\n\n      response.statusCode = handlerResult.statusCode;\n      if (!isOK(response)) {\n        errorMessage = handlerResult.errorMessage || errorMessage;\n      }\n    } else {\n      const errorResult = await handleInvalidWebhook(config, webhookCheck);\n\n      response.statusCode = errorResult.statusCode;\n      response.statusText = STATUS_TEXT_LOOKUP[response.statusCode];\n      errorMessage = errorResult.errorMessage;\n    }\n\n    const returnResponse = await abstractConvertResponse(response, adapterArgs);\n    if (!isOK(response)) {\n      throw new ShopifyErrors.InvalidWebhookError({\n        message: errorMessage,\n        response: returnResponse,\n      });\n    }\n\n    return Promise.resolve(returnResponse);\n  };\n}\n\nasync function callWebhookHandlers(\n  config: ConfigInterface,\n  webhookRegistry: WebhookRegistry<HttpWebhookHandlerWithCallback>,\n  webhookCheck: WebhookValidationValid,\n  rawBody: string,\n  context: any,\n): Promise<HandlerCallResult> {\n  const log = logger(config);\n  const {hmac: _hmac, valid: _valid, ...loggingContext} = webhookCheck;\n\n  await log.debug(\n    'Webhook request is valid, looking for HTTP handlers to call',\n    loggingContext,\n  );\n\n  const handlers = webhookRegistry[webhookCheck.topic] || [];\n\n  const response: HandlerCallResult = {statusCode: StatusCode.Ok};\n\n  let found = false;\n  for (const handler of handlers) {\n    if (handler.deliveryMethod !== DeliveryMethod.Http) {\n      continue;\n    }\n    if (!handler.callback) {\n      response.statusCode = StatusCode.InternalServerError;\n      response.errorMessage =\n        \"Cannot call webhooks.process with a webhook handler that doesn't have a callback\";\n\n      throw new ShopifyErrors.MissingWebhookCallbackError({\n        message: response.errorMessage,\n        response,\n      });\n    }\n\n    found = true;\n\n    await log.debug('Found HTTP handler, triggering it', loggingContext);\n\n    try {\n      await handler.callback(\n        webhookCheck.topic,\n        webhookCheck.domain,\n        rawBody,\n        webhookCheck.webhookId,\n        webhookCheck.apiVersion,\n        ...(webhookCheck?.subTopic ? webhookCheck.subTopic : ''),\n        context,\n      );\n    } catch (error) {\n      response.statusCode = StatusCode.InternalServerError;\n      response.errorMessage = error.message;\n    }\n  }\n\n  if (!found) {\n    await log.debug('No HTTP handlers found', loggingContext);\n\n    response.statusCode = StatusCode.NotFound;\n    response.errorMessage = `No HTTP webhooks registered for topic ${webhookCheck.topic}`;\n  }\n\n  return response;\n}\n\nasync function handleInvalidWebhook(\n  config: ConfigInterface,\n  webhookCheck: WebhookValidationInvalid,\n): Promise<ErrorCallResult> {\n  const response: ErrorCallResult = {\n    statusCode: StatusCode.InternalServerError,\n    errorMessage: 'Unknown error while handling webhook',\n  };\n\n  switch (webhookCheck.reason) {\n    case WebhookValidationErrorReason.MissingHeaders:\n      response.statusCode = StatusCode.BadRequest;\n      response.errorMessage = `Missing one or more of the required HTTP headers to process webhooks: [${(\n        webhookCheck as WebhookValidationMissingHeaders\n      ).missingHeaders.join(', ')}]`;\n      break;\n    case WebhookValidationErrorReason.MissingBody:\n      response.statusCode = StatusCode.BadRequest;\n      response.errorMessage = 'No body was received when processing webhook';\n      break;\n    case WebhookValidationErrorReason.MissingHmac:\n      response.statusCode = StatusCode.BadRequest;\n      response.errorMessage = `Missing HMAC header in request`;\n      break;\n    case WebhookValidationErrorReason.InvalidHmac:\n      response.statusCode = StatusCode.Unauthorized;\n      response.errorMessage = `Could not validate request HMAC`;\n      break;\n  }\n\n  await logger(config).debug(\n    `Webhook request is invalid, returning ${response.statusCode}: ${response.errorMessage}`,\n  );\n\n  return response;\n}\n"],"names":["ShopifyErrors.InvalidWebhookError","ShopifyErrors.MissingWebhookCallbackError"],"mappings":"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"}},
    {"offset": {"line": 4352, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/webhooks/index.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\n\nimport {addHandlers, getTopicsAdded, getHandlers, registry} from './registry';\nimport {register} from './register';\nimport {process} from './process';\nimport {validateFactory} from './validate';\nimport {HttpWebhookHandlerWithCallback, WebhookRegistry} from './types';\n\ninterface Webhooks {\n  /**\n   * Add shop-specific webhook handlers to the library registry,\n   * allowing you to register webhooks with Shopify and process HTTP webhook requests from Shopify.\n   * In most cases, you should use app-specific webhooks:\n   *\n   * {@link https://shopify.dev/docs/apps/build/webhooks/subscribe#app-specific-vs-shop-specific-subscriptions}\n   *\n   * If you use only app-specific webhooks, you do not need to use `addHandlers`.\n   *\n   */\n  addHandlers: ReturnType<typeof addHandlers>;\n\n  /**\n   * Fetches all topics that were added to the registry.\n   *\n   * In most cases, you should use app-specific webhooks:\n   *\n   * {@link https://shopify.dev/docs/apps/build/webhooks/subscribe#app-specific-vs-shop-specific-subscriptions}\n   *\n   * If you use only app-specific webhooks, you do not need to use `getTopicsAdded`.\n   *\n   */\n  getTopicsAdded: ReturnType<typeof getTopicsAdded>;\n\n  /**\n   * Fetches the configured handlers for shop-specific webhooks for the given topic.\n   *\n   * In most cases, you should use app-specific webhooks:\n   *\n   * {@link https://shopify.dev/docs/apps/build/webhooks/subscribe#app-specific-vs-shop-specific-subscriptions}\n   *\n   * If you use only app-specific webhooks, you do not need to use `getHandlers`.\n   *\n   */\n  getHandlers: ReturnType<typeof getHandlers>;\n\n  /**\n   * Registers a webhook handler for a given topic.\n   *\n   * In most cases, you should use app-specific webhooks:\n   *\n   * {@link https://shopify.dev/docs/apps/build/webhooks/subscribe#app-specific-vs-shop-specific-subscriptions}\n   *\n   * If you use only app-specific webhooks, you do not need to use `register`.\n   *\n   */\n  register: ReturnType<typeof register>;\n\n  /**\n   * Processes a webhook request.\n   *\n   * In most cases, you should use app-specific webhooks:\n   *\n   * {@link https://shopify.dev/docs/apps/build/webhooks/subscribe#app-specific-vs-shop-specific-subscriptions}\n   *\n   * If you use only app-specific webhooks, you do not need to use `process`.\n   *\n   */\n  process: ReturnType<typeof process>;\n\n  /**\n   * Validates an incoming request for `Http` handlers.\n   *\n   * If the call is invalid, it will return a `valid` field set to `false`.\n   *\n   * `validate` can be used to validate app-specific and shop-specific webhook requests.\n   *\n   */\n  validate: ReturnType<typeof validateFactory>;\n}\n\nexport function shopifyWebhooks(config: ConfigInterface): Webhooks {\n  const webhookRegistry = registry();\n\n  return {\n    addHandlers: addHandlers(config, webhookRegistry),\n    getTopicsAdded: getTopicsAdded(webhookRegistry),\n    getHandlers: getHandlers(webhookRegistry),\n    register: register(config, webhookRegistry),\n    process: process(\n      config,\n      webhookRegistry as WebhookRegistry<HttpWebhookHandlerWithCallback>,\n    ),\n    validate: validateFactory(config),\n  };\n}\n\nexport type ShopifyWebhooks = ReturnType<typeof shopifyWebhooks>;\n"],"names":[],"mappings":";;;;;;;;;;;;AAgFM,SAAU,eAAe,CAAC,MAAuB,EAAA;IACrD,MAAM,eAAe,OAAG,wMAAQ,EAAE;IAElC,OAAO;QACL,WAAW,MAAE,2MAAW,EAAC,MAAM,EAAE,eAAe,CAAC;QACjD,cAAc,MAAE,8MAAc,EAAC,eAAe,CAAC;QAC/C,WAAW,MAAE,2MAAW,EAAC,eAAe,CAAC;QACzC,QAAQ,MAAE,wMAAQ,EAAC,MAAM,EAAE,eAAe,CAAC;QAC3C,OAAO,MAAE,sMAAO,EACd,MAAM,EACN,eAAkE,CACnE;QACD,QAAQ,MAAE,+MAAe,EAAC,MAAM,CAAC;KAClC;AACH"}},
    {"offset": {"line": 4381, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/types.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/billing/types.ts"],"sourcesContent":["import {BillingInterval, BillingReplacementBehavior} from '../types';\nimport {Session} from '../session/session';\nimport {FeatureEnabled, FutureFlagOptions} from '../../future/flags';\n\nexport interface BillingConfigPlan {\n  /**\n   * Amount to charge for this plan.\n   */\n  amount: number;\n  /**\n   * Currency code for this plan.\n   */\n  currencyCode: string;\n}\n\nexport interface BillingConfigOneTimePlan extends BillingConfigPlan {\n  /**\n   * Interval for this plan.\n   *\n   * Must be set to `OneTime`.\n   */\n  interval: BillingInterval.OneTime;\n}\n\nexport interface BillingConfigSubscriptionPlanDiscountAmount {\n  /**\n   * The amount to discount.\n   *\n   * Cannot be set if `percentage` is set.\n   */\n  amount: number;\n  /**\n   * The percentage to discount.\n   *\n   * Cannot be set if `amount` is set.\n   */\n  percentage?: never;\n}\n\nexport interface BillingConfigSubscriptionPlanDiscountPercentage {\n  /**\n   * The amount to discount.\n   *\n   * Cannot be set if `percentage` is set.\n   */\n  amount?: never;\n  /**\n   * The percentage to discount.\n   *\n   * Cannot be set if `amount` is set.\n   */\n  percentage: number;\n}\n\nexport interface BillingConfigSubscriptionPlanDiscount {\n  /**\n   * The number of intervals to apply the discount for.\n   */\n  durationLimitInIntervals?: number;\n  /**\n   * The discount to apply.\n   */\n  value:\n    | BillingConfigSubscriptionPlanDiscountAmount\n    | BillingConfigSubscriptionPlanDiscountPercentage;\n}\n\nexport type BillingConfigItem =\n  | BillingConfigOneTimePlan\n  | BillingConfigSubscriptionLineItemPlan;\n\n// Type this as an interface to improve TSDoc support for it.\n\n/**\n * Billing configuration options, indexed by an app-specific plan name.\n */\nexport interface BillingConfig {\n  /**\n   * An individual billing plan.\n   */\n  [plan: string]: BillingConfigItem;\n}\n\nexport type RequestConfigOverrides = Partial<BillingConfigOneTimePlan>;\n\nexport interface BillingConfigLineItem {\n  /**\n   * The amount to charge for this line item.\n   */\n  amount: number;\n  /**\n   * The currency code for this line item.\n   */\n  currencyCode: string;\n}\n\nexport interface BillingConfigRecurringLineItem extends BillingConfigLineItem {\n  /**\n   * The recurring interval for this line item.\n   *\n   * Must be either `Every30Days` or `Annual`.\n   */\n  interval: BillingInterval.Every30Days | BillingInterval.Annual;\n  /**\n   * An optional discount to apply for this line item.\n   */\n  discount?: BillingConfigSubscriptionPlanDiscount;\n}\n\nexport interface BillingConfigUsageLineItem extends BillingConfigLineItem {\n  /**\n   * The usage interval for this line item.\n   *\n   * Must be set to `Usage`.\n   */\n  interval: BillingInterval.Usage;\n  /**\n   * The capped amount or the maximum amount to be charged in the interval.\n   */\n  amount: number;\n  /**\n   * Usage terms for this line item.\n   */\n  terms: string;\n}\n\nexport interface BillingConfigSubscriptionLineItemPlan {\n  /**\n   * The replacement behavior to use for this plan.\n   */\n  replacementBehavior?: BillingReplacementBehavior;\n  /**\n   * How many trial days to give before charging for this plan.\n   */\n  trialDays?: number;\n  /**\n   * The line items for this plan.\n   */\n  lineItems: (BillingConfigRecurringLineItem | BillingConfigUsageLineItem)[];\n}\n\ntype DeepPartial<T> = T extends object\n  ? {[P in keyof T]?: DeepPartial<T[P]>}\n  : T;\nexport type RequestConfigLineItemOverrides =\n  DeepPartial<BillingConfigSubscriptionLineItemPlan>;\n\ninterface BillingCheckParamsNew {\n  /**\n   * The session to use for this check.\n   */\n  session: Session;\n  /**\n   * The plans to accept for this check.\n   */\n  plans?: string[] | string;\n  /**\n   * Whether to include charges that were created on test mode. Test shops and demo shops cannot be charged.\n   */\n  isTest?: boolean;\n}\n\ninterface BillingCheckParamsOld extends BillingCheckParamsNew {\n  /**\n   * The plans to accept for this check.\n   */\n  plans: string[] | string;\n  /**\n   * Whether to return the full response object.\n   */\n  returnObject?: boolean;\n}\n\nexport type BillingCheckParams<\n  Future extends FutureFlagOptions = FutureFlagOptions,\n> =\n  FeatureEnabled<Future, 'unstable_managedPricingSupport'> extends true\n    ? BillingCheckParamsNew\n    : BillingCheckParamsOld;\n\nexport interface BillingCheckResponseObject {\n  /**\n   * Whether the user has an active payment method.\n   */\n  hasActivePayment: boolean;\n  /**\n   * The one-time purchases the shop has.\n   */\n  oneTimePurchases: OneTimePurchase[];\n  /**\n   * The active subscriptions the shop has.\n   */\n  appSubscriptions: AppSubscription[];\n}\n\nexport type BillingCheckResponse<\n  Params extends BillingCheckParams<Future>,\n  Future extends FutureFlagOptions = FutureFlagOptions,\n> =\n  FeatureEnabled<Future, 'unstable_managedPricingSupport'> extends true\n    ? BillingCheckResponseObject\n    : Params extends BillingCheckParamsOld\n      ? Params['returnObject'] extends true\n        ? BillingCheckResponseObject\n        : boolean\n      : never;\n\ntype BillingRequestOverridesType = RequestConfigOverrides &\n  RequestConfigLineItemOverrides;\n\nexport type BillingRequestParams = {\n  /**\n   * The session to use for this request.\n   */\n  session: Session;\n  /**\n   * The plan to request.\n   */\n  plan: string;\n  /**\n   * Whether this is a test purchase.\n   */\n  isTest?: boolean;\n  /**\n   * Override the return URL after the purchase is complete.\n   */\n  returnUrl?: string;\n  /**\n   * Whether to return the full response object.\n   */\n  returnObject?: boolean;\n} & BillingRequestOverridesType;\n\nexport interface BillingRequestResponseObject {\n  /**\n   * The confirmation URL for this request.\n   */\n  confirmationUrl: string;\n  /**\n   * The one-time purchase created by this request.\n   */\n  oneTimePurchase?: OneTimePurchase;\n  /**\n   * The app subscription created by this request.\n   */\n  appSubscription?: AppSubscription;\n}\n\nexport type BillingRequestResponse<Params extends BillingRequestParams> =\n  Params['returnObject'] extends true ? BillingRequestResponseObject : string;\n\nexport interface BillingCancelParams {\n  /**\n   * The session to use for this request.\n   */\n  session: Session;\n  /**\n   * The subscription ID to cancel.\n   */\n  subscriptionId: string;\n  /**\n   * Whether to prorate the cancellation.\n   */\n  prorate?: boolean;\n  /**\n   * Whether to consider test purchases.\n   */\n  isTest?: boolean;\n}\n\nexport interface BillingSubscriptionParams {\n  /**\n   * The session to use for this request.\n   */\n  session: Session;\n}\n\nexport interface AppSubscription {\n  /**\n   * The ID of the app subscription.\n   */\n  id: string;\n  /**\n   * The name of the purchased plan.\n   */\n  name: string;\n  /**\n   * Whether this is a test subscription.\n   */\n  test: boolean;\n  /**\n   * The number of trial days for this subscription.\n   */\n  trialDays: number;\n  /**\n   * The date and time when the subscription was created.\n   */\n  createdAt: string;\n  /**\n   * The date and time when the current period ends.\n   */\n  currentPeriodEnd: string;\n  /**\n   * The return URL for this subscription.\n   */\n  returnUrl: string;\n\n  /*\n   * The line items for this plan.\n   */\n  lineItems: ActiveSubscriptionLineItem[];\n\n  /*\n   * The status of the subscription. [ACTIVE, CANCELLED, PENDING, DECLINED, EXPIRED, FROZEN, ACCEPTED]\n   */\n  status:\n    | 'ACTIVE'\n    | 'CANCELLED'\n    | 'PENDING'\n    | 'DECLINED'\n    | 'EXPIRED'\n    | 'FROZEN'\n    | 'ACCEPTED';\n}\n\nexport interface ActiveSubscriptions {\n  activeSubscriptions: AppSubscription[];\n}\n\nexport interface ActiveSubscriptionLineItem {\n  /*\n   * The ID of the line item.\n   */\n  id: string;\n  /*\n   * The details of the plan.\n   */\n  plan: AppPlan;\n}\n\nexport interface RecurringAppPlan {\n  /*\n   * The interval for this plan is charged on.\n   */\n  interval: BillingInterval.Every30Days | BillingInterval.Annual;\n  /*\n   * The price of the plan.\n   */\n  price: Money;\n  /*\n   * The discount applied to the plan.\n   */\n  discount: AppPlanDiscount;\n}\n\nexport interface UsageAppPlan {\n  /*\n   * The total usage records for interval.\n   */\n  balanceUsed: Money;\n  /*\n   * The capped amount prevents the merchant from being charged for any usage over that amount during a billing period.\n   */\n  cappedAmount: Money;\n  /*\n   * The terms and conditions for app usage pricing.\n   */\n  terms: string;\n}\n\nexport interface Money {\n  amount: number;\n  currencyCode: string;\n}\n\nexport interface AppPlanDiscount {\n  /*\n   * The total number of intervals the discount applies to.\n   */\n  durationLimitInIntervals: number;\n  /*\n   * The remaining number of intervals the discount applies to.\n   */\n  remainingDurationInIntervals: number;\n  /*\n   * The price after the discount is applied.\n   */\n  priceAfterDiscount: Money;\n  /*\n   * The value of the discount applied every billing interval.\n   */\n  value: AppPlanDiscountAmount;\n}\n\nexport interface AppSubscriptionLineItemUpdatePayload {\n  userErrors: string[];\n  confirmationUrl: string;\n  appSubscription: AppSubscription;\n}\n\nexport type UpdateCappedAmountConfirmation = Omit<\n  AppSubscriptionLineItemUpdatePayload,\n  'userErrors'\n>;\n\ntype AppPlanDiscountAmount =\n  | BillingConfigSubscriptionPlanDiscountAmount\n  | BillingConfigSubscriptionPlanDiscountPercentage;\n\nexport interface AppPlan {\n  /*\n   * The pricing details of the plan.\n   */\n  pricingDetails: RecurringAppPlan | UsageAppPlan;\n}\nexport interface OneTimePurchase {\n  /**\n   * The ID of the one-time purchase.\n   */\n  id: string;\n  /**\n   * The name of the purchased plan.\n   */\n  name: string;\n  /**\n   * Whether this is a test purchase.\n   */\n  test: boolean;\n  /*\n   * The status of the subscription. [ACTIVE, CANCELLED, PENDING, DECLINED, EXPIRED, FROZEN, ACCEPTED]\n   */\n  status:\n    | 'ACTIVE'\n    | 'CANCELLED'\n    | 'PENDING'\n    | 'DECLINED'\n    | 'EXPIRED'\n    | 'FROZEN'\n    | 'ACCEPTED';\n}\n\nexport interface BillingCreateUsageRecordParams {\n  /**\n   * The session to use for this request.\n   */\n  session: Session;\n  /**\n   * The description of the usage record.\n   */\n  description: string;\n  /**\n   * The price and currency of the usage record.\n   */\n  price: {\n    /**\n     * The amount to charge for this usage record.\n     */\n    amount: number;\n    /**\n     * The currency code for this usage record.\n     */\n    currencyCode: string;\n  };\n  /**\n   * The subscription line item ID to associate the usage record with.\n   */\n  subscriptionLineItemId?: string;\n  /**\n   * The idempotency key for this request.\n   */\n  idempotencyKey?: string;\n  /**\n   * Whether this is a test charge.\n   * */\n  isTest?: boolean;\n}\n\nexport interface UsageRecord {\n  /**\n   * The ID of the usage record.\n   */\n  id: string;\n  /**\n   * The description of the usage record.\n   */\n  description: string;\n  /**\n   * The price and currency of the usage record.\n   */\n  price: {\n    /**\n     * The amount to charge for this usage record.\n     */\n    amount: number;\n    /**\n     * The currency code for this usage record.\n     */\n    currencyCode: string;\n  };\n  /**\n   * The subscription line item associated with the usage record.\n   */\n  plan: ActiveSubscriptionLineItem;\n  /**\n   * The idempotency key for this request.\n   */\n  idempotencyKey?: string;\n  /**\n   * The subscription line item associated with the usage record.\n   */\n  subscriptionLineItem: AppSubscriptionLineItem;\n}\n\nexport interface AppSubscriptionLineItem {\n  /**\n   * The ID of the subscription line item.\n   */\n  id: string;\n  /**\n   * The plan associated with the subscription line item.\n   */\n  plan: AppPlan;\n}\n\nexport interface BillingUpdateUsageCappedAmountParams {\n  /**\n   * The session to use for this request.\n   */\n  session: Session;\n  /**\n   * The subscription line item ID to update.\n   */\n  subscriptionLineItemId: string;\n  /**\n   * The maximum charge for the usage billing plan.\n   */\n  cappedAmount: {\n    /**\n     * The amount to update.\n     */\n    amount: number;\n    /**\n     * The currency code to update.\n     */\n    currencyCode: string;\n  };\n}\n\ninterface OneTimePurchases {\n  oneTimePurchases: {\n    edges: {\n      node: OneTimePurchase;\n    }[];\n    pageInfo: {\n      endCursor: string;\n      hasNextPage: boolean;\n    };\n  };\n}\n\nexport type CurrentAppInstallation = OneTimePurchases & ActiveSubscriptions;\n\nexport interface CurrentAppInstallations {\n  currentAppInstallation?: CurrentAppInstallation;\n}\n\nexport interface RequestResponse {\n  userErrors: string[];\n  confirmationUrl: string;\n}\n\ninterface AppSubscriptionCreate {\n  userErrors: string[];\n  confirmationUrl: string;\n  appSubscription: AppSubscription;\n}\n\ninterface AppPurchaseOneTimeCreate {\n  userErrors: string[];\n  confirmationUrl: string;\n  oneTimePurchase: OneTimePurchase;\n}\n\nexport interface RecurringPaymentResponse {\n  appSubscriptionCreate?: AppSubscriptionCreate;\n}\n\nexport interface SinglePaymentResponse {\n  appPurchaseOneTimeCreate?: AppPurchaseOneTimeCreate;\n}\n\nexport type RequestResponseData =\n  | AppSubscriptionCreate\n  | AppPurchaseOneTimeCreate;\n\nexport interface SubscriptionResponse {\n  currentAppInstallation?: ActiveSubscriptions;\n}\n\nexport interface CancelResponse {\n  appSubscriptionCancel?: {\n    appSubscription: AppSubscription;\n    userErrors: string[];\n  };\n}\n\nexport interface UsageRecordCreateResponse {\n  appUsageRecordCreate?: {\n    appUsageRecord: UsageRecord;\n    userErrors: string[];\n  };\n}\n\nexport interface BillingUpdateUsageCappedAmountResponse {\n  appSubscriptionLineItemUpdate?: AppSubscriptionLineItemUpdatePayload;\n}\n\nexport type BillingCheck<Future extends FutureFlagOptions> = <\n  Params extends BillingCheckParams<Future>,\n>(\n  params: Params,\n) => Promise<BillingCheckResponse<Params, Future>>;\n\nexport type BillingRequest = <Params extends BillingRequestParams>(\n  params: Params,\n) => Promise<BillingRequestResponse<Params>>;\n\nexport type BillingCancel = (\n  params: BillingCancelParams,\n) => Promise<AppSubscription>;\n\nexport type BillingSubscriptions = (\n  params: BillingSubscriptionParams,\n) => Promise<ActiveSubscriptions>;\n\nexport type BillingCreateUsageRecord = (\n  params: BillingCreateUsageRecordParams,\n) => Promise<UsageRecord>;\n\nexport type BillingUpdateUsageCappedAmount = (\n  params: BillingUpdateUsageCappedAmountParams,\n) => Promise<UpdateCappedAmountConfirmation>;\n\nexport interface ShopifyBilling<Future extends FutureFlagOptions> {\n  check: BillingCheck<Future>;\n  request: BillingRequest;\n  cancel: BillingCancel;\n  subscriptions: BillingSubscriptions;\n  createUsageRecord: BillingCreateUsageRecord;\n  updateUsageCappedAmount: BillingUpdateUsageCappedAmount;\n}\n\nexport const APP_SUBSCRIPTION_FRAGMENT = `\n  fragment AppSubscriptionFragment on AppSubscription {\n    id\n    name\n    test\n    status\n    trialDays\n    createdAt\n    currentPeriodEnd\n    returnUrl\n    lineItems {\n      id\n      plan {\n        pricingDetails {\n          ... on AppRecurringPricing {\n            price {\n              amount\n              currencyCode\n            }\n            interval\n            discount {\n              durationLimitInIntervals\n              remainingDurationInIntervals\n              priceAfterDiscount {\n                amount\n              }\n              value {\n                ... on AppSubscriptionDiscountAmount {\n                  amount {\n                    amount\n                    currencyCode\n                  }\n                }\n                ... on AppSubscriptionDiscountPercentage {\n                  percentage\n                }\n              }\n            }\n          }\n          ... on AppUsagePricing {\n            balanceUsed {\n              amount\n              currencyCode\n            }\n            cappedAmount {\n              amount\n              currencyCode\n            }\n            terms\n          }\n        }\n      }\n    }\n  }\n`;\n"],"names":[],"mappings":";;;;AA4oBO,MAAM,yBAAyB,GAAG,CAAA"}},
    {"offset": {"line": 4446, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/utils.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/billing/utils.ts"],"sourcesContent":["import {ActiveSubscriptionLineItem} from './types';\n\n/**\n * Converts string amounts to numbers in Money type objects\n */\nexport function convertMoneyAmount(data: any) {\n  if (!data) return data;\n\n  convertAppUsagePricingMoney(data);\n  convertAppRecurringPricingMoney(data);\n  convertAppDiscountMoney(data);\n\n  return data;\n}\n\nexport function convertAppRecurringPricingMoney(data: any): void {\n  if (!data) return;\n\n  if (data.price?.amount && typeof data.price.amount === 'string') {\n    data.price.amount = parseFloat(data.price.amount);\n  }\n}\n\nexport function convertAppDiscountMoney(data: any): void {\n  if (!data) return;\n\n  if (\n    data.discount?.priceAfterDiscount?.amount &&\n    typeof data.discount.priceAfterDiscount.amount === 'string'\n  ) {\n    data.discount.priceAfterDiscount.amount = parseFloat(\n      data.discount.priceAfterDiscount.amount,\n    );\n  }\n\n  if (\n    data.discount?.value?.amount?.amount &&\n    typeof data.discount.value.amount.amount === 'string'\n  ) {\n    data.discount.value.amount.amount = parseFloat(\n      data.discount.value.amount.amount,\n    );\n  }\n}\n\nexport function convertAppUsagePricingMoney(data: any): void {\n  if (!data) return;\n\n  if (data.balanceUsed?.amount && typeof data.balanceUsed.amount === 'string') {\n    data.balanceUsed.amount = parseFloat(data.balanceUsed.amount);\n  }\n\n  if (\n    data.cappedAmount?.amount &&\n    typeof data.cappedAmount.amount === 'string'\n  ) {\n    data.cappedAmount.amount = parseFloat(data.cappedAmount.amount);\n  }\n}\n\n/**\n * Converts Money amounts in line items\n */\nexport function convertLineItems(lineItems: ActiveSubscriptionLineItem[]) {\n  return lineItems.map((item) => {\n    if (item.plan?.pricingDetails) {\n      item.plan.pricingDetails = convertMoneyAmount(item.plan.pricingDetails);\n    }\n    return item;\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA;;CAEG,GACG,SAAU,kBAAkB,CAAC,IAAS,EAAA;IAC1C,IAAI,CAAC,IAAI,EAAE,OAAO,IAAI;IAEtB,2BAA2B,CAAC,IAAI,CAAC;IACjC,+BAA+B,CAAC,IAAI,CAAC;IACrC,uBAAuB,CAAC,IAAI,CAAC;IAE7B,OAAO,IAAI;AACb;AAEM,SAAU,+BAA+B,CAAC,IAAS,EAAA;IACvD,IAAI,CAAC,IAAI,EAAE;IAEX,IAAI,IAAI,CAAC,KAAK,EAAE,MAAM,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,QAAQ,EAAE;QAC/D,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;IACnD;AACF;AAEM,SAAU,uBAAuB,CAAC,IAAS,EAAA;IAC/C,IAAI,CAAC,IAAI,EAAE;IAEX,IACE,IAAI,CAAC,QAAQ,EAAE,kBAAkB,EAAE,MAAM,IACzC,OAAO,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,MAAM,KAAK,QAAQ,EAC3D;QACA,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,MAAM,GAAG,UAAU,CAClD,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,MAAM,CACxC;IACH;IAEA,IACE,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,IACpC,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,KAAK,QAAQ,EACrD;QACA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,UAAU,CAC5C,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAClC;IACH;AACF;AAEM,SAAU,2BAA2B,CAAC,IAAS,EAAA;IACnD,IAAI,CAAC,IAAI,EAAE;IAEX,IAAI,IAAI,CAAC,WAAW,EAAE,MAAM,IAAI,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,QAAQ,EAAE;QAC3E,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;IAC/D;IAEA,IACE,IAAI,CAAC,YAAY,EAAE,MAAM,IACzB,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,QAAQ,EAC5C;QACA,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;IACjE;AACF;AAEA;;CAEG,GACG,SAAU,gBAAgB,CAAC,SAAuC,EAAA;IACtE,OAAO,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI,KAAI;QAC5B,IAAI,IAAI,CAAC,IAAI,EAAE,cAAc,EAAE;YAC7B,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;QACzE;QACA,OAAO,IAAI;IACb,CAAC,CAAC;AACJ"}},
    {"offset": {"line": 4507, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/check.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/billing/check.ts"],"sourcesContent":["import {FutureFlagOptions} from '../../future/flags';\nimport {ConfigInterface} from '../base-types';\nimport {graphqlClientClass, GraphqlClient} from '../clients/admin';\nimport {BillingError} from '../error';\n\nimport {\n  AppSubscription,\n  BillingCheck,\n  BillingCheckParams,\n  BillingCheckResponse,\n  BillingCheckResponseObject,\n  CurrentAppInstallation,\n  CurrentAppInstallations,\n  OneTimePurchase,\n  APP_SUBSCRIPTION_FRAGMENT,\n} from './types';\nimport {convertLineItems} from './utils';\n\ninterface SubscriptionMeetsCriteriaParams {\n  subscription: AppSubscription;\n  isTest?: boolean;\n  plans?: string | string[];\n}\n\ninterface PurchaseMeetsCriteriaParams {\n  purchase: OneTimePurchase;\n  isTest?: boolean;\n  plans?: string | string[];\n}\n\ninterface InternalParams {\n  client: GraphqlClient;\n  isTest?: boolean;\n  plans?: string | string[];\n}\n\nexport function check<\n  Config extends ConfigInterface,\n  Future extends FutureFlagOptions = Config['future'],\n>(config: Config): BillingCheck<Future> {\n  return async function check<Params extends BillingCheckParams<Future>>(\n    params: Params,\n  ): Promise<BillingCheckResponse<Params, Future>> {\n    if (!config.future?.unstable_managedPricingSupport && !config.billing) {\n      throw new BillingError({\n        message: 'Attempted to look for purchases without billing configs',\n        errorData: [],\n      });\n    }\n\n    const {session, isTest = true, plans} = params;\n    const returnObject =\n      (params as BillingCheckParams<{unstable_managedPricingSupport: false}>)\n        .returnObject ?? false;\n\n    const GraphqlClient = graphqlClientClass({config});\n    const client = new GraphqlClient({session});\n\n    const payments = await assessPayments({client, isTest, plans});\n\n    if (config.future?.unstable_managedPricingSupport || returnObject) {\n      return payments as BillingCheckResponse<Params, Future>;\n    } else {\n      return payments.hasActivePayment as BillingCheckResponse<Params, Future>;\n    }\n  };\n}\n\nexport async function assessPayments({\n  client,\n  isTest,\n  plans,\n}: InternalParams): Promise<BillingCheckResponseObject> {\n  const returnValue: BillingCheckResponseObject = {\n    hasActivePayment: false,\n    oneTimePurchases: [],\n    appSubscriptions: [],\n  };\n\n  let installation: CurrentAppInstallation;\n  let endCursor: string | null = null;\n  do {\n    const currentInstallations = await client.request<CurrentAppInstallations>(\n      HAS_PAYMENTS_QUERY,\n      {variables: {endCursor}},\n    );\n\n    installation = currentInstallations.data?.currentAppInstallation!;\n    installation.activeSubscriptions.forEach((subscription) => {\n      if (subscriptionMeetsCriteria({subscription, isTest, plans})) {\n        returnValue.hasActivePayment = true;\n        if (subscription.lineItems) {\n          subscription.lineItems = convertLineItems(subscription.lineItems);\n        }\n        returnValue.appSubscriptions.push(subscription);\n      }\n    });\n    installation.oneTimePurchases.edges.forEach(({node: purchase}) => {\n      if (purchaseMeetsCriteria({purchase, isTest, plans})) {\n        returnValue.hasActivePayment = true;\n        returnValue.oneTimePurchases.push(purchase);\n      }\n    });\n\n    endCursor = installation.oneTimePurchases.pageInfo.endCursor;\n  } while (installation?.oneTimePurchases.pageInfo.hasNextPage);\n\n  return returnValue;\n}\n\nfunction subscriptionMeetsCriteria({\n  subscription,\n  isTest,\n  plans,\n}: SubscriptionMeetsCriteriaParams): boolean {\n  return (\n    (typeof plans === 'undefined' || plans.includes(subscription.name)) &&\n    (isTest || !subscription.test)\n  );\n}\n\nfunction purchaseMeetsCriteria({\n  purchase,\n  isTest,\n  plans,\n}: PurchaseMeetsCriteriaParams): boolean {\n  return (\n    (typeof plans === 'undefined' || plans.includes(purchase.name)) &&\n    (isTest || !purchase.test) &&\n    purchase.status === 'ACTIVE'\n  );\n}\n\nconst HAS_PAYMENTS_QUERY = `\n  ${APP_SUBSCRIPTION_FRAGMENT}\n  query appSubscription($endCursor: String) {\n    currentAppInstallation {\n      activeSubscriptions {\n        ...AppSubscriptionFragment\n      }\n      oneTimePurchases(first: 250, sortKey: CREATED_AT, after: $endCursor) {\n        edges {\n          node {\n            id\n            name\n            test\n            status\n          }\n        }\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n      }\n    }\n  }\n`;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4633, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/request.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/billing/request.ts"],"sourcesContent":["import {ConfigInterface, ConfigParams} from '../base-types';\nimport {BillingInterval} from '../types';\nimport {BillingError} from '../error';\nimport {buildEmbeddedAppUrl} from '../auth/get-embedded-app-url';\nimport {GraphqlClient, graphqlClientClass} from '../clients/admin';\nimport {hashString} from '../../runtime/crypto';\nimport {HashFormat} from '../../runtime/crypto/types';\nimport {FutureFlagOptions} from '../../future/flags';\n\nimport {\n  BillingConfigOneTimePlan,\n  BillingRequestParams,\n  BillingRequestResponse,\n  RecurringPaymentResponse,\n  RequestResponseData,\n  SinglePaymentResponse,\n  BillingConfigSubscriptionLineItemPlan,\n  RequestConfigLineItemOverrides,\n  BillingRequest,\n  APP_SUBSCRIPTION_FRAGMENT,\n} from './types';\n\nconst RECURRING_PURCHASE_MUTATION = `\n  ${APP_SUBSCRIPTION_FRAGMENT}\n  mutation AppSubscriptionCreate(\n    $name: String!\n    $returnUrl: URL!\n    $test: Boolean\n    $trialDays: Int\n    $replacementBehavior: AppSubscriptionReplacementBehavior\n    $lineItems: [AppSubscriptionLineItemInput!]!\n  ) {\n    appSubscriptionCreate(\n      name: $name\n      returnUrl: $returnUrl\n      test: $test\n      trialDays: $trialDays\n      replacementBehavior: $replacementBehavior\n      lineItems: $lineItems\n    ) {\n      appSubscription {\n        ...AppSubscriptionFragment\n      }\n      confirmationUrl\n      userErrors {\n        field\n        message\n      }\n    }\n  }\n`;\n\nconst ONE_TIME_PURCHASE_MUTATION = `\n  mutation test(\n    $name: String!\n    $price: MoneyInput!\n    $returnUrl: URL!\n    $test: Boolean\n  ) {\n    appPurchaseOneTimeCreate(\n      name: $name\n      price: $price\n      returnUrl: $returnUrl\n      test: $test\n    ) {\n      appPurchaseOneTime {\n        id\n        name\n        test\n      }\n      confirmationUrl\n      userErrors {\n        field\n        message\n      }\n    }\n  }\n`;\n\ninterface RequestInternalParams {\n  client: GraphqlClient;\n  plan: string;\n  returnUrl: string;\n  isTest: boolean;\n}\n\ninterface RequestOneTimePaymentInternalParams extends RequestInternalParams {\n  billingConfig: BillingConfigOneTimePlan;\n}\n\ninterface RequestSubscriptionParams extends RequestInternalParams {\n  billingConfig: BillingConfigSubscriptionLineItemPlan;\n}\n\nexport function request<\n  Config extends ConfigInterface<Params>,\n  Params extends ConfigParams<any, Future>,\n  Future extends FutureFlagOptions,\n>(config: Config): BillingRequest {\n  return async function <Params extends BillingRequestParams>({\n    session,\n    plan,\n    isTest = true,\n    returnUrl: returnUrlParam,\n    returnObject = false,\n    ...overrides\n  }: Params): Promise<BillingRequestResponse<Params>> {\n    if (!config.billing || !config.billing[plan]) {\n      throw new BillingError({\n        message: `Could not find plan ${plan} in billing settings`,\n        errorData: [],\n      });\n    }\n\n    const billingConfig = {\n      ...config.billing[plan],\n    };\n    const filteredOverrides = Object.fromEntries(\n      Object.entries(overrides).filter(([_key, value]) => value !== undefined),\n    );\n\n    const cleanShopName = session.shop.replace('.myshopify.com', '');\n    const embeddedAppUrl = buildEmbeddedAppUrl(config)(\n      hashString(`admin.shopify.com/store/${cleanShopName}`, HashFormat.Base64),\n    );\n\n    const appUrl = `${config.hostScheme}://${config.hostName}?shop=${session.shop}`;\n\n    // if provided a return URL, use it, otherwise use the embedded app URL or hosted app URL\n    const returnUrl =\n      returnUrlParam || (config.isEmbeddedApp ? embeddedAppUrl : appUrl);\n\n    const GraphqlClient = graphqlClientClass({config});\n    const client = new GraphqlClient({session});\n\n    function isLineItemPlan(\n      billingConfig: any,\n    ): billingConfig is BillingConfigSubscriptionLineItemPlan {\n      return 'lineItems' in billingConfig;\n    }\n\n    function isOneTimePlan(\n      billingConfig: any,\n    ): billingConfig is BillingConfigOneTimePlan {\n      return billingConfig.interval === BillingInterval.OneTime;\n    }\n\n    let data: RequestResponseData;\n    if (isLineItemPlan(billingConfig)) {\n      const mergedBillingConfigs = mergeBillingConfigs(\n        billingConfig,\n        filteredOverrides,\n      );\n      const mutationRecurringResponse = await requestSubscriptionPayment({\n        billingConfig: mergedBillingConfigs,\n        plan,\n        client,\n        returnUrl,\n        isTest,\n      });\n\n      data = mutationRecurringResponse.appSubscriptionCreate!;\n    } else if (isOneTimePlan(billingConfig)) {\n      const mutationOneTimeResponse = await requestSinglePayment({\n        billingConfig: {...billingConfig, ...filteredOverrides},\n        plan,\n        client,\n        returnUrl,\n        isTest,\n      });\n      data = mutationOneTimeResponse.appPurchaseOneTimeCreate!;\n    } else {\n      throw new BillingError({\n        message: `Invalid billing configuration for plan ${plan}. Must be either a one-time plan or a subscription plan with line items.`,\n        errorData: [],\n      });\n    }\n\n    if (data.userErrors?.length) {\n      throw new BillingError({\n        message: 'Error while billing the store',\n        errorData: data.userErrors,\n      });\n    }\n\n    if (returnObject) {\n      return data as Omit<\n        RequestResponseData,\n        'userErrors'\n      > as BillingRequestResponse<Params>;\n    } else {\n      return data.confirmationUrl as BillingRequestResponse<Params>;\n    }\n  };\n}\n\nasync function requestSubscriptionPayment({\n  billingConfig,\n  plan,\n  client,\n  returnUrl,\n  isTest,\n}: RequestSubscriptionParams): Promise<RecurringPaymentResponse> {\n  const lineItems = billingConfig.lineItems.map((item) => {\n    if (\n      item.interval === BillingInterval.Every30Days ||\n      item.interval === BillingInterval.Annual\n    ) {\n      const appRecurringPricingDetails: any = {\n        interval: item.interval,\n        price: {\n          amount: item.amount,\n          currencyCode: item.currencyCode,\n        },\n      };\n\n      if (item.discount) {\n        appRecurringPricingDetails.discount = {\n          durationLimitInIntervals: item.discount.durationLimitInIntervals,\n          value: {\n            amount: item.discount.value.amount,\n            percentage: item.discount.value.percentage,\n          },\n        };\n      }\n\n      return {\n        plan: {\n          appRecurringPricingDetails,\n        },\n      };\n    } else if (item.interval === BillingInterval.Usage) {\n      const appUsagePricingDetails = {\n        terms: item.terms,\n        cappedAmount: {\n          amount: item.amount,\n          currencyCode: item.currencyCode,\n        },\n      };\n\n      return {\n        plan: {\n          appUsagePricingDetails,\n        },\n      };\n    } else {\n      throw new BillingError({\n        message: 'Invalid interval provided',\n        errorData: [item],\n      });\n    }\n  });\n\n  const mutationResponse = await client.request<RecurringPaymentResponse>(\n    RECURRING_PURCHASE_MUTATION,\n    {\n      variables: {\n        name: plan,\n        trialDays: billingConfig.trialDays,\n        replacementBehavior: billingConfig.replacementBehavior,\n        returnUrl,\n        test: isTest,\n        lineItems,\n      },\n    },\n  );\n\n  if (mutationResponse.errors) {\n    throw new BillingError({\n      message: 'Error while billing the store',\n      errorData: mutationResponse.errors,\n    });\n  }\n\n  return mutationResponse.data!;\n}\n\nasync function requestSinglePayment({\n  billingConfig,\n  plan,\n  client,\n  returnUrl,\n  isTest,\n}: RequestOneTimePaymentInternalParams): Promise<SinglePaymentResponse> {\n  const mutationResponse = await client.request<SinglePaymentResponse>(\n    ONE_TIME_PURCHASE_MUTATION,\n    {\n      variables: {\n        name: plan,\n        returnUrl,\n        test: isTest,\n        price: {\n          amount: billingConfig.amount,\n          currencyCode: billingConfig.currencyCode,\n        },\n      },\n    },\n  );\n\n  if (mutationResponse.errors) {\n    throw new BillingError({\n      message: 'Error while billing the store',\n      errorData: mutationResponse.errors,\n    });\n  }\n\n  return mutationResponse.data!;\n}\n\nfunction mergeBillingConfigs(\n  billingConfig: BillingConfigSubscriptionLineItemPlan,\n  overrides: RequestConfigLineItemOverrides,\n): BillingConfigSubscriptionLineItemPlan {\n  const mergedConfig = {...billingConfig, ...overrides};\n  const mergedLineItems = [];\n\n  if (billingConfig.lineItems && overrides.lineItems) {\n    for (const i of billingConfig.lineItems) {\n      let found = false;\n\n      for (const j of overrides.lineItems) {\n        if (i.interval === j!.interval) {\n          mergedLineItems.push({...i, ...j});\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        mergedLineItems.push(i);\n      }\n    }\n\n    mergedConfig.lineItems = mergedLineItems;\n  }\n\n  return mergedConfig as BillingConfigSubscriptionLineItemPlan;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAsBA,MAAM,2BAA2B,GAAG,CAAA;IAChC,qNAAyB,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2B5B;AAED,MAAM,0BAA0B,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;CAyBlC;AAiBK,SAAU,OAAO,CAIrB,MAAc,EAAA;IACd,OAAO,eAAqD,EAC1D,OAAO,EACP,IAAI,EACJ,MAAM,GAAG,IAAI,EACb,SAAS,EAAE,cAAc,EACzB,YAAY,GAAG,KAAK,EACpB,GAAG,SAAS,EACL,EAAA;QACP,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAC5C,MAAM,IAAI,6LAAY,CAAC;gBACrB,OAAO,EAAE,CAAA,oBAAA,EAAuB,IAAI,CAAA,oBAAA,CAAsB;gBAC1D,SAAS,EAAE,EAAE;YACd,CAAA,CAAC;QACJ;QAEA,MAAM,aAAa,GAAG;YACpB,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC;SACxB;QACD,MAAM,iBAAiB,GAAG,MAAM,CAAC,WAAW,CAC1C,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,GAAK,KAAK,KAAK,SAAS,CAAC,CACzE;QAED,MAAM,aAAa,GAAG,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,EAAE,CAAC;QAChE,MAAM,cAAc,OAAG,oOAAmB,EAAC,MAAM,CAAC,KAChD,yMAAU,EAAC,CAAA,wBAAA,EAA2B,aAAa,EAAE,EAAE,yMAAU,CAAC,MAAM,CAAC,CAC1E;QAED,MAAM,MAAM,GAAG,CAAA,EAAG,MAAM,CAAC,UAAU,CAAA,GAAA,EAAM,MAAM,CAAC,QAAQ,CAAA,MAAA,EAAS,OAAO,CAAC,IAAI,EAAE;;QAG/E,MAAM,SAAS,GACb,cAAc,IAAA,CAAK,MAAM,CAAC,aAAa,GAAG,cAAc,GAAG,MAAM,CAAC;QAEpE,MAAM,aAAa,OAAG,mOAAkB,EAAC;YAAC,MAAM;QAAA,CAAC,CAAC;QAClD,MAAM,MAAM,GAAG,IAAI,aAAa,CAAC;YAAC,OAAO;QAAA,CAAC,CAAC;QAE3C,SAAS,cAAc,CACrB,aAAkB,EAAA;YAElB,OAAO,WAAW,IAAI,aAAa;QACrC;QAEA,SAAS,aAAa,CACpB,aAAkB,EAAA;YAElB,OAAO,aAAa,CAAC,QAAQ,KAAK,gMAAe,CAAC,OAAO;QAC3D;QAEA,IAAI,IAAyB;QAC7B,IAAI,cAAc,CAAC,aAAa,CAAC,EAAE;YACjC,MAAM,oBAAoB,GAAG,mBAAmB,CAC9C,aAAa,EACb,iBAAiB,CAClB;YACD,MAAM,yBAAyB,GAAG,MAAM,0BAA0B,CAAC;gBACjE,aAAa,EAAE,oBAAoB;gBACnC,IAAI;gBACJ,MAAM;gBACN,SAAS;gBACT,MAAM;YACP,CAAA,CAAC;YAEF,IAAI,GAAG,yBAAyB,CAAC,qBAAsB;QACzD,OAAO,IAAI,aAAa,CAAC,aAAa,CAAC,EAAE;YACvC,MAAM,uBAAuB,GAAG,MAAM,oBAAoB,CAAC;gBACzD,aAAa,EAAE;oBAAC,GAAG,aAAa;oBAAE,GAAG,iBAAiB;gBAAA,CAAC;gBACvD,IAAI;gBACJ,MAAM;gBACN,SAAS;gBACT,MAAM;YACP,CAAA,CAAC;YACF,IAAI,GAAG,uBAAuB,CAAC,wBAAyB;QAC1D,OAAO;YACL,MAAM,IAAI,6LAAY,CAAC;gBACrB,OAAO,EAAE,CAAA,uCAAA,EAA0C,IAAI,CAAA,wEAAA,CAA0E;gBACjI,SAAS,EAAE,EAAE;YACd,CAAA,CAAC;QACJ;QAEA,IAAI,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE;YAC3B,MAAM,IAAI,6LAAY,CAAC;gBACrB,OAAO,EAAE,+BAA+B;gBACxC,SAAS,EAAE,IAAI,CAAC,UAAU;YAC3B,CAAA,CAAC;QACJ;QAEA,IAAI,YAAY,EAAE;YAChB,OAAO,IAG4B;QACrC,OAAO;YACL,OAAO,IAAI,CAAC,eAAiD;QAC/D;IACF,CAAC;AACH;AAEA,eAAe,0BAA0B,CAAC,EACxC,aAAa,EACb,IAAI,EACJ,MAAM,EACN,SAAS,EACT,MAAM,EACoB,EAAA;IAC1B,MAAM,SAAS,GAAG,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI,KAAI;QACrD,IACE,IAAI,CAAC,QAAQ,KAAK,gMAAe,CAAC,WAAW,IAC7C,IAAI,CAAC,QAAQ,KAAK,gMAAe,CAAC,MAAM,EACxC;YACA,MAAM,0BAA0B,GAAQ;gBACtC,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,KAAK,EAAE;oBACL,MAAM,EAAE,IAAI,CAAC,MAAM;oBACnB,YAAY,EAAE,IAAI,CAAC,YAAY;gBAChC,CAAA;aACF;YAED,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,0BAA0B,CAAC,QAAQ,GAAG;oBACpC,wBAAwB,EAAE,IAAI,CAAC,QAAQ,CAAC,wBAAwB;oBAChE,KAAK,EAAE;wBACL,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM;wBAClC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU;oBAC3C,CAAA;iBACF;YACH;YAEA,OAAO;gBACL,IAAI,EAAE;oBACJ,0BAA0B;gBAC3B,CAAA;aACF;QACH,OAAO,IAAI,IAAI,CAAC,QAAQ,KAAK,gMAAe,CAAC,KAAK,EAAE;YAClD,MAAM,sBAAsB,GAAG;gBAC7B,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,YAAY,EAAE;oBACZ,MAAM,EAAE,IAAI,CAAC,MAAM;oBACnB,YAAY,EAAE,IAAI,CAAC,YAAY;gBAChC,CAAA;aACF;YAED,OAAO;gBACL,IAAI,EAAE;oBACJ,sBAAsB;gBACvB,CAAA;aACF;QACH,OAAO;YACL,MAAM,IAAI,6LAAY,CAAC;gBACrB,OAAO,EAAE,2BAA2B;gBACpC,SAAS,EAAE;oBAAC,IAAI;iBAAC;YAClB,CAAA,CAAC;QACJ;IACF,CAAC,CAAC;IAEF,MAAM,gBAAgB,GAAG,MAAM,MAAM,CAAC,OAAO,CAC3C,2BAA2B,EAC3B;QACE,SAAS,EAAE;YACT,IAAI,EAAE,IAAI;YACV,SAAS,EAAE,aAAa,CAAC,SAAS;YAClC,mBAAmB,EAAE,aAAa,CAAC,mBAAmB;YACtD,SAAS;YACT,IAAI,EAAE,MAAM;YACZ,SAAS;QACV,CAAA;IACF,CAAA,CACF;IAED,IAAI,gBAAgB,CAAC,MAAM,EAAE;QAC3B,MAAM,IAAI,6LAAY,CAAC;YACrB,OAAO,EAAE,+BAA+B;YACxC,SAAS,EAAE,gBAAgB,CAAC,MAAM;QACnC,CAAA,CAAC;IACJ;IAEA,OAAO,gBAAgB,CAAC,IAAK;AAC/B;AAEA,eAAe,oBAAoB,CAAC,EAClC,aAAa,EACb,IAAI,EACJ,MAAM,EACN,SAAS,EACT,MAAM,EAC8B,EAAA;IACpC,MAAM,gBAAgB,GAAG,MAAM,MAAM,CAAC,OAAO,CAC3C,0BAA0B,EAC1B;QACE,SAAS,EAAE;YACT,IAAI,EAAE,IAAI;YACV,SAAS;YACT,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE;gBACL,MAAM,EAAE,aAAa,CAAC,MAAM;gBAC5B,YAAY,EAAE,aAAa,CAAC,YAAY;YACzC,CAAA;QACF,CAAA;IACF,CAAA,CACF;IAED,IAAI,gBAAgB,CAAC,MAAM,EAAE;QAC3B,MAAM,IAAI,6LAAY,CAAC;YACrB,OAAO,EAAE,+BAA+B;YACxC,SAAS,EAAE,gBAAgB,CAAC,MAAM;QACnC,CAAA,CAAC;IACJ;IAEA,OAAO,gBAAgB,CAAC,IAAK;AAC/B;AAEA,SAAS,mBAAmB,CAC1B,aAAoD,EACpD,SAAyC,EAAA;IAEzC,MAAM,YAAY,GAAG;QAAC,GAAG,aAAa;QAAE,GAAG,SAAS;IAAA,CAAC;IACrD,MAAM,eAAe,GAAG,EAAE;IAE1B,IAAI,aAAa,CAAC,SAAS,IAAI,SAAS,CAAC,SAAS,EAAE;QAClD,KAAK,MAAM,CAAC,IAAI,aAAa,CAAC,SAAS,CAAE;YACvC,IAAI,KAAK,GAAG,KAAK;YAEjB,KAAK,MAAM,CAAC,IAAI,SAAS,CAAC,SAAS,CAAE;gBACnC,IAAI,CAAC,CAAC,QAAQ,KAAK,CAAE,CAAC,QAAQ,EAAE;oBAC9B,eAAe,CAAC,IAAI,CAAC;wBAAC,GAAG,CAAC;wBAAE,GAAG,CAAC;oBAAA,CAAC,CAAC;oBAClC,KAAK,GAAG,IAAI;oBACZ;gBACF;YACF;YAEA,IAAI,CAAC,KAAK,EAAE;gBACV,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC;YACzB;QACF;QAEA,YAAY,CAAC,SAAS,GAAG,eAAe;IAC1C;IAEA,OAAO,YAAqD;AAC9D"}},
    {"offset": {"line": 4899, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/cancel.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/billing/cancel.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\nimport {graphqlClientClass} from '../clients/admin';\nimport {BillingError, GraphqlQueryError} from '../error';\n\nimport {\n  AppSubscription,\n  BillingCancel,\n  BillingCancelParams,\n  CancelResponse,\n  APP_SUBSCRIPTION_FRAGMENT,\n} from './types';\n\nconst CANCEL_MUTATION = `\n  ${APP_SUBSCRIPTION_FRAGMENT}\n  mutation appSubscriptionCancel($id: ID!, $prorate: Boolean) {\n    appSubscriptionCancel(id: $id, prorate: $prorate) {\n      appSubscription {\n        ...AppSubscriptionFragment\n      }\n      userErrors {\n        field\n        message\n      }\n    }\n  }\n`;\n\nexport function cancel(config: ConfigInterface): BillingCancel {\n  return async function (\n    subscriptionInfo: BillingCancelParams,\n  ): Promise<AppSubscription> {\n    const {session, subscriptionId, prorate = true} = subscriptionInfo;\n\n    const GraphqlClient = graphqlClientClass({config});\n    const client = new GraphqlClient({session});\n\n    try {\n      const response = await client.request<CancelResponse>(CANCEL_MUTATION, {\n        variables: {id: subscriptionId, prorate},\n      });\n\n      if (response.data?.appSubscriptionCancel?.userErrors.length) {\n        throw new BillingError({\n          message: 'Error while canceling a subscription',\n          errorData: response.data?.appSubscriptionCancel?.userErrors,\n        });\n      }\n\n      return response.data?.appSubscriptionCancel?.appSubscription!;\n    } catch (error) {\n      if (error instanceof GraphqlQueryError) {\n        throw new BillingError({\n          message: error.message,\n          errorData: error.response?.errors,\n        });\n      } else {\n        throw error;\n      }\n    }\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAYA,MAAM,eAAe,GAAG,CAAA;IACpB,qNAAyB,CAAA;;;;;;;;;;;;CAY5B;AAEK,SAAU,MAAM,CAAC,MAAuB,EAAA;IAC5C,OAAO,eACL,gBAAqC,EAAA;QAErC,MAAM,EAAC,OAAO,EAAE,cAAc,EAAE,OAAO,GAAG,IAAI,EAAC,GAAG,gBAAgB;QAElE,MAAM,aAAa,OAAG,mOAAkB,EAAC;YAAC,MAAM;QAAA,CAAC,CAAC;QAClD,MAAM,MAAM,GAAG,IAAI,aAAa,CAAC;YAAC,OAAO;QAAA,CAAC,CAAC;QAE3C,IAAI;YACF,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,OAAO,CAAiB,eAAe,EAAE;gBACrE,SAAS,EAAE;oBAAC,EAAE,EAAE,cAAc;oBAAE,OAAO;gBAAA,CAAC;YACzC,CAAA,CAAC;YAEF,IAAI,QAAQ,CAAC,IAAI,EAAE,qBAAqB,EAAE,UAAU,CAAC,MAAM,EAAE;gBAC3D,MAAM,IAAI,6LAAY,CAAC;oBACrB,OAAO,EAAE,sCAAsC;oBAC/C,SAAS,EAAE,QAAQ,CAAC,IAAI,EAAE,qBAAqB,EAAE,UAAU;gBAC5D,CAAA,CAAC;YACJ;YAEA,OAAO,QAAQ,CAAC,IAAI,EAAE,qBAAqB,EAAE,eAAgB;QAC/D,EAAE,OAAO,KAAK,EAAE;YACd,IAAI,KAAK,YAAY,kMAAiB,EAAE;gBACtC,MAAM,IAAI,6LAAY,CAAC;oBACrB,OAAO,EAAE,KAAK,CAAC,OAAO;oBACtB,SAAS,EAAE,KAAK,CAAC,QAAQ,EAAE,MAAM;gBAClC,CAAA,CAAC;YACJ,OAAO;gBACL,MAAM,KAAK;YACb;QACF;IACF,CAAC;AACH"}},
    {"offset": {"line": 4970, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/subscriptions.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/billing/subscriptions.ts"],"sourcesContent":["import {BillingError} from '../error';\nimport {ConfigInterface} from '../base-types';\nimport {graphqlClientClass} from '../clients/admin';\n\nimport {\n  ActiveSubscriptions,\n  BillingSubscriptionParams,\n  BillingSubscriptions,\n  SubscriptionResponse,\n  APP_SUBSCRIPTION_FRAGMENT,\n} from './types';\nimport {convertLineItems} from './utils';\n\nconst SUBSCRIPTION_QUERY = `\n${APP_SUBSCRIPTION_FRAGMENT}\nquery appSubscription {\n  currentAppInstallation {\n    activeSubscriptions {\n      ...AppSubscriptionFragment\n    }\n  }\n}\n`;\n\nexport function subscriptions(config: ConfigInterface): BillingSubscriptions {\n  return async function ({\n    session,\n  }: BillingSubscriptionParams): Promise<ActiveSubscriptions> {\n    if (!config.future?.unstable_managedPricingSupport && !config.billing) {\n      throw new BillingError({\n        message: 'Attempted to look for purchases without billing configs',\n        errorData: [],\n      });\n    }\n\n    const GraphqlClient = graphqlClientClass({config});\n    const client = new GraphqlClient({session});\n\n    const response =\n      await client.request<SubscriptionResponse>(SUBSCRIPTION_QUERY);\n\n    if (!response.data?.currentAppInstallation?.activeSubscriptions) {\n      return {activeSubscriptions: []};\n    }\n\n    const activeSubscriptions =\n      response.data.currentAppInstallation.activeSubscriptions;\n    activeSubscriptions.forEach((subscription) => {\n      if (subscription.lineItems) {\n        subscription.lineItems = convertLineItems(subscription.lineItems);\n      }\n    });\n\n    return {\n      activeSubscriptions,\n    };\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAaA,MAAM,kBAAkB,GAAG,CAAA;EACzB,qNAAyB,CAAA;;;;;;;;CAQ1B;AAEK,SAAU,aAAa,CAAC,MAAuB,EAAA;IACnD,OAAO,eAAgB,EACrB,OAAO,EACmB,EAAA;QAC1B,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,8BAA8B,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;YACrE,MAAM,IAAI,6LAAY,CAAC;gBACrB,OAAO,EAAE,yDAAyD;gBAClE,SAAS,EAAE,EAAE;YACd,CAAA,CAAC;QACJ;QAEA,MAAM,aAAa,OAAG,mOAAkB,EAAC;YAAC,MAAM;QAAA,CAAC,CAAC;QAClD,MAAM,MAAM,GAAG,IAAI,aAAa,CAAC;YAAC,OAAO;QAAA,CAAC,CAAC;QAE3C,MAAM,QAAQ,GACZ,MAAM,MAAM,CAAC,OAAO,CAAuB,kBAAkB,CAAC;QAEhE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,sBAAsB,EAAE,mBAAmB,EAAE;YAC/D,OAAO;gBAAC,mBAAmB,EAAE,EAAE;YAAA,CAAC;QAClC;QAEA,MAAM,mBAAmB,GACvB,QAAQ,CAAC,IAAI,CAAC,sBAAsB,CAAC,mBAAmB;QAC1D,mBAAmB,CAAC,OAAO,CAAC,CAAC,YAAY,KAAI;YAC3C,IAAI,YAAY,CAAC,SAAS,EAAE;gBAC1B,YAAY,CAAC,SAAS,OAAG,4MAAgB,EAAC,YAAY,CAAC,SAAS,CAAC;YACnE;QACF,CAAC,CAAC;QAEF,OAAO;YACL,mBAAmB;SACpB;IACH,CAAC;AACH"}},
    {"offset": {"line": 5035, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/create-usage-record.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/billing/create-usage-record.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\nimport {BillingError, GraphqlQueryError} from '../error';\nimport {GraphqlClient, graphqlClientClass} from '../clients/admin';\n\nimport {\n  AppSubscription,\n  BillingCreateUsageRecord,\n  BillingCreateUsageRecordParams,\n  UsageRecord,\n  UsageRecordCreateResponse,\n  Money,\n} from './types';\nimport {assessPayments} from './check';\nimport {convertAppRecurringPricingMoney, convertAppUsagePricingMoney} from './utils';\ninterface InternalParams {\n  client: GraphqlClient;\n  isTest?: boolean;\n}\n\ninterface CreateUsageRecordVariables {\n  description: string;\n  price: Money;\n  subscriptionLineItemId: string;\n  idempotencyKey?: string;\n}\n\nconst CREATE_USAGE_RECORD_MUTATION = `\nmutation appUsageRecordCreate($description: String!, $price: MoneyInput!, $subscriptionLineItemId: ID!) {\n  appUsageRecordCreate(description: $description, price: $price, subscriptionLineItemId: $subscriptionLineItemId) {\n    userErrors {\n      field\n      message\n    }\n    appUsageRecord {\n      id\n      description\n      idempotencyKey\n      price {\n        amount\n        currencyCode\n      }\n      subscriptionLineItem {\n        id\n        plan {\n          pricingDetails {\n            ... on AppUsagePricing {\n              balanceUsed {\n                amount\n                currencyCode\n              }\n              cappedAmount {\n                amount\n                currencyCode\n              }\n              terms\n            }\n          }\n        }\n      }\n    }\n  }\n}\n`;\n\nexport function createUsageRecord(\n  config: ConfigInterface,\n): BillingCreateUsageRecord {\n  return async function createUsageRecord(\n    usageRecordInfo: BillingCreateUsageRecordParams,\n  ): Promise<UsageRecord> {\n    const {\n      session,\n      subscriptionLineItemId,\n      description,\n      price,\n      idempotencyKey,\n      isTest = true,\n    } = usageRecordInfo;\n\n    const GraphqlClient = graphqlClientClass({config});\n    const client = new GraphqlClient({session});\n\n    // If a subscription line item ID is not passed, we will query Shopify\n    // for an active usage subscription line item ID\n    const usageSubscriptionLineItemId = subscriptionLineItemId\n      ? subscriptionLineItemId\n      : await getUsageRecordSubscriptionLineItemId({client, isTest});\n\n    const variables: CreateUsageRecordVariables = {\n      description,\n      price,\n      subscriptionLineItemId: usageSubscriptionLineItemId,\n    };\n    if (idempotencyKey) {\n      variables.idempotencyKey = idempotencyKey;\n    }\n\n    try {\n      const response = await client.request<UsageRecordCreateResponse>(\n        CREATE_USAGE_RECORD_MUTATION,\n        {\n          variables,\n        },\n      );\n      if (response.data?.appUsageRecordCreate?.userErrors.length) {\n        throw new BillingError({\n          message: 'Error while creating a usage record',\n          errorData: response.data?.appUsageRecordCreate?.userErrors,\n        });\n      }\n\n      const appUsageRecord = response.data?.appUsageRecordCreate?.appUsageRecord!;\n      convertAppRecurringPricingMoney(appUsageRecord.price);\n      convertAppUsagePricingMoney(appUsageRecord.subscriptionLineItem.plan.pricingDetails);\n\n      return appUsageRecord;\n    } catch (error) {\n      if (error instanceof GraphqlQueryError) {\n        throw new BillingError({\n          message: error.message,\n          errorData: error.response?.errors,\n        });\n      } else {\n        throw error;\n      }\n    }\n  };\n}\n\nasync function getUsageRecordSubscriptionLineItemId({\n  client,\n  isTest,\n}: InternalParams): Promise<string> {\n  const payments = await assessPayments({client, isTest});\n\n  if (!payments.hasActivePayment) {\n    throw new BillingError({\n      message: 'No active payment found',\n      errorData: [],\n    });\n  }\n  if (!payments.appSubscriptions.length) {\n    throw new BillingError({\n      message: 'No active subscriptions found',\n      errorData: [],\n    });\n  }\n  if (payments.appSubscriptions) {\n    const usageSubscriptionLineItemId = getUsageLineItemId(\n      payments.appSubscriptions,\n    );\n    return usageSubscriptionLineItemId;\n  }\n  throw new BillingError({\n    message: 'Unable to find active subscription line item',\n    errorData: [],\n  });\n}\n\nfunction getUsageLineItemId(subscriptions: AppSubscription[]): string {\n  for (const subscription of subscriptions) {\n    // An app can have only one active subscription\n    if (subscription.status === 'ACTIVE' && subscription.lineItems) {\n      // An app can have only one usage subscription line item\n      for (const lineItem of subscription.lineItems) {\n        if ('balanceUsed' in lineItem.plan.pricingDetails) {\n          return lineItem.id;\n        }\n      }\n    }\n  }\n\n  throw new BillingError({\n    message: 'No active usage subscription found',\n    errorData: [],\n  });\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5188, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/update-usage-subscription-capped-amount.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/billing/update-usage-subscription-capped-amount.ts"],"sourcesContent":["import {BillingError, GraphqlQueryError} from '../error';\nimport {ConfigInterface} from '../base-types';\nimport {graphqlClientClass} from '../clients/admin';\n\nimport {\n  BillingUpdateUsageCappedAmount,\n  BillingUpdateUsageCappedAmountParams,\n  BillingUpdateUsageCappedAmountResponse,\n  UpdateCappedAmountConfirmation,\n  APP_SUBSCRIPTION_FRAGMENT,\n} from './types';\nimport {convertLineItems} from './utils';\n\nconst UPDATE_USAGE_CAPPED_AMOUNT_MUTATION = `\n${APP_SUBSCRIPTION_FRAGMENT}\nmutation appSubscriptionLineItemUpdate($cappedAmount: MoneyInput!, $id: ID!) {\n  appSubscriptionLineItemUpdate(cappedAmount: $cappedAmount, id: $id) {\n    userErrors {\n      field\n      message\n    }\n    confirmationUrl\n    appSubscription {\n      ...AppSubscriptionFragment\n    }\n  }\n}\n`;\n\nexport function updateUsageCappedAmount(\n  config: ConfigInterface,\n): BillingUpdateUsageCappedAmount {\n  return async function updateUsageCappedAmount(\n    params: BillingUpdateUsageCappedAmountParams,\n  ): Promise<UpdateCappedAmountConfirmation> {\n    if (!config.billing) {\n      throw new BillingError({\n        message: 'Attempted to update line item without billing configs',\n        errorData: [],\n      });\n    }\n\n    const {\n      session,\n      subscriptionLineItemId,\n      cappedAmount: {amount, currencyCode},\n    } = params;\n\n    const GraphqlClient = graphqlClientClass({config});\n    const client = new GraphqlClient({session});\n\n    try {\n      const response =\n        await client.request<BillingUpdateUsageCappedAmountResponse>(\n          UPDATE_USAGE_CAPPED_AMOUNT_MUTATION,\n          {\n            variables: {\n              id: subscriptionLineItemId,\n              cappedAmount: {\n                amount,\n                currencyCode,\n              },\n            },\n          },\n        );\n\n      if (response.data?.appSubscriptionLineItemUpdate?.userErrors.length) {\n        throw new BillingError({\n          message: 'Error while updating usage subscription capped amount',\n          errorData: response.data?.appSubscriptionLineItemUpdate?.userErrors,\n        });\n      }\n\n      const appSubscription =\n        response.data?.appSubscriptionLineItemUpdate?.appSubscription!;\n      if (appSubscription && appSubscription.lineItems) {\n        appSubscription.lineItems = convertLineItems(appSubscription.lineItems);\n      }\n\n      return {\n        confirmationUrl:\n          response.data?.appSubscriptionLineItemUpdate?.confirmationUrl!,\n        appSubscription,\n      };\n    } catch (error) {\n      if (error instanceof GraphqlQueryError) {\n        throw new BillingError({\n          message: error.message,\n          errorData: error.response?.errors,\n        });\n      }\n\n      throw error;\n    }\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAaA,MAAM,mCAAmC,GAAG,CAAA;EAC1C,qNAAyB,CAAA;;;;;;;;;;;;;CAa1B;AAEK,SAAU,uBAAuB,CACrC,MAAuB,EAAA;IAEvB,OAAO,eAAe,uBAAuB,CAC3C,MAA4C,EAAA;QAE5C,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;YACnB,MAAM,IAAI,6LAAY,CAAC;gBACrB,OAAO,EAAE,uDAAuD;gBAChE,SAAS,EAAE,EAAE;YACd,CAAA,CAAC;QACJ;QAEA,MAAM,EACJ,OAAO,EACP,sBAAsB,EACtB,YAAY,EAAE,EAAC,MAAM,EAAE,YAAY,EAAC,EACrC,GAAG,MAAM;QAEV,MAAM,aAAa,OAAG,mOAAkB,EAAC;YAAC,MAAM;QAAA,CAAC,CAAC;QAClD,MAAM,MAAM,GAAG,IAAI,aAAa,CAAC;YAAC,OAAO;QAAA,CAAC,CAAC;QAE3C,IAAI;YACF,MAAM,QAAQ,GACZ,MAAM,MAAM,CAAC,OAAO,CAClB,mCAAmC,EACnC;gBACE,SAAS,EAAE;oBACT,EAAE,EAAE,sBAAsB;oBAC1B,YAAY,EAAE;wBACZ,MAAM;wBACN,YAAY;oBACb,CAAA;gBACF,CAAA;YACF,CAAA,CACF;YAEH,IAAI,QAAQ,CAAC,IAAI,EAAE,6BAA6B,EAAE,UAAU,CAAC,MAAM,EAAE;gBACnE,MAAM,IAAI,6LAAY,CAAC;oBACrB,OAAO,EAAE,uDAAuD;oBAChE,SAAS,EAAE,QAAQ,CAAC,IAAI,EAAE,6BAA6B,EAAE,UAAU;gBACpE,CAAA,CAAC;YACJ;YAEA,MAAM,eAAe,GACnB,QAAQ,CAAC,IAAI,EAAE,6BAA6B,EAAE,eAAgB;YAChE,IAAI,eAAe,IAAI,eAAe,CAAC,SAAS,EAAE;gBAChD,eAAe,CAAC,SAAS,OAAG,4MAAgB,EAAC,eAAe,CAAC,SAAS,CAAC;YACzE;YAEA,OAAO;gBACL,eAAe,EACb,QAAQ,CAAC,IAAI,EAAE,6BAA6B,EAAE,eAAgB;gBAChE,eAAe;aAChB;QACH,EAAE,OAAO,KAAK,EAAE;YACd,IAAI,KAAK,YAAY,kMAAiB,EAAE;gBACtC,MAAM,IAAI,6LAAY,CAAC;oBACrB,OAAO,EAAE,KAAK,CAAC,OAAO;oBACtB,SAAS,EAAE,KAAK,CAAC,QAAQ,EAAE,MAAM;gBAClC,CAAA,CAAC;YACJ;YAEA,MAAM,KAAK;QACb;IACF,CAAC;AACH"}},
    {"offset": {"line": 5277, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/billing/index.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\nimport {FutureFlagOptions} from '../../future/flags';\n\nimport {check} from './check';\nimport {request} from './request';\nimport {cancel} from './cancel';\nimport {subscriptions} from './subscriptions';\nimport {createUsageRecord} from './create-usage-record';\nimport {updateUsageCappedAmount} from './update-usage-subscription-capped-amount';\nimport {ShopifyBilling} from './types';\n\nexport type {ShopifyBilling} from './types';\n\nexport function shopifyBilling<Future extends FutureFlagOptions>(\n  config: ConfigInterface,\n): ShopifyBilling<Future> {\n  return {\n    check: check(config),\n    request: request(config),\n    cancel: cancel(config),\n    subscriptions: subscriptions(config),\n    createUsageRecord: createUsageRecord(config),\n    updateUsageCappedAmount: updateUsageCappedAmount(config),\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAaM,SAAU,cAAc,CAC5B,MAAuB,EAAA;IAEvB,OAAO;QACL,KAAK,MAAE,iMAAK,EAAC,MAAM,CAAC;QACpB,OAAO,MAAE,qMAAO,EAAC,MAAM,CAAC;QACxB,MAAM,MAAE,mMAAM,EAAC,MAAM,CAAC;QACtB,aAAa,MAAE,iNAAa,EAAC,MAAM,CAAC;QACpC,iBAAiB,MAAE,iOAAiB,EAAC,MAAM,CAAC;QAC5C,uBAAuB,MAAE,iQAAuB,EAAC,MAAM,CAAC;KACzD;AACH"}},
    {"offset": {"line": 5309, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/flow/validate.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/flow/validate.ts"],"sourcesContent":["import {\n  HmacValidationType,\n  ValidationInvalid,\n  ValidationValid,\n  ValidateParams,\n} from '../utils/types';\nimport {validateHmacFromRequestFactory} from '../utils/hmac-validator';\nimport {ConfigInterface} from '../base-types';\n\nexport function validateFactory(config: ConfigInterface) {\n  return async function validate({\n    rawBody,\n    ...adapterArgs\n  }: ValidateParams): Promise<ValidationInvalid | ValidationValid> {\n    return validateHmacFromRequestFactory(config)({\n      type: HmacValidationType.Flow,\n      rawBody,\n      ...adapterArgs,\n    });\n  };\n}\n"],"names":[],"mappings":";;;;;;;;AASM,SAAU,eAAe,CAAC,MAAuB,EAAA;IACrD,OAAO,eAAe,QAAQ,CAAC,EAC7B,OAAO,EACP,GAAG,WAAW,EACC,EAAA;QACf,WAAO,oOAA8B,EAAC,MAAM,CAAC,CAAC;YAC5C,IAAI,EAAE,4MAAkB,CAAC,IAAI;YAC7B,OAAO;YACP,GAAG,WAAW;QACf,CAAA,CAAC;IACJ,CAAC;AACH"}},
    {"offset": {"line": 5332, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/flow/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/flow/index.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\n\nimport {validateFactory} from './validate';\n\nexport function shopifyFlow(config: ConfigInterface) {\n  return {\n    validate: validateFactory(config),\n  };\n}\n\nexport type ShopifyFlow = ReturnType<typeof shopifyFlow>;\n"],"names":[],"mappings":";;;;;;AAIM,SAAU,WAAW,CAAC,MAAuB,EAAA;IACjD,OAAO;QACL,QAAQ,MAAE,2MAAe,EAAC,MAAM,CAAC;KAClC;AACH"}},
    {"offset": {"line": 5349, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/fulfillment-service/validate.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/fulfillment-service/validate.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\nimport {validateHmacFromRequestFactory} from '../utils/hmac-validator';\nimport {\n  HmacValidationType,\n  ValidateParams,\n  ValidationInvalid,\n  ValidationValid,\n} from '../utils/types';\n\nexport function validateFactory(config: ConfigInterface) {\n  return async function validate({\n    rawBody,\n    ...adapterArgs\n  }: ValidateParams): Promise<ValidationInvalid | ValidationValid> {\n    return validateHmacFromRequestFactory(config)({\n      type: HmacValidationType.FulfillmentService,\n      rawBody,\n      ...adapterArgs,\n    });\n  };\n}\n"],"names":[],"mappings":";;;;;;;;AASM,SAAU,eAAe,CAAC,MAAuB,EAAA;IACrD,OAAO,eAAe,QAAQ,CAAC,EAC7B,OAAO,EACP,GAAG,WAAW,EACC,EAAA;QACf,WAAO,oOAA8B,EAAC,MAAM,CAAC,CAAC;YAC5C,IAAI,EAAE,4MAAkB,CAAC,kBAAkB;YAC3C,OAAO;YACP,GAAG,WAAW;QACf,CAAA,CAAC;IACJ,CAAC;AACH"}},
    {"offset": {"line": 5372, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/fulfillment-service/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/fulfillment-service/index.ts"],"sourcesContent":["import {ConfigInterface} from '../base-types';\n\nimport {validateFactory} from './validate';\n\nexport function fulfillmentService(config: ConfigInterface) {\n  return {\n    validate: validateFactory(config),\n  };\n}\n\nexport type FulfillmentService = ReturnType<typeof fulfillmentService>;\n"],"names":[],"mappings":";;;;;;AAIM,SAAU,kBAAkB,CAAC,MAAuB,EAAA;IACxD,OAAO;QACL,QAAQ,MAAE,6NAAe,EAAC,MAAM,CAAC;KAClC;AACH"}},
    {"offset": {"line": 5389, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/lib/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/lib/index.ts"],"sourcesContent":["import {loadRestResources} from '../rest/load-rest-resources';\nimport {ShopifyRestResources} from '../rest/types';\nimport {abstractRuntimeString} from '../runtime/platform';\nimport {FutureFlagOptions, logDisabledFutureFlags} from '../future/flags';\n\nimport {ConfigParams, ConfigInterface} from './base-types';\nimport {validateConfig} from './config';\nimport {clientClasses, ShopifyClients} from './clients';\nimport {shopifyAuth, ShopifyAuth} from './auth';\nimport {shopifySession, ShopifySession} from './session';\nimport {shopifyUtils, ShopifyUtils} from './utils';\nimport {shopifyWebhooks, ShopifyWebhooks} from './webhooks';\nimport {shopifyBilling, ShopifyBilling} from './billing';\nimport {logger, ShopifyLogger} from './logger';\nimport {SHOPIFY_API_LIBRARY_VERSION} from './version';\nimport {restClientClass} from './clients/admin/rest/client';\nimport {ShopifyFlow, shopifyFlow} from './flow';\nimport {FulfillmentService, fulfillmentService} from './fulfillment-service';\n\nexport * from './error';\nexport * from './session/classes';\n\nexport * from '../rest/types';\nexport * from './types';\nexport * from './base-types';\nexport * from './auth/types';\nexport * from './billing/types';\nexport * from './clients/types';\nexport * from './session/types';\nexport * from './webhooks/types';\nexport * from './utils/types';\n\nexport interface Shopify<\n  Params extends ConfigParams = ConfigParams,\n  Resources extends ShopifyRestResources = ShopifyRestResources,\n  Future extends FutureFlagOptions = FutureFlagOptions,\n> {\n  config: ConfigInterface<Params>;\n  clients: ShopifyClients;\n  auth: ShopifyAuth;\n  session: ShopifySession;\n  utils: ShopifyUtils;\n\n  /**\n   * Functions for working with webhooks.\n   *\n   * Most of these functions are used for interacting with shop-specific webhooks.\n   * Unless your app needs different webhooks for different shops, we recommend using app-specific webhooks instead:\n   *\n   * {@link https://shopify.dev/docs/apps/build/webhooks/subscribe#app-specific-subscriptions}\n   *\n   * If you use only app-specific webhooks, the only function you will need is `shopify.webhooks.validate`.\n   */\n  webhooks: ShopifyWebhooks;\n  billing: ShopifyBilling<Future>;\n  logger: ShopifyLogger;\n  rest: Resources;\n  flow: ShopifyFlow;\n  fulfillmentService: FulfillmentService;\n}\n\nexport function shopifyApi<\n  Params extends ConfigParams<Resources, Future>,\n  Resources extends ShopifyRestResources,\n  Future extends FutureFlagOptions,\n>({\n  future,\n  restResources,\n  ...config\n}: {future?: Future; restResources?: Resources} & Params): Shopify<\n  Params,\n  Resources,\n  Future\n> {\n  const libConfig = {...config, future, restResources};\n  const validatedConfig = validateConfig(libConfig);\n\n  const shopify = {\n    config: validatedConfig,\n    clients: clientClasses(validatedConfig),\n    auth: shopifyAuth(validatedConfig),\n    session: shopifySession(validatedConfig),\n    utils: shopifyUtils(validatedConfig),\n    webhooks: shopifyWebhooks(validatedConfig),\n    billing: shopifyBilling(validatedConfig),\n    flow: shopifyFlow(validatedConfig),\n    fulfillmentService: fulfillmentService(validatedConfig),\n    logger: logger(validatedConfig),\n    rest: {} as Resources,\n  };\n\n  if (restResources) {\n    shopify.rest = loadRestResources({\n      resources: restResources,\n      config: validatedConfig,\n      RestClient: restClientClass({config: validatedConfig}),\n    });\n  }\n\n  shopify.logger\n    .info(\n      `version ${SHOPIFY_API_LIBRARY_VERSION}, environment ${abstractRuntimeString()}`,\n    )\n    .catch((err) => console.log(err));\n\n  logDisabledFutureFlags(validatedConfig, shopify.logger);\n\n  return shopify as Shopify<Params, Resources, Future>;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DM,SAAU,UAAU,CAIxB,EACA,MAAM,EACN,aAAa,EACb,GAAG,MAAM,EAC6C,EAAA;IAKtD,MAAM,SAAS,GAAG;QAAC,GAAG,MAAM;QAAE,MAAM;QAAE,aAAa;IAAA,CAAC;IACpD,MAAM,eAAe,OAAG,gMAAc,EAAC,SAAS,CAAC;IAEjD,MAAM,OAAO,GAAG;QACd,MAAM,EAAE,eAAe;QACvB,OAAO,MAAE,yMAAa,EAAC,eAAe,CAAC;QACvC,IAAI,MAAE,oMAAW,EAAC,eAAe,CAAC;QAClC,OAAO,MAAE,0MAAc,EAAC,eAAe,CAAC;QACxC,KAAK,MAAE,sMAAY,EAAC,eAAe,CAAC;QACpC,QAAQ,MAAE,4MAAe,EAAC,eAAe,CAAC;QAC1C,OAAO,MAAE,0MAAc,EAAC,eAAe,CAAC;QACxC,IAAI,MAAE,oMAAW,EAAC,eAAe,CAAC;QAClC,kBAAkB,MAAE,6NAAkB,EAAC,eAAe,CAAC;QACvD,MAAM,MAAE,iMAAM,EAAC,eAAe,CAAC;QAC/B,IAAI,EAAE,CAAA,CAAe;KACtB;IAED,IAAI,aAAa,EAAE;QACjB,OAAO,CAAC,IAAI,OAAG,uNAAiB,EAAC;YAC/B,SAAS,EAAE,aAAa;YACxB,MAAM,EAAE,eAAe;YACvB,UAAU,MAAE,6NAAe,EAAC;gBAAC,MAAM,EAAE,eAAe;YAAA,CAAC,CAAC;QACvD,CAAA,CAAC;IACJ;IAEA,OAAO,CAAC,MAAA,CACL,IAAI,CACH,CAAA,QAAA,EAAW,8MAA2B,CAAA,cAAA,MAAiB,kOAAqB,EAAE,GAAE,EAEjF,KAAK,CAAC,CAAC,GAAG,GAAK,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAEnC,0MAAsB,EAAC,eAAe,EAAE,OAAO,CAAC,MAAM,CAAC;IAEvD,OAAO,OAA6C;AACtD"}},
    {"offset": {"line": 5474, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/adapters/web-api/adapter.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/adapters/web-api/adapter.ts"],"sourcesContent":["import type {\n  Headers as ShopifyHeaders,\n  AdapterArgs,\n  NormalizedResponse,\n  NormalizedRequest,\n} from '../../runtime';\nimport {addHeader, flatHeaders} from '../../runtime';\n\ninterface WebApiAdapterArgs extends AdapterArgs {\n  rawRequest: Request;\n}\n\nexport async function webApiConvertRequest(\n  adapterArgs: WebApiAdapterArgs,\n): Promise<NormalizedRequest> {\n  const request = adapterArgs.rawRequest;\n  const headers = {};\n  for (const [key, value] of request.headers.entries()) {\n    addHeader(headers, key, value);\n  }\n\n  return {\n    headers,\n    method: request.method ?? 'GET',\n    url: new URL(request.url).toString(),\n  };\n}\n\nexport async function webApiConvertHeaders(\n  headers: ShopifyHeaders,\n  _adapterArgs: WebApiAdapterArgs,\n): Promise<Headers> {\n  const remixHeaders = new Headers();\n  flatHeaders(headers ?? {}).forEach(([key, value]) =>\n    remixHeaders.append(key, value),\n  );\n  return Promise.resolve(remixHeaders);\n}\n\nexport async function webApiConvertResponse(\n  resp: NormalizedResponse,\n  adapterArgs: WebApiAdapterArgs,\n): Promise<Response> {\n  return new Response(resp.body, {\n    status: resp.statusCode,\n    statusText: resp.statusText,\n    headers: await webApiConvertHeaders(resp.headers ?? {}, adapterArgs),\n  });\n}\n\nexport function webApiRuntimeString(): string {\n  return 'Web API';\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAYO,eAAe,oBAAoB,CACxC,WAA8B,EAAA;IAE9B,MAAM,OAAO,GAAG,WAAW,CAAC,UAAU;IACtC,MAAM,OAAO,GAAG,CAAA,CAAE;IAClB,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,CAAE;YACpD,wMAAS,EAAC,OAAO,EAAE,GAAG,EAAE,KAAK,CAAC;IAChC;IAEA,OAAO;QACL,OAAO;QACP,MAAM,EAAE,OAAO,CAAC,MAAM,IAAI,KAAK;QAC/B,GAAG,EAAE,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE;KACrC;AACH;AAEO,eAAe,oBAAoB,CACxC,OAAuB,EACvB,YAA+B,EAAA;IAE/B,MAAM,YAAY,GAAG,IAAI,OAAO,EAAE;QAClC,0MAAW,EAAC,OAAO,IAAI,CAAA,CAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,GAC9C,YAAY,CAAC,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,CAChC;IACD,OAAO,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC;AACtC;AAEO,eAAe,qBAAqB,CACzC,IAAwB,EACxB,WAA8B,EAAA;IAE9B,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE;QAC7B,MAAM,EAAE,IAAI,CAAC,UAAU;QACvB,UAAU,EAAE,IAAI,CAAC,UAAU;QAC3B,OAAO,EAAE,MAAM,oBAAoB,CAAC,IAAI,CAAC,OAAO,IAAI,CAAA,CAAe,CAAC;IACrE,CAAA,CAAC;AACJ;SAEgB,mBAAmB,GAAA;IACjC,OAAO,SAAS;AAClB"}},
    {"offset": {"line": 5519, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@shopify/shopify-api/dist/esm/adapters/web-api/index.mjs","sources":["file:///Users/mac/Desktop/NEW/node_modules/adapters/web-api/index.ts"],"sourcesContent":["import {\n  setAbstractFetchFunc,\n  setAbstractConvertRequestFunc,\n  setAbstractConvertResponseFunc,\n  setAbstractConvertHeadersFunc,\n  setAbstractRuntimeString,\n} from '../../runtime';\n\nimport {\n  webApiConvertHeaders,\n  webApiConvertRequest,\n  webApiConvertResponse,\n  webApiRuntimeString,\n} from './adapter';\n\nsetAbstractFetchFunc(fetch);\nsetAbstractConvertRequestFunc(webApiConvertRequest);\nsetAbstractConvertResponseFunc(webApiConvertResponse);\nsetAbstractConvertHeadersFunc(webApiConvertHeaders);\nsetAbstractRuntimeString(webApiRuntimeString);\n\n// Export a marker to prevent tree-shaking\nexport const webApiAdapterInitialized = true;\n"],"names":[],"mappings":";;;;;;;;;;IAeA,iNAAoB,EAAC,KAAK,CAAC;IAC3B,0NAA6B,EAAC,0NAAoB,CAAC;IACnD,2NAA8B,EAAC,2NAAqB,CAAC;IACrD,0NAA6B,EAAC,0NAAoB,CAAC;IACnD,qOAAwB,EAAC,yNAAmB,CAAC;AAE7C,0CAAA;AACO,MAAM,wBAAwB,GAAG"}}]
}