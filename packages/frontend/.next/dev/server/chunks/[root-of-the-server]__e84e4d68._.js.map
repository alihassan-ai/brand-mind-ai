{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/shared/src/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\n\nexport const prisma =\n  globalForPrisma.prisma ||\n  new PrismaClient({\n    log: ['query', 'error', 'warn'],\n  });\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACf,KAAK;QAAC;QAAS;QAAS;KAAO;AACjC;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/shared/src/types/index.ts"],"sourcesContent":["// Common types used across packages\n\nexport interface ShopContext {\n  shopId: string;\n  shopDomain: string;\n  accessToken: string;\n}\n\nexport interface DateRange {\n  from: Date;\n  to: Date;\n}\n\nexport interface PaginationOptions {\n  limit?: number;\n  cursor?: string;\n}\n\nexport interface ApiResponse<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n}\n\nexport interface ScoringWeights {\n  storeFit: number;\n  gapFill: number;\n  trendScore: number;\n  marginPotential: number;\n  competitionLevel: number;\n  seasonalAlignment: number;\n}\n\nexport const DEFAULT_SCORING_WEIGHTS: ScoringWeights = {\n  storeFit: 0.25,\n  gapFill: 0.20,\n  trendScore: 0.15,\n  marginPotential: 0.15,\n  competitionLevel: 0.10,\n  seasonalAlignment: 0.15,\n};\n"],"names":[],"mappings":"AAAA,oCAAoC;;;;;AAiC7B,MAAM,0BAA0C;IACrD,UAAU;IACV,SAAS;IACT,YAAY;IACZ,iBAAiB;IACjB,kBAAkB;IAClB,mBAAmB;AACrB"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/shared/src/index.ts"],"sourcesContent":["// Shared exports for BrandMind AI\nexport { prisma } from './prisma';\nexport * from './types';\n"],"names":[],"mappings":";AAAA,kCAAkC;AAClC;AACA"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/backend/src/auth/session.ts"],"sourcesContent":["import { cookies } from 'next/headers';\nimport { prisma } from '@brandmind/shared';\n\nexport async function getConnectedShop(): Promise<string | null> {\n    const cookieStore = await cookies();\n    const cookieDomain = cookieStore.get('shopify_connected_shop')?.value;\n    if (cookieDomain) return cookieDomain;\n\n    // Fallback to user session\n    const shop = await getCurrentShop();\n    return shop?.shopDomain || null;\n}\n\nexport async function getCurrentUser() {\n    const cookieStore = await cookies();\n    const userId = cookieStore.get('user_session')?.value;\n\n    if (!userId) return null;\n\n    const user = await prisma.user.findUnique({\n        where: { id: userId },\n        include: { shops: true },\n    });\n\n    return user;\n}\n\nexport async function getCurrentShop() {\n    const user = await getCurrentUser();\n    if (!user || user.shops.length === 0) return null;\n\n    // Return the first shop (for now, single shop per user)\n    return user.shops[0];\n}\n\nexport async function isOnboardingComplete(): Promise<boolean> {\n    const shop = await getCurrentShop();\n    return shop?.onboardingComplete ?? false;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;;;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,MAAM,eAAe,YAAY,GAAG,CAAC,2BAA2B;IAChE,IAAI,cAAc,OAAO;IAEzB,2BAA2B;IAC3B,MAAM,OAAO,MAAM;IACnB,OAAO,MAAM,cAAc;AAC/B;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,MAAM,SAAS,YAAY,GAAG,CAAC,iBAAiB;IAEhD,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,OAAO,MAAM,+IAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACtC,OAAO;YAAE,IAAI;QAAO;QACpB,SAAS;YAAE,OAAO;QAAK;IAC3B;IAEA,OAAO;AACX;AAEO,eAAe;IAClB,MAAM,OAAO,MAAM;IACnB,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC,MAAM,KAAK,GAAG,OAAO;IAE7C,wDAAwD;IACxD,OAAO,KAAK,KAAK,CAAC,EAAE;AACxB;AAEO,eAAe;IAClB,MAAM,OAAO,MAAM;IACnB,OAAO,MAAM,sBAAsB;AACvC"}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/app/api/auth/me/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { getCurrentUser } from \"@brandmind/backend/auth/session\";\n\nexport async function GET(req: NextRequest) {\n    try {\n        const userBuffer = await getCurrentUser();\n\n        if (!userBuffer) {\n            return NextResponse.json({ error: \"Not authenticated\" }, { status: 401 });\n        }\n\n        // Sanitize user object for frontend\n        const user = {\n            id: userBuffer.id,\n            email: userBuffer.email,\n            name: userBuffer.name,\n            emailVerified: userBuffer.emailVerified,\n            role: userBuffer.role,\n        };\n\n        return NextResponse.json({ user });\n    } catch (error) {\n        console.error(\"Auth status error:\", error);\n        return NextResponse.json({ error: \"Internal server error\" }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAgB;IACtC,IAAI;QACA,MAAM,aAAa,MAAM,IAAA,iKAAc;QAEvC,IAAI,CAAC,YAAY;YACb,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAoB,GAAG;gBAAE,QAAQ;YAAI;QAC3E;QAEA,oCAAoC;QACpC,MAAM,OAAO;YACT,IAAI,WAAW,EAAE;YACjB,OAAO,WAAW,KAAK;YACvB,MAAM,WAAW,IAAI;YACrB,eAAe,WAAW,aAAa;YACvC,MAAM,WAAW,IAAI;QACzB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAK;IACpC,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}