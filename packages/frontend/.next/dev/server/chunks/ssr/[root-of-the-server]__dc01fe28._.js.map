{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/dashboard/ExecutiveDashboard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ExecutiveDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call ExecutiveDashboard() from the server but ExecutiveDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/dashboard/ExecutiveDashboard.tsx <module evaluation>\",\n    \"ExecutiveDashboard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,qBAAqB,IAAA,wQAAuB,EACrD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,mGACA","ignoreList":[0]}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/dashboard/ExecutiveDashboard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ExecutiveDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call ExecutiveDashboard() from the server but ExecutiveDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/dashboard/ExecutiveDashboard.tsx\",\n    \"ExecutiveDashboard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,qBAAqB,IAAA,wQAAuB,EACrD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,+EACA","ignoreList":[0]}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/dashboard/ExecutiveInsights.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ExecutiveInsights = registerClientReference(\n    function() { throw new Error(\"Attempted to call ExecutiveInsights() from the server but ExecutiveInsights is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/dashboard/ExecutiveInsights.tsx <module evaluation>\",\n    \"ExecutiveInsights\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,oBAAoB,IAAA,wQAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,kGACA","ignoreList":[0]}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/dashboard/ExecutiveInsights.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ExecutiveInsights = registerClientReference(\n    function() { throw new Error(\"Attempted to call ExecutiveInsights() from the server but ExecutiveInsights is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/dashboard/ExecutiveInsights.tsx\",\n    \"ExecutiveInsights\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,oBAAoB,IAAA,wQAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,8EACA","ignoreList":[0]}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/dashboard/SyncLogs.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SyncLogs = registerClientReference(\n    function() { throw new Error(\"Attempted to call SyncLogs() from the server but SyncLogs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/dashboard/SyncLogs.tsx <module evaluation>\",\n    \"SyncLogs\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,WAAW,IAAA,wQAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,yFACA","ignoreList":[0]}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/dashboard/SyncLogs.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SyncLogs = registerClientReference(\n    function() { throw new Error(\"Attempted to call SyncLogs() from the server but SyncLogs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/dashboard/SyncLogs.tsx\",\n    \"SyncLogs\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,WAAW,IAAA,wQAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,qEACA","ignoreList":[0]}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/goals/GoalManager.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const GoalManager = registerClientReference(\n    function() { throw new Error(\"Attempted to call GoalManager() from the server but GoalManager is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/goals/GoalManager.tsx <module evaluation>\",\n    \"GoalManager\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,wFACA","ignoreList":[0]}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/goals/GoalManager.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const GoalManager = registerClientReference(\n    function() { throw new Error(\"Attempted to call GoalManager() from the server but GoalManager is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/goals/GoalManager.tsx\",\n    \"GoalManager\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,oEACA","ignoreList":[0]}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/goals/NewGoalButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const NewGoalButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call NewGoalButton() from the server but NewGoalButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/goals/NewGoalButton.tsx <module evaluation>\",\n    \"NewGoalButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,0FACA","ignoreList":[0]}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/goals/NewGoalButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const NewGoalButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call NewGoalButton() from the server but NewGoalButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/goals/NewGoalButton.tsx\",\n    \"NewGoalButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,sEACA","ignoreList":[0]}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/backend/src/auth/crypto.ts"],"sourcesContent":["import crypto from 'crypto';\n\nconst ALGORITHM = 'aes-256-cbc';\nconst ENCRYPTION_KEY = process.env.ENCRYPTION_KEY || 'default_key_at_least_32_chars_long!!'; // Use env in prod\nconst IV_LENGTH = 16;\n\nexport function encrypt(text: string): string {\n    const iv = crypto.randomBytes(IV_LENGTH);\n    const cipher = crypto.createCipheriv(ALGORITHM, Buffer.from(ENCRYPTION_KEY.slice(0, 32)), iv);\n    let encrypted = cipher.update(text);\n    encrypted = Buffer.concat([encrypted, cipher.final()]);\n    return iv.toString('hex') + ':' + encrypted.toString('hex');\n}\n\nexport function decrypt(text: string): string {\n    const textParts = text.split(':');\n    const iv = Buffer.from(textParts.shift()!, 'hex');\n    const encryptedText = Buffer.from(textParts.join(':'), 'hex');\n    const decipher = crypto.createDecipheriv(ALGORITHM, Buffer.from(ENCRYPTION_KEY.slice(0, 32)), iv);\n    let decrypted = decipher.update(encryptedText);\n    decrypted = Buffer.concat([decrypted, decipher.final()]);\n    return decrypted.toString();\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,YAAY;AAClB,MAAM,iBAAiB,QAAQ,GAAG,CAAC,cAAc,IAAI,wCAAwC,kBAAkB;AAC/G,MAAM,YAAY;AAEX,SAAS,QAAQ,IAAY;IAChC,MAAM,KAAK,gHAAM,CAAC,WAAW,CAAC;IAC9B,MAAM,SAAS,gHAAM,CAAC,cAAc,CAAC,WAAW,OAAO,IAAI,CAAC,eAAe,KAAK,CAAC,GAAG,MAAM;IAC1F,IAAI,YAAY,OAAO,MAAM,CAAC;IAC9B,YAAY,OAAO,MAAM,CAAC;QAAC;QAAW,OAAO,KAAK;KAAG;IACrD,OAAO,GAAG,QAAQ,CAAC,SAAS,MAAM,UAAU,QAAQ,CAAC;AACzD;AAEO,SAAS,QAAQ,IAAY;IAChC,MAAM,YAAY,KAAK,KAAK,CAAC;IAC7B,MAAM,KAAK,OAAO,IAAI,CAAC,UAAU,KAAK,IAAK;IAC3C,MAAM,gBAAgB,OAAO,IAAI,CAAC,UAAU,IAAI,CAAC,MAAM;IACvD,MAAM,WAAW,gHAAM,CAAC,gBAAgB,CAAC,WAAW,OAAO,IAAI,CAAC,eAAe,KAAK,CAAC,GAAG,MAAM;IAC9F,IAAI,YAAY,SAAS,MAAM,CAAC;IAChC,YAAY,OAAO,MAAM,CAAC;QAAC;QAAW,SAAS,KAAK;KAAG;IACvD,OAAO,UAAU,QAAQ;AAC7B"}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/backend/src/sync/sync-audit.ts"],"sourcesContent":["import { prisma } from '@brandmind/shared';\n\nexport async function createSyncLog(shopId: string, resource: string) {\n    return await prisma.syncEvent.create({\n        data: {\n            shopId,\n            resource,\n            status: 'running',\n            startedAt: new Date(),\n        }\n    });\n}\n\nexport async function updateSyncLog(logId: string, data: { status: 'success' | 'failed', stats?: any, error?: string }) {\n    return await prisma.syncEvent.update({\n        where: { id: logId },\n        data: {\n            ...data,\n            completedAt: new Date(),\n        }\n    });\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEO,eAAe,cAAc,MAAc,EAAE,QAAgB;IAChE,OAAO,MAAM,6IAAM,CAAC,SAAS,CAAC,MAAM,CAAC;QACjC,MAAM;YACF;YACA;YACA,QAAQ;YACR,WAAW,IAAI;QACnB;IACJ;AACJ;AAEO,eAAe,cAAc,KAAa,EAAE,IAAmE;IAClH,OAAO,MAAM,6IAAM,CAAC,SAAS,CAAC,MAAM,CAAC;QACjC,OAAO;YAAE,IAAI;QAAM;QACnB,MAAM;YACF,GAAG,IAAI;YACP,aAAa,IAAI;QACrB;IACJ;AACJ"}},
    {"offset": {"line": 269, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/backend/src/sync/shopify-sync.ts"],"sourcesContent":["import { prisma } from '@brandmind/shared';\nimport { decrypt } from '../auth/crypto';\nimport { createSyncLog, updateSyncLog } from './sync-audit';\n\ninterface ShopifyProduct {\n    id: number;\n    title: string;\n    handle: string;\n    vendor: string;\n    product_type: string;\n    created_at: string;\n    updated_at: string;\n    variants: ShopifyVariant[];\n}\n\ninterface ShopifyVariant {\n    id: number;\n    title: string;\n    sku: string;\n    price: string;\n    inventory_quantity: number;\n}\n\ninterface ShopifyOrder {\n    id: number;\n    order_number: number;\n    total_price: string;\n    subtotal_price: string;\n    total_tax: string;\n    total_discounts: string;\n    currency: string;\n    financial_status: string;\n    fulfillment_status: string | null;\n    created_at: string;\n    updated_at: string;\n    customer?: { id: number };\n    line_items: ShopifyLineItem[];\n    refunds: ShopifyRefund[];\n}\n\ninterface ShopifyLineItem {\n    id: number;\n    product_id: number;\n    variant_id: number;\n    title: string;\n    quantity: number;\n    price: string;\n    total_discount: string;\n}\n\ninterface ShopifyRefund {\n    id: number;\n    created_at: string;\n    transactions: { amount: string }[];\n}\n\ninterface ShopifyCustomer {\n    id: number;\n    email: string;\n    first_name: string;\n    last_name: string;\n    created_at: string;\n}\n\nasync function shopifyRequest(shop: string, accessToken: string, endpoint: string, params: Record<string, string> = {}) {\n    const url = new URL(`https://${shop}/admin/api/2024-10/${endpoint}`);\n    Object.entries(params).forEach(([k, v]) => url.searchParams.set(k, v));\n\n    const response = await fetch(url.toString(), {\n        headers: {\n            'X-Shopify-Access-Token': accessToken,\n            'Content-Type': 'application/json',\n        },\n    });\n\n    if (!response.ok) {\n        const text = await response.text();\n        throw new Error(`Shopify API error (${response.status}): ${text}`);\n    }\n\n    return response.json();\n}\n\nasync function getOrInitSyncState(shopId: string, resource: string) {\n    let state = await prisma.syncState.findUnique({\n        where: {\n            shopId_resource: {\n                shopId,\n                resource,\n            },\n        },\n    });\n\n    if (!state) {\n        state = await prisma.syncState.create({\n            data: {\n                shopId,\n                resource,\n                lastId: '0',\n            },\n        });\n    }\n\n    return state;\n}\n\nasync function updateSyncState(shopId: string, resource: string, lastId: string) {\n    await prisma.syncState.update({\n        where: {\n            shopId_resource: {\n                shopId,\n                resource,\n            },\n        },\n        data: {\n            lastId,\n            lastSyncedAt: new Date(),\n        },\n    });\n}\n\nexport async function syncProducts(shopId: string, shopDomain: string, accessToken: string) {\n    console.log(`[Sync] Fetching products for ${shopDomain}`);\n\n    // incremental sync logic\n    const syncState = await getOrInitSyncState(shopId, 'products');\n    let sinceId = parseInt(syncState.lastId);\n    console.log(`[Sync] Resuming products from ID: ${sinceId}`);\n\n    let totalProducts = 0;\n    let maxId = sinceId;\n\n    while (true) {\n        const data = await shopifyRequest(shopDomain, accessToken, 'products.json', {\n            limit: '250',\n            since_id: sinceId.toString(),\n        }) as { products: ShopifyProduct[] };\n\n        const products: ShopifyProduct[] = data.products || [];\n        if (products.length === 0) break;\n\n        for (const product of products) {\n            // Upsert product\n            const dbProduct = await prisma.product.upsert({\n                where: { shopifyId: product.id.toString() },\n                update: {\n                    title: product.title,\n                    handle: product.handle,\n                    vendor: product.vendor,\n                    productType: product.product_type,\n                    updatedAt: new Date(product.updated_at),\n                },\n                create: {\n                    shopId,\n                    shopifyId: product.id.toString(),\n                    title: product.title,\n                    handle: product.handle,\n                    vendor: product.vendor,\n                    productType: product.product_type,\n                    createdAt: new Date(product.created_at),\n                    updatedAt: new Date(product.updated_at),\n                },\n            });\n\n            // Upsert variants\n            for (const variant of product.variants) {\n                await prisma.variant.upsert({\n                    where: { shopifyId: variant.id.toString() },\n                    update: {\n                        title: variant.title,\n                        sku: variant.sku,\n                        price: parseFloat(variant.price),\n                        inventoryQuantity: variant.inventory_quantity,\n                    },\n                    create: {\n                        productId: dbProduct.id,\n                        shopifyId: variant.id.toString(),\n                        title: variant.title,\n                        sku: variant.sku,\n                        price: parseFloat(variant.price),\n                        inventoryQuantity: variant.inventory_quantity,\n                    },\n                });\n            }\n\n            if (product.id > maxId) maxId = product.id;\n            sinceId = product.id;\n            totalProducts++;\n        }\n\n        // Update state after each batch to be safe\n        await updateSyncState(shopId, 'products', maxId.toString());\n        console.log(`[Sync] Processed ${totalProducts} products...`);\n    }\n\n    console.log(`[Sync] Finished syncing ${totalProducts} products`);\n    return totalProducts;\n}\n\nexport async function syncOrders(shopId: string, shopDomain: string, accessToken: string) {\n    console.log(`[Sync] Fetching orders for ${shopDomain}`);\n\n    const syncState = await getOrInitSyncState(shopId, 'orders');\n    let sinceId = parseInt(syncState.lastId);\n    console.log(`[Sync] Resuming orders from ID: ${sinceId}`);\n\n    let totalOrders = 0;\n    let maxId = sinceId;\n\n    while (true) {\n        const params: Record<string, string> = {\n            limit: '250',\n            since_id: sinceId.toString(),\n            status: 'any',\n        };\n\n        // If a start date is provided, we use it to filter\n        if (params.created_at_min) {\n            // Wait, shopify API for orders using since_id and created_at_min together can be tricky\n            // Better to use created_at_min for the initial high-priority sync\n        }\n\n        const data = await shopifyRequest(shopDomain, accessToken, 'orders.json', params) as { orders: ShopifyOrder[] };\n\n        const orders: ShopifyOrder[] = data.orders || [];\n        if (orders.length === 0) break;\n\n        for (const order of orders) {\n            // Get customer ID if exists\n            let customerId: string | null = null;\n            if (order.customer?.id) {\n                const customer = await prisma.customer.findUnique({\n                    where: { shopifyId: order.customer.id.toString() },\n                });\n                customerId = customer?.id || null;\n            }\n\n            // Upsert order with customer linking\n            const dbOrder = await prisma.order.upsert({\n                where: { shopifyId: order.id.toString() },\n                update: {\n                    customerId,\n                    totalPrice: parseFloat(order.total_price),\n                    subtotalPrice: parseFloat(order.subtotal_price),\n                    totalTax: parseFloat(order.total_tax),\n                    totalDiscounts: parseFloat(order.total_discounts),\n                    financialStatus: order.financial_status || null,\n                    fulfillmentStatus: order.fulfillment_status || null,\n                    updatedAt: new Date(order.updated_at),\n                },\n                create: {\n                    shopId,\n                    shopifyId: order.id.toString(),\n                    customerId,\n                    orderNumber: order.order_number.toString(),\n                    totalPrice: parseFloat(order.total_price),\n                    subtotalPrice: parseFloat(order.subtotal_price),\n                    totalTax: parseFloat(order.total_tax),\n                    totalDiscounts: parseFloat(order.total_discounts),\n                    financialStatus: order.financial_status || null,\n                    fulfillmentStatus: order.fulfillment_status || null,\n                    currency: order.currency,\n                    createdAt: new Date(order.created_at),\n                    updatedAt: new Date(order.updated_at),\n                },\n            });\n\n            // Update shop currency if not set or different\n            if (order.currency) {\n                await prisma.shop.update({\n                    where: { id: shopId },\n                    data: { currencyCode: order.currency }\n                }).catch(() => { }); // ignore errors during catch-all sync\n            }\n\n            // Upsert line items\n            for (const item of order.line_items) {\n                await prisma.orderLineItem.upsert({\n                    where: { shopifyId: item.id.toString() },\n                    update: {\n                        quantity: item.quantity,\n                        price: parseFloat(item.price),\n                        totalDiscount: parseFloat(item.total_discount),\n                    },\n                    create: {\n                        orderId: dbOrder.id,\n                        shopifyId: item.id.toString(),\n                        productId: item.product_id?.toString() || null,\n                        variantId: item.variant_id?.toString() || null,\n                        title: item.title,\n                        quantity: item.quantity,\n                        price: parseFloat(item.price),\n                        totalDiscount: parseFloat(item.total_discount),\n                    },\n                });\n            }\n\n            // Upsert refunds\n            for (const refund of order.refunds || []) {\n                const refundAmount = refund.transactions?.reduce((sum, t) => sum + parseFloat(t.amount || '0'), 0) || 0;\n                await prisma.refund.upsert({\n                    where: { shopifyId: refund.id.toString() },\n                    update: {\n                        amount: refundAmount,\n                    },\n                    create: {\n                        orderId: dbOrder.id,\n                        shopifyId: refund.id.toString(),\n                        amount: refundAmount,\n                        createdAt: new Date(refund.created_at),\n                    },\n                });\n            }\n\n            if (order.id > maxId) maxId = order.id;\n            sinceId = order.id;\n            totalOrders++;\n        }\n\n        await updateSyncState(shopId, 'orders', maxId.toString());\n        console.log(`[Sync] Processed ${totalOrders} orders...`);\n    }\n\n    console.log(`[Sync] Finished syncing ${totalOrders} orders`);\n    return totalOrders;\n}\n\n/**\n * Prioritized sync for the last 6 months\n */\nexport async function syncRecentData(shopId: string, shopDomain: string, accessToken: string) {\n    console.log(`[Sync] Running prioritized sync (last 6 months) for ${shopDomain}`);\n\n    const sixMonthsAgo = new Date();\n    sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);\n    const dateStr = sixMonthsAgo.toISOString();\n\n    // 1. Sync Products (always sync all products as they are typically few)\n    await syncProducts(shopId, shopDomain, accessToken);\n\n    // 2. Sync Recent Orders\n    console.log(`[Sync] Fetching orders since ${dateStr}`);\n    let totalOrders = 0;\n    let nextPageInfo = \"\";\n\n    // For recent sync, we might want to use created_at_min\n    // However, shopifyRequest doesn't support Link header pagination yet in this simple implementation\n    // For the beta, we'll keep it simple but add the date filter if supported by the endpoint\n\n    // Actually, let's refine syncOrders to accept an optional startDate\n    return await syncOrdersWithFilter(shopId, shopDomain, accessToken, dateStr);\n}\n\nasync function syncOrdersWithFilter(shopId: string, shopDomain: string, accessToken: string, startDate?: string) {\n    let totalOrders = 0;\n    let sinceId = 0;\n\n    while (true) {\n        const params: Record<string, string> = {\n            limit: '250',\n            since_id: sinceId.toString(),\n            status: 'any',\n        };\n        if (startDate) params.created_at_min = startDate;\n\n        const data = await shopifyRequest(shopDomain, accessToken, 'orders.json', params) as { orders: ShopifyOrder[] };\n        const orders: ShopifyOrder[] = data.orders || [];\n        if (orders.length === 0) break;\n\n        for (const order of orders) {\n            // ... (Same order processing logic as in syncOrders)\n            // To avoid duplication, I should have refactored syncOrders\n            // I'll do that in a follow-up if needed, but for now I'll just reuse the core logic\n            await processOrder(shopId, order);\n            if (order.id > sinceId) sinceId = order.id;\n            totalOrders++;\n        }\n        console.log(`[Sync] Processed ${totalOrders} recent orders...`);\n    }\n    return totalOrders;\n}\n\n// Extract order processing to a reusable function\nasync function processOrder(shopId: string, order: ShopifyOrder) {\n    // Get customer ID if exists\n    let customerId: string | null = null;\n    if (order.customer?.id) {\n        const customer = await prisma.customer.findUnique({\n            where: { shopifyId: order.customer.id.toString() },\n        });\n        customerId = customer?.id || null;\n    }\n\n    // Upsert order\n    const dbOrder = await prisma.order.upsert({\n        where: { shopifyId: order.id.toString() },\n        update: {\n            customerId,\n            totalPrice: parseFloat(order.total_price),\n            subtotalPrice: parseFloat(order.subtotal_price),\n            totalTax: parseFloat(order.total_tax),\n            totalDiscounts: parseFloat(order.total_discounts),\n            financialStatus: order.financial_status || null,\n            fulfillmentStatus: order.fulfillment_status || null,\n            updatedAt: new Date(order.updated_at),\n        },\n        create: {\n            shopId,\n            shopifyId: order.id.toString(),\n            customerId,\n            orderNumber: order.order_number.toString(),\n            totalPrice: parseFloat(order.total_price),\n            subtotalPrice: parseFloat(order.subtotal_price),\n            totalTax: parseFloat(order.total_tax),\n            totalDiscounts: parseFloat(order.total_discounts),\n            financialStatus: order.financial_status || null,\n            fulfillmentStatus: order.fulfillment_status || null,\n            currency: order.currency,\n            createdAt: new Date(order.created_at),\n            updatedAt: new Date(order.updated_at),\n        },\n    });\n\n    // Update shop currency\n    if (order.currency) {\n        await prisma.shop.update({\n            where: { id: shopId },\n            data: { currencyCode: order.currency }\n        }).catch(() => { });\n    }\n\n    // Upsert line items\n    for (const item of order.line_items) {\n        await prisma.orderLineItem.upsert({\n            where: { shopifyId: item.id.toString() },\n            update: {\n                quantity: item.quantity,\n                price: parseFloat(item.price),\n                totalDiscount: parseFloat(item.total_discount),\n            },\n            create: {\n                orderId: dbOrder.id,\n                shopifyId: item.id.toString(),\n                productId: item.product_id?.toString() || null,\n                variantId: item.variant_id?.toString() || null,\n                title: item.title,\n                quantity: item.quantity,\n                price: parseFloat(item.price),\n                totalDiscount: parseFloat(item.total_discount),\n            },\n        });\n    }\n\n    // Upsert refunds\n    for (const refund of order.refunds || []) {\n        const refundAmount = refund.transactions?.reduce((sum, t) => sum + parseFloat(t.amount || '0'), 0) || 0;\n        await prisma.refund.upsert({\n            where: { shopifyId: refund.id.toString() },\n            update: { amount: refundAmount },\n            create: {\n                orderId: dbOrder.id,\n                shopifyId: refund.id.toString(),\n                amount: refundAmount,\n                createdAt: new Date(refund.created_at),\n            },\n        });\n    }\n}\n\nexport async function syncCustomers(shopId: string, shopDomain: string, accessToken: string) {\n    console.log(`[Sync] Fetching customers for ${shopDomain}`);\n\n    const syncState = await getOrInitSyncState(shopId, 'customers');\n    let sinceId = parseInt(syncState.lastId);\n    console.log(`[Sync] Resuming customers from ID: ${sinceId}`);\n\n    let totalCustomers = 0;\n    let maxId = sinceId;\n\n    while (true) {\n        const data = await shopifyRequest(shopDomain, accessToken, 'customers.json', {\n            limit: '250',\n            since_id: sinceId.toString(),\n        }) as { customers: ShopifyCustomer[] };\n\n        const customers: ShopifyCustomer[] = data.customers || [];\n        if (customers.length === 0) break;\n\n        for (const customer of customers) {\n            await prisma.customer.upsert({\n                where: { shopifyId: customer.id.toString() },\n                update: {\n                    email: customer.email,\n                    firstName: customer.first_name,\n                    lastName: customer.last_name,\n                },\n                create: {\n                    shopId,\n                    shopifyId: customer.id.toString(),\n                    email: customer.email,\n                    firstName: customer.first_name,\n                    lastName: customer.last_name,\n                    createdAt: new Date(customer.created_at),\n                },\n            });\n\n            if (customer.id > maxId) maxId = customer.id;\n            sinceId = customer.id;\n            totalCustomers++;\n        }\n\n        await updateSyncState(shopId, 'customers', maxId.toString());\n        console.log(`[Sync] Processed ${totalCustomers} customers...`);\n    }\n\n    console.log(`[Sync] Finished syncing ${totalCustomers} customers`);\n    return totalCustomers;\n}\n\nexport async function runFullSync(shopId: string) {\n    const shop = await prisma.shop.findUnique({ where: { id: shopId } });\n    if (!shop) throw new Error('Shop not found');\n\n    const accessToken = decrypt(shop.accessToken);\n    const shopDomain = shop.shopDomain;\n\n    console.log(`[Sync] Starting Smart Sync for ${shopDomain}`);\n\n    const results = {\n        products: 0,\n        orders: 0,\n        customers: 0,\n    };\n\n    let logId = '';\n    try {\n        const log = await createSyncLog(shopId, 'full');\n        logId = log.id;\n\n        // PHASE 1: Prioritized Sync (Last 6 Months)\n        console.log(`[Sync] Phase 1: Prioritized Sync (6 Months)`);\n        results.products = await syncProducts(shopId, shopDomain, accessToken);\n        results.orders = await syncRecentData(shopId, shopDomain, accessToken);\n        results.customers = await syncCustomers(shopId, shopDomain, accessToken);\n\n        console.log(`[Sync] Phase 1 Complete. Triggering Phase 2 (Historical) in background...`);\n\n        await updateSyncLog(logId, {\n            status: 'success',\n            stats: results\n        });\n\n        // PHASE 2: Historical Sync (Background)\n        (async () => {\n            let histLogId = '';\n            try {\n                const histLog = await createSyncLog(shopId, 'historical');\n                histLogId = histLog.id;\n\n                console.log(`[Sync] Phase 2: Starting historical sync for ${shopDomain}`);\n                // syncOrders without startDate will fetch all remaining history using since_id\n                const orders = await syncOrders(shopId, shopDomain, accessToken);\n\n                await updateSyncLog(histLogId, {\n                    status: 'success',\n                    stats: { orders }\n                });\n\n                console.log(`[Sync] Phase 2 Complete for ${shopDomain}`);\n            } catch (err: any) {\n                console.error('[Sync] Historical sync failed:', err.message);\n                if (histLogId) {\n                    await updateSyncLog(histLogId, {\n                        status: 'failed',\n                        error: err.message\n                    });\n                }\n            }\n        })();\n\n    } catch (err: any) {\n        console.error('[Sync] Smart Sync failed:', err.message);\n    }\n\n    console.log(`[Sync] Prioritized sync results:`, results);\n    return results;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 782, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/backend/src/sync/auto-sync.ts"],"sourcesContent":["import { prisma } from '@brandmind/shared';\nimport { decrypt } from '../auth/crypto';\nimport { syncProducts, syncOrders, syncCustomers } from './shopify-sync';\nimport { backfillDailyMetrics } from '@brandmind/brain';\nimport { createSyncLog, updateSyncLog } from './sync-audit';\n\nconst SYNC_THRESHOLD_MINUTES = 240; // 4 hours instead of 30 minutes\nconst activeSyncs = new Set<string>();\n\n/**\n * Checks if data is stale and triggers a background incremental sync if needed.\n */\nexport async function triggerAutoSync(shopId: string) {\n    if (activeSyncs.has(shopId)) {\n        return; // Already triggering in this process\n    }\n\n    try {\n        // 1. Check for active sync in DB\n        const activeSync = await (prisma as any).syncEvent.findFirst({\n            where: {\n                shopId,\n                status: 'running',\n                startedAt: { gte: new Date(Date.now() - 60 * 60 * 1000) } // Only count last hour as \"active\" to prevent deadlocks\n            }\n        });\n\n        if (activeSync) {\n            console.log(`[Auto-Sync] Sync already in progress for shop ${shopId}. Skipping trigger.`);\n            return;\n        }\n\n        // 1b. Cooldown Check (e.g., don't try again if we just tried in the last 5 minutes)\n        const lastSyncEvent = await (prisma as any).syncEvent.findFirst({\n            where: { shopId },\n            orderBy: { startedAt: 'desc' }\n        });\n\n        if (lastSyncEvent && (Date.now() - new Date(lastSyncEvent.startedAt).getTime()) < 5 * 60 * 1000) {\n            // Already tried or completed very recently\n            return;\n        }\n\n        // 2. Check sync states for staleness\n        const syncStates = await prisma.syncState.findMany({\n            where: { shopId }\n        });\n\n        const now = new Date();\n        const threshold = SYNC_THRESHOLD_MINUTES * 60 * 1000;\n\n        // Check if any resource is stale\n        const needsSync = syncStates.length === 0 || syncStates.some((state: any) => {\n            const lastSynced = new Date(state.lastSyncedAt).getTime();\n            return (now.getTime() - lastSynced) > threshold;\n        });\n\n        if (needsSync) {\n            activeSyncs.add(shopId);\n            console.log(`[Auto-Sync] Data stale for shop ${shopId}. Triggering background update...`);\n\n            // Fire and forget background sync\n            (async () => {\n                let logId = '';\n                try {\n                    const log = await createSyncLog(shopId, 'incremental');\n                    logId = log.id;\n\n                    const shop = await prisma.shop.findUnique({ where: { id: shopId } });\n                    if (!shop) return;\n\n                    const accessToken = decrypt(shop.accessToken);\n                    const shopDomain = shop.shopDomain;\n\n                    const [products, orders, customers] = await Promise.all([\n                        syncProducts(shopId, shopDomain, accessToken),\n                        syncOrders(shopId, shopDomain, accessToken),\n                        syncCustomers(shopId, shopDomain, accessToken)\n                    ]);\n\n                    console.log(`[Auto-Sync] Completed background update for ${shopDomain}. Running metrics backfill...`);\n\n                    // After data is fresh, backfill the metrics for the dashboard\n                    await backfillDailyMetrics(shopId, 30);\n\n                    await updateSyncLog(logId, {\n                        status: 'success',\n                        stats: { products, orders, customers }\n                    });\n\n                    console.log(`[Auto-Sync] Completed background update and metrics backfill for ${shopDomain}`);\n                } catch (err: any) {\n                    console.error('[Auto-Sync] Background sync failed:', err.message);\n                    if (logId) {\n                        await updateSyncLog(logId, {\n                            status: 'failed',\n                            error: err.message\n                        });\n                    }\n                } finally {\n                    activeSyncs.delete(shopId);\n                }\n            })();\n        }\n    } catch (error) {\n        console.error('[Auto-Sync] Error checking sync status:', error);\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 908, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/app/%28app%29/command-center/page.tsx"],"sourcesContent":["import { getCurrentUser, getConnectedShop } from \"@brandmind/backend/auth/session\";\nimport { prisma } from \"@brandmind/shared\";\nimport {\n  calculateExecutiveKPIs,\n  generateExecutiveBrief\n} from \"@brandmind/brain\";\nimport { getInsightsDashboard } from \"@/app/actions/insights\";\nimport { redirect } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { ExecutiveDashboard } from \"@/components/dashboard/ExecutiveDashboard\";\nimport { ExecutiveInsights } from \"@/components/dashboard/ExecutiveInsights\";\nimport { SyncLogs } from \"@/components/dashboard/SyncLogs\";\nimport { GoalManager } from \"@/components/goals/GoalManager\";\nimport { NewGoalButton } from \"@/components/goals/NewGoalButton\";\n/*\n- [x] Fix dead \"New Goal\" button in Command Center\n- [x] Implement Goal creation modal interactivity\n- [x] Optimize auto-sync frequency for better performance\n*/\nimport { triggerAutoSync } from \"@brandmind/backend/sync/auto-sync\";\nimport {\n  Plus,\n  Network,\n  Sparkles,\n  ChevronRight,\n  TrendingUp,\n  Target,\n  Zap,\n  LayoutGrid\n} from \"lucide-react\";\n\nexport default async function DashboardPage() {\n  const user = await getCurrentUser();\n  const shopDomain = await getConnectedShop();\n\n  if (!user) {\n    redirect(\"/auth/login\");\n  }\n\n  if (!shopDomain) {\n    redirect(\"/onboarding\");\n  }\n\n  const shop = await prisma.shop.findUnique({\n    where: { shopDomain }\n  });\n\n  if (!shop) {\n    redirect(\"/onboarding\");\n  }\n\n  // Trigger auto-sync in background (non-blocking)\n  triggerAutoSync(shop.id).catch(console.error);\n\n  // Calculate Executive KPIs and AI Brief\n  const kpis = await calculateExecutiveKPIs(shop.id);\n  const [brief, insights, syncLogs] = await Promise.all([\n    generateExecutiveBrief(shop.id, kpis),\n    getInsightsDashboard(),\n    prisma.syncEvent.findMany({\n      where: { shopId: shop.id },\n      orderBy: { startedAt: \"desc\" },\n      take: 10\n    })\n  ]);\n\n  return (\n    <div className=\"space-y-12\">\n\n      {/* Header Section */}\n      <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-8\">\n        <div className=\"space-y-4\">\n          <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-[var(--primary-muted)] border border-[var(--primary-border)] text-[var(--primary)] text-[10px] font-bold uppercase tracking-wider\">\n            <Sparkles className=\"w-3 h-3\" />\n            Module 1  Command Center\n          </div>\n          <h1 className=\"text-5xl lg:text-6xl font-clash font-bold tracking-tight\">\n            Command <span className=\"text-[var(--primary)] text-glow-amber\">Center</span>\n          </h1>\n          <p className=\"text-[var(--muted-foreground)] max-w-lg text-lg font-medium leading-relaxed\">\n            Proprietary operating system for {shop.shopDomain}.\n            AI-prioritized insights for rapid executive decision making.\n          </p>\n        </div>\n\n        <div className=\"flex items-center gap-4\">\n          <NewGoalButton />\n        </div>\n      </div>\n\n      {/* Layer 1-3: Executive Dashboard */}\n      <ExecutiveDashboard kpis={kpis} brief={brief} catalogHealth={insights?.catalogHealth} />\n\n      {/* Strategic Goals Section */}\n      <div className=\"pt-12 border-t border-[var(--border)]\">\n        <GoalManager />\n      </div>\n\n      {/* Layer 4: Unified Multi-Domain Intelligence (Merged from Store Insights) */}\n      <div className=\"space-y-8 pt-12 border-t border-[var(--border)]\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-3xl font-clash font-bold flex items-center gap-3\">\n            <LayoutGrid className=\"w-8 h-8 text-[var(--primary)]\" />\n            Unified Intelligence\n          </h2>\n          <div className=\"text-xs font-bold text-[var(--muted-foreground)] uppercase tracking-widest bg-[var(--foreground)]/5 px-4 py-2 rounded-xl border border-[var(--border-hover)]\">\n            Analyzing 4 Segments\n          </div>\n        </div>\n        {insights && <ExecutiveInsights data={insights} />}\n      </div>\n\n      {/* Module Access Area */}\n      <div className=\"space-y-8 pt-12 border-t border-[var(--border)]\">\n        <h2 className=\"text-2xl font-clash font-bold flex items-center gap-3\">\n          <ChevronRight className=\"w-6 h-6 text-[var(--primary)]\" />\n          Module Access\n        </h2>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          <QuickActionCard\n            title=\"Product Intelligence\"\n            description=\"Next Hit predictions, Store DNA, market gaps, and launch strategies.\"\n            href=\"/product-intelligence\"\n            icon={<Network className=\"w-6 h-6 text-blue-400\" />}\n          />\n          <QuickActionCard\n            title=\"Growth Engine\"\n            description=\"Campaign analytics, creative intelligence, and AI ad generation.\"\n            href=\"/growth-engine\"\n            icon={<TrendingUp className=\"w-6 h-6 text-emerald-400\" />}\n          />\n          <QuickActionCard\n            title=\"Customer Intelligence\"\n            description=\"RFM segments, churn prediction, VIP tracking, and retention.\"\n            href=\"/customer-intelligence\"\n            icon={<Target className=\"w-6 h-6 text-purple-400\" />}\n          />\n          <QuickActionCard\n            title=\"Business Intelligence\"\n            description=\"Revenue analytics, margin tracking, and financial forecasting.\"\n            href=\"/business-intelligence\"\n            icon={<Zap className=\"w-6 h-6 text-pink-400\" />}\n          />\n        </div>\n      </div>\n\n      {/* Sync History Audit Trail */}\n      <SyncLogs logs={syncLogs as any} />\n\n    </div>\n  );\n}\n\nfunction QuickActionCard({\n  title,\n  description,\n  href,\n  icon,\n}: {\n  title: string;\n  description: string;\n  href: string;\n  icon: React.ReactNode;\n}) {\n  return (\n    <Link\n      href={href}\n      className=\"group relative\"\n    >\n      <div className=\"absolute -inset-0.5 bg-gradient-to-r from-[var(--primary-muted)] to-transparent rounded-2xl blur opacity-0 group-hover:opacity-100 transition duration-500\" />\n\n      <div className=\"relative bg-[var(--background-card)] border border-[var(--border)] rounded-2xl p-6 hover:border-[var(--border-hover)] transition-all duration-300 flex flex-col h-full\">\n        <div className=\"mb-4\">\n          {icon}\n        </div>\n        <h3 className=\"text-lg font-clash font-bold text-[var(--foreground)] mb-2 group-hover:text-[var(--primary)] transition-colors\">{title}</h3>\n        <p className=\"text-[var(--muted-foreground)] text-sm leading-relaxed mb-6 flex-1 italic\">{description}</p>\n\n        <div className=\"flex items-center text-xs font-bold uppercase tracking-widest text-[var(--muted-foreground)] group-hover:text-[var(--foreground)] transition-colors\">\n          Access Module\n          <ChevronRight className=\"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform\" />\n        </div>\n      </div>\n    </Link>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AAAA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA,GACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AAWe,eAAe;IAC5B,MAAM,OAAO,MAAM,IAAA,+JAAc;IACjC,MAAM,aAAa,MAAM,IAAA,iKAAgB;IAEzC,IAAI,CAAC,MAAM;QACT,IAAA,iMAAQ,EAAC;IACX;IAEA,IAAI,CAAC,YAAY;QACf,IAAA,iMAAQ,EAAC;IACX;IAEA,MAAM,OAAO,MAAM,6IAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACxC,OAAO;YAAE;QAAW;IACtB;IAEA,IAAI,CAAC,MAAM;QACT,IAAA,iMAAQ,EAAC;IACX;IAEA,iDAAiD;IACjD,IAAA,qKAAe,EAAC,KAAK,EAAE,EAAE,KAAK,CAAC,QAAQ,KAAK;IAE5C,wCAAwC;IACxC,MAAM,OAAO,MAAM,IAAA,sLAAsB,EAAC,KAAK,EAAE;IACjD,MAAM,CAAC,OAAO,UAAU,SAAS,GAAG,MAAM,QAAQ,GAAG,CAAC;QACpD,IAAA,sLAAsB,EAAC,KAAK,EAAE,EAAE;QAChC,IAAA,iLAAoB;QACpB,6IAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;YACxB,OAAO;gBAAE,QAAQ,KAAK,EAAE;YAAC;YACzB,SAAS;gBAAE,WAAW;YAAO;YAC7B,MAAM;QACR;KACD;IAED,qBACE,8OAAC;QAAI,WAAU;;0BAGb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,sNAAQ;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAGlC,8OAAC;gCAAG,WAAU;;oCAA2D;kDAC/D,8OAAC;wCAAK,WAAU;kDAAwC;;;;;;;;;;;;0CAElE,8OAAC;gCAAE,WAAU;;oCAA8E;oCACvD,KAAK,UAAU;oCAAC;;;;;;;;;;;;;kCAKtD,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,qLAAa;;;;;;;;;;;;;;;;0BAKlB,8OAAC,mMAAkB;gBAAC,MAAM;gBAAM,OAAO;gBAAO,eAAe,UAAU;;;;;;0BAGvE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,iLAAW;;;;;;;;;;0BAId,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC,gOAAU;wCAAC,WAAU;;;;;;oCAAkC;;;;;;;0CAG1D,8OAAC;gCAAI,WAAU;0CAA+J;;;;;;;;;;;;oBAI/K,0BAAY,8OAAC,iMAAiB;wBAAC,MAAM;;;;;;;;;;;;0BAIxC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,sOAAY;gCAAC,WAAU;;;;;;4BAAkC;;;;;;;kCAI5D,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,OAAM;gCACN,aAAY;gCACZ,MAAK;gCACL,oBAAM,8OAAC,mNAAO;oCAAC,WAAU;;;;;;;;;;;0CAE3B,8OAAC;gCACC,OAAM;gCACN,aAAY;gCACZ,MAAK;gCACL,oBAAM,8OAAC,gOAAU;oCAAC,WAAU;;;;;;;;;;;0CAE9B,8OAAC;gCACC,OAAM;gCACN,aAAY;gCACZ,MAAK;gCACL,oBAAM,8OAAC,gNAAM;oCAAC,WAAU;;;;;;;;;;;0CAE1B,8OAAC;gCACC,OAAM;gCACN,aAAY;gCACZ,MAAK;gCACL,oBAAM,8OAAC,uMAAG;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAM3B,8OAAC,+KAAQ;gBAAC,MAAM;;;;;;;;;;;;AAItB;AAEA,SAAS,gBAAgB,EACvB,KAAK,EACL,WAAW,EACX,IAAI,EACJ,IAAI,EAML;IACC,qBACE,8OAAC,0LAAI;QACH,MAAM;QACN,WAAU;;0BAEV,8OAAC;gBAAI,WAAU;;;;;;0BAEf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACZ;;;;;;kCAEH,8OAAC;wBAAG,WAAU;kCAAkH;;;;;;kCAChI,8OAAC;wBAAE,WAAU;kCAA6E;;;;;;kCAE1F,8OAAC;wBAAI,WAAU;;4BAAsJ;0CAEnK,8OAAC,sOAAY;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC"}}]
}