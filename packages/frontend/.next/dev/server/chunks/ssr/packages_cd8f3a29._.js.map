{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/shared/src/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\n\nexport const prisma =\n  globalForPrisma.prisma ||\n  new PrismaClient({\n    log: ['query', 'error', 'warn'],\n  });\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACf,KAAK;QAAC;QAAS;QAAS;KAAO;AACjC;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/shared/src/types/index.ts"],"sourcesContent":["// Common types used across packages\n\nexport interface ShopContext {\n  shopId: string;\n  shopDomain: string;\n  accessToken: string;\n}\n\nexport interface DateRange {\n  from: Date;\n  to: Date;\n}\n\nexport interface PaginationOptions {\n  limit?: number;\n  cursor?: string;\n}\n\nexport interface ApiResponse<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n}\n\nexport interface ScoringWeights {\n  storeFit: number;\n  gapFill: number;\n  trendScore: number;\n  marginPotential: number;\n  competitionLevel: number;\n  seasonalAlignment: number;\n}\n\nexport const DEFAULT_SCORING_WEIGHTS: ScoringWeights = {\n  storeFit: 0.25,\n  gapFill: 0.20,\n  trendScore: 0.15,\n  marginPotential: 0.15,\n  competitionLevel: 0.10,\n  seasonalAlignment: 0.15,\n};\n"],"names":[],"mappings":"AAAA,oCAAoC;;;;;AAiC7B,MAAM,0BAA0C;IACrD,UAAU;IACV,SAAS;IACT,YAAY;IACZ,iBAAiB;IACjB,kBAAkB;IAClB,mBAAmB;AACrB"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/shared/src/index.ts"],"sourcesContent":["// Shared exports for BrandMind AI\nexport { prisma } from './prisma';\nexport * from './types';\n"],"names":[],"mappings":";AAAA,kCAAkC;AAClC;AACA"}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/backend/src/auth/session.ts"],"sourcesContent":["import { cookies } from 'next/headers';\nimport { prisma } from '@brandmind/shared';\n\nexport async function getConnectedShop(): Promise<string | null> {\n    const cookieStore = await cookies();\n    const cookieDomain = cookieStore.get('shopify_connected_shop')?.value;\n    if (cookieDomain) return cookieDomain;\n\n    // Fallback to user session\n    const shop = await getCurrentShop();\n    return shop?.shopDomain || null;\n}\n\nexport async function getCurrentUser() {\n    const cookieStore = await cookies();\n    const userId = cookieStore.get('user_session')?.value;\n\n    if (!userId) return null;\n\n    const user = await prisma.user.findUnique({\n        where: { id: userId },\n        include: { shops: true },\n    });\n\n    return user;\n}\n\nexport async function getCurrentShop() {\n    const user = await getCurrentUser();\n    if (!user || user.shops.length === 0) return null;\n\n    // Return the first shop (for now, single shop per user)\n    return user.shops[0];\n}\n\nexport async function isOnboardingComplete(): Promise<boolean> {\n    const shop = await getCurrentShop();\n    return shop?.onboardingComplete ?? false;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;;;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,eAAe,YAAY,GAAG,CAAC,2BAA2B;IAChE,IAAI,cAAc,OAAO;IAEzB,2BAA2B;IAC3B,MAAM,OAAO,MAAM;IACnB,OAAO,MAAM,cAAc;AAC/B;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,SAAS,YAAY,GAAG,CAAC,iBAAiB;IAEhD,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,OAAO,MAAM,6IAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACtC,OAAO;YAAE,IAAI;QAAO;QACpB,SAAS;YAAE,OAAO;QAAK;IAC3B;IAEA,OAAO;AACX;AAEO,eAAe;IAClB,MAAM,OAAO,MAAM;IACnB,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC,MAAM,KAAK,GAAG,OAAO;IAE7C,wDAAwD;IACxD,OAAO,KAAK,KAAK,CAAC,EAAE;AACxB;AAEO,eAAe;IAClB,MAAM,OAAO,MAAM;IACnB,OAAO,MAAM,sBAAsB;AACvC"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/LogoutButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const LogoutButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call LogoutButton() from the server but LogoutButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/LogoutButton.tsx <module evaluation>\",\n    \"LogoutButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,eAAe,IAAA,wQAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,mFACA","ignoreList":[0]}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/LogoutButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const LogoutButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call LogoutButton() from the server but LogoutButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/LogoutButton.tsx\",\n    \"LogoutButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,eAAe,IAAA,wQAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,+DACA","ignoreList":[0]}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/BrandLogo.tsx"],"sourcesContent":["import React from \"react\";\nimport { Sparkles } from \"lucide-react\";\n\nexport function BrandLogo({ className = \"\", size = \"default\" }: { className?: string; size?: \"default\" | \"lg\" }) {\n    const iconSize = size === \"lg\" ? \"w-6 h-6\" : \"w-5 h-5\";\n    const containerSize = size === \"lg\" ? \"w-11 h-11\" : \"w-9 h-9\";\n    const textSize = size === \"lg\" ? \"text-2xl\" : \"text-lg\";\n\n    return (\n        <div className={`flex items-center gap-2.5 ${className}`}>\n            <div className={`${containerSize} bg-gradient-to-br from-violet-600/20 to-violet-900/30 border border-violet-500/30 rounded-xl flex items-center justify-center shadow-[0_0_16px_rgba(124,58,237,0.2)]`}>\n                <Sparkles className={`${iconSize} text-violet-400`} />\n            </div>\n            <span className={`${textSize} font-bold tracking-tight text-[var(--foreground)]`}>\n                BrandMind<span className=\"text-gradient-violet\">AI</span>\n            </span>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAEO,SAAS,UAAU,EAAE,YAAY,EAAE,EAAE,OAAO,SAAS,EAAmD;IAC3G,MAAM,WAAW,SAAS,OAAO,YAAY;IAC7C,MAAM,gBAAgB,SAAS,OAAO,cAAc;IACpD,MAAM,WAAW,SAAS,OAAO,aAAa;IAE9C,qBACI,8OAAC;QAAI,WAAW,CAAC,0BAA0B,EAAE,WAAW;;0BACpD,8OAAC;gBAAI,WAAW,GAAG,cAAc,qKAAqK,CAAC;0BACnM,cAAA,8OAAC,sNAAQ;oBAAC,WAAW,GAAG,SAAS,gBAAgB,CAAC;;;;;;;;;;;0BAEtD,8OAAC;gBAAK,WAAW,GAAG,SAAS,kDAAkD,CAAC;;oBAAE;kCACrE,8OAAC;wBAAK,WAAU;kCAAuB;;;;;;;;;;;;;;;;;;AAIhE"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/MobileNav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const MobileNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call MobileNav() from the server but MobileNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/MobileNav.tsx <module evaluation>\",\n    \"MobileNav\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,gFACA","ignoreList":[0]}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/components/MobileNav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const MobileNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call MobileNav() from the server but MobileNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/frontend/src/components/MobileNav.tsx\",\n    \"MobileNav\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,4DACA","ignoreList":[0]}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/NEW/packages/frontend/src/app/%28app%29/layout.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport { getCurrentUser } from \"@brandmind/backend/auth/session\";\nimport { redirect } from \"next/navigation\";\nimport { LogoutButton } from \"@/components/LogoutButton\";\nimport { BrandLogo } from \"@/components/BrandLogo\";\nimport { MobileNav } from \"@/components/MobileNav\";\nimport {\n  LayoutDashboard,\n  ShoppingBag,\n  Megaphone,\n  Users,\n  BarChart3,\n  Settings,\n} from \"lucide-react\";\n\nconst modules = [\n  {\n    label: \"Command Center\",\n    href: \"/command-center\",\n    icon: LayoutDashboard,\n    color: \"text-amber-400\",\n    activeColor: \"bg-amber-500/10 border-amber-500/20 text-amber-400\",\n  },\n  {\n    label: \"Product Intelligence\",\n    href: \"/product-intelligence\",\n    icon: ShoppingBag,\n    color: \"text-blue-400\",\n    activeColor: \"bg-blue-500/10 border-blue-500/20 text-blue-400\",\n  },\n  {\n    label: \"Growth Engine\",\n    href: \"/growth-engine\",\n    icon: Megaphone,\n    color: \"text-emerald-400\",\n    activeColor: \"bg-emerald-500/10 border-emerald-500/20 text-emerald-400\",\n  },\n  {\n    label: \"Customer Intelligence\",\n    href: \"/customer-intelligence\",\n    icon: Users,\n    color: \"text-purple-400\",\n    activeColor: \"bg-purple-500/10 border-purple-500/20 text-purple-400\",\n  },\n  {\n    label: \"Business Intelligence\",\n    href: \"/business-intelligence\",\n    icon: BarChart3,\n    color: \"text-pink-400\",\n    activeColor: \"bg-pink-500/10 border-pink-500/20 text-pink-400\",\n  },\n];\n\nexport default async function AppLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const user = await getCurrentUser();\n  if (!user) {\n    redirect(\"/auth/login\");\n  }\n\n  const userInitial = user.name?.[0]?.toUpperCase() || user.email?.[0]?.toUpperCase();\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      {/* Header */}\n      <header className=\"glass sticky top-0 z-50 border-b border-[var(--primary)]/10 relative overflow-hidden\">\n        {/* Violet accent line at very top */}\n        <div className=\"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-[var(--primary)]/60 to-transparent\" />\n        <div className=\"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between\">\n          {/* Logo */}\n          <Link href=\"/command-center\" className=\"group shrink-0\">\n            <BrandLogo />\n          </Link>\n\n          {/* Desktop Navigation */}\n          <nav className=\"hidden lg:flex items-center gap-0.5\">\n            {modules.map((mod) => (\n              <Link\n                key={mod.href}\n                href={mod.href}\n                className=\"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-[var(--muted-foreground)] hover:text-[var(--foreground)] hover:bg-[var(--foreground)]/5 transition-all duration-200 group/nav\"\n              >\n                <mod.icon className={`w-4 h-4 ${mod.color} opacity-70 group-hover/nav:opacity-100 transition-opacity`} />\n                <span className=\"hidden xl:inline\">{mod.label}</span>\n              </Link>\n            ))}\n          </nav>\n\n          {/* Right side: User menu */}\n          <div className=\"flex items-center gap-2 sm:gap-3\">\n            <Link\n              href=\"/settings\"\n              className=\"p-2 rounded-lg text-[var(--muted-foreground)] hover:text-[var(--foreground)] hover:bg-[var(--foreground)]/5 transition-all duration-200\"\n              title=\"Settings\"\n            >\n              <Settings className=\"w-4 h-4\" />\n            </Link>\n\n            <div className=\"hidden sm:flex items-center gap-2.5 pl-3 border-l border-[var(--border)]\">\n              <div className=\"w-8 h-8 bg-gradient-to-br from-violet-500/20 to-violet-700/20 border border-violet-500/25 rounded-lg flex items-center justify-center text-xs font-bold text-violet-400 shadow-[0_0_12px_rgba(124,58,237,0.15)]\">\n                {userInitial}\n              </div>\n              <span className=\"text-sm font-medium text-[var(--muted-foreground)] max-w-[120px] truncate hidden md:block\">\n                {user.name || user.email}\n              </span>\n            </div>\n\n            <LogoutButton />\n\n            {/* Mobile Nav Toggle */}\n            <MobileNav userName={user.name || user.email} userInitial={userInitial || \"U\"} />\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"flex-1\">\n        <div className=\"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12\">\n          {children}\n        </div>\n      </main>\n\n      {/* Footer */}\n      <footer className=\"border-t border-[var(--border)] py-6\">\n        <div className=\"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between text-xs text-[var(--muted-foreground)]\">\n          <span>&copy; 2026 BrandMindAI</span>\n          <div className=\"flex items-center gap-4\">\n            <Link href=\"/settings\" className=\"hover:text-[var(--foreground)] transition-colors\">Settings</Link>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;AASA,MAAM,UAAU;IACd;QACE,OAAO;QACP,MAAM;QACN,MAAM,+OAAe;QACrB,OAAO;QACP,aAAa;IACf;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,mOAAW;QACjB,OAAO;QACP,aAAa;IACf;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,yNAAS;QACf,OAAO;QACP,aAAa;IACf;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,6MAAK;QACX,OAAO;QACP,aAAa;IACf;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,+NAAS;QACf,OAAO;QACP,aAAa;IACf;CACD;AAEc,eAAe,UAAU,EACtC,QAAQ,EAGT;IACC,MAAM,OAAO,MAAM,IAAA,+JAAc;IACjC,IAAI,CAAC,MAAM;QACT,IAAA,iMAAQ,EAAC;IACX;IAEA,MAAM,cAAc,KAAK,IAAI,EAAE,CAAC,EAAE,EAAE,iBAAiB,KAAK,KAAK,EAAE,CAAC,EAAE,EAAE;IAEtE,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAO,WAAU;;kCAEhB,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC,0LAAI;gCAAC,MAAK;gCAAkB,WAAU;0CACrC,cAAA,8OAAC,oKAAS;;;;;;;;;;0CAIZ,8OAAC;gCAAI,WAAU;0CACZ,QAAQ,GAAG,CAAC,CAAC,oBACZ,8OAAC,0LAAI;wCAEH,MAAM,IAAI,IAAI;wCACd,WAAU;;0DAEV,8OAAC,IAAI,IAAI;gDAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,KAAK,CAAC,0DAA0D,CAAC;;;;;;0DACrG,8OAAC;gDAAK,WAAU;0DAAoB,IAAI,KAAK;;;;;;;uCALxC,IAAI,IAAI;;;;;;;;;;0CAWnB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,0LAAI;wCACH,MAAK;wCACL,WAAU;wCACV,OAAM;kDAEN,cAAA,8OAAC,sNAAQ;4CAAC,WAAU;;;;;;;;;;;kDAGtB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACZ;;;;;;0DAEH,8OAAC;gDAAK,WAAU;0DACb,KAAK,IAAI,IAAI,KAAK,KAAK;;;;;;;;;;;;kDAI5B,8OAAC,0KAAY;;;;;kDAGb,8OAAC,oKAAS;wCAAC,UAAU,KAAK,IAAI,IAAI,KAAK,KAAK;wCAAE,aAAa,eAAe;;;;;;;;;;;;;;;;;;;;;;;;0BAMhF,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;0BAKL,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;sCAAK;;;;;;sCACN,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,0LAAI;gCAAC,MAAK;gCAAY,WAAU;0CAAmD;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMhG"}}]
}